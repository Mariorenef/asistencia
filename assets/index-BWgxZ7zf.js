var ZR=Object.defineProperty;var JR=(n,t,e)=>t in n?ZR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var xt=(n,t,e)=>JR(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function t1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var am={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function e1(){if(k0)return tu;k0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return tu.Fragment=t,tu.jsx=e,tu.jsxs=e,tu}var N0;function n1(){return N0||(N0=1,am.exports=e1()),am.exports}var gt=n1(),om={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function i1(){if(P0)return Ct;P0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,V={};function M(O,Q,at){this.props=O,this.context=Q,this.refs=V,this.updater=at||w}M.prototype.isReactComponent={},M.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},M.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=M.prototype;function $(O,Q,at){this.props=O,this.context=Q,this.refs=V,this.updater=at||w}var Z=$.prototype=new K;Z.constructor=$,x(Z,M.prototype),Z.isPureReactComponent=!0;var rt=Array.isArray,nt={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function N(O,Q,at,ot,dt,Rt){return at=Rt.ref,{$$typeof:n,type:O,key:Q,ref:at!==void 0?at:null,props:Rt}}function R(O,Q){return N(O.type,Q,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function k(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(at){return Q[at]})}var P=/\/+/g;function L(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):Q.toString(36)}function C(){}function Ht(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(C,C):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function yt(O,Q,at,ot,dt){var Rt=typeof O;(Rt==="undefined"||Rt==="boolean")&&(O=null);var _t=!1;if(O===null)_t=!0;else switch(Rt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(O.$$typeof){case n:case t:_t=!0;break;case _:return _t=O._init,yt(_t(O._payload),Q,at,ot,dt)}}if(_t)return dt=dt(O),_t=ot===""?"."+L(O,0):ot,rt(dt)?(at="",_t!=null&&(at=_t.replace(P,"$&/")+"/"),yt(dt,Q,at,"",function(ri){return ri})):dt!=null&&(I(dt)&&(dt=R(dt,at+(dt.key==null||O&&O.key===dt.key?"":(""+dt.key).replace(P,"$&/")+"/")+_t)),Q.push(dt)),1;_t=0;var Pe=ot===""?".":ot+":";if(rt(O))for(var se=0;se<O.length;se++)ot=O[se],Rt=Pe+L(ot,se),_t+=yt(ot,Q,at,Rt,dt);else if(se=T(O),typeof se=="function")for(O=se.call(O),se=0;!(ot=O.next()).done;)ot=ot.value,Rt=Pe+L(ot,se++),_t+=yt(ot,Q,at,Rt,dt);else if(Rt==="object"){if(typeof O.then=="function")return yt(Ht(O),Q,at,ot,dt);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return _t}function F(O,Q,at){if(O==null)return O;var ot=[],dt=0;return yt(O,ot,"","",function(Rt){return Q.call(at,Rt,dt++)}),ot}function it(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(at){(O._status===0||O._status===-1)&&(O._status=1,O._result=at)},function(at){(O._status===0||O._status===-1)&&(O._status=2,O._result=at)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var W=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function lt(){}return Ct.Children={map:F,forEach:function(O,Q,at){F(O,function(){Q.apply(this,arguments)},at)},count:function(O){var Q=0;return F(O,function(){Q++}),Q},toArray:function(O){return F(O,function(Q){return Q})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ct.Component=M,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=$,Ct.StrictMode=i,Ct.Suspense=d,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=nt,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(O){return nt.H.useMemoCache(O)}},Ct.cache=function(O){return function(){return O.apply(null,arguments)}},Ct.cloneElement=function(O,Q,at){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ot=x({},O.props),dt=O.key,Rt=void 0;if(Q!=null)for(_t in Q.ref!==void 0&&(Rt=void 0),Q.key!==void 0&&(dt=""+Q.key),Q)!ct.call(Q,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&Q.ref===void 0||(ot[_t]=Q[_t]);var _t=arguments.length-2;if(_t===1)ot.children=at;else if(1<_t){for(var Pe=Array(_t),se=0;se<_t;se++)Pe[se]=arguments[se+2];ot.children=Pe}return N(O.type,dt,void 0,void 0,Rt,ot)},Ct.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},Ct.createElement=function(O,Q,at){var ot,dt={},Rt=null;if(Q!=null)for(ot in Q.key!==void 0&&(Rt=""+Q.key),Q)ct.call(Q,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(dt[ot]=Q[ot]);var _t=arguments.length-2;if(_t===1)dt.children=at;else if(1<_t){for(var Pe=Array(_t),se=0;se<_t;se++)Pe[se]=arguments[se+2];dt.children=Pe}if(O&&O.defaultProps)for(ot in _t=O.defaultProps,_t)dt[ot]===void 0&&(dt[ot]=_t[ot]);return N(O,Rt,void 0,void 0,null,dt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(O){return{$$typeof:h,render:O}},Ct.isValidElement=I,Ct.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:it}},Ct.memo=function(O,Q){return{$$typeof:m,type:O,compare:Q===void 0?null:Q}},Ct.startTransition=function(O){var Q=nt.T,at={};nt.T=at;try{var ot=O(),dt=nt.S;dt!==null&&dt(at,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(lt,W)}catch(Rt){W(Rt)}finally{nt.T=Q}},Ct.unstable_useCacheRefresh=function(){return nt.H.useCacheRefresh()},Ct.use=function(O){return nt.H.use(O)},Ct.useActionState=function(O,Q,at){return nt.H.useActionState(O,Q,at)},Ct.useCallback=function(O,Q){return nt.H.useCallback(O,Q)},Ct.useContext=function(O){return nt.H.useContext(O)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(O,Q){return nt.H.useDeferredValue(O,Q)},Ct.useEffect=function(O,Q,at){var ot=nt.H;if(typeof at=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ot.useEffect(O,Q)},Ct.useId=function(){return nt.H.useId()},Ct.useImperativeHandle=function(O,Q,at){return nt.H.useImperativeHandle(O,Q,at)},Ct.useInsertionEffect=function(O,Q){return nt.H.useInsertionEffect(O,Q)},Ct.useLayoutEffect=function(O,Q){return nt.H.useLayoutEffect(O,Q)},Ct.useMemo=function(O,Q){return nt.H.useMemo(O,Q)},Ct.useOptimistic=function(O,Q){return nt.H.useOptimistic(O,Q)},Ct.useReducer=function(O,Q,at){return nt.H.useReducer(O,Q,at)},Ct.useRef=function(O){return nt.H.useRef(O)},Ct.useState=function(O){return nt.H.useState(O)},Ct.useSyncExternalStore=function(O,Q,at){return nt.H.useSyncExternalStore(O,Q,at)},Ct.useTransition=function(){return nt.H.useTransition()},Ct.version="19.1.0",Ct}var V0;function mp(){return V0||(V0=1,om.exports=i1()),om.exports}var Gt=mp();const ET=t1(Gt);var lm={exports:{}},eu={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function s1(){return L0||(L0=1,function(n){function t(F,it){var W=F.length;F.push(it);t:for(;0<W;){var lt=W-1>>>1,O=F[lt];if(0<a(O,it))F[lt]=it,F[W]=O,W=lt;else break t}}function e(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var it=F[0],W=F.pop();if(W!==it){F[0]=W;t:for(var lt=0,O=F.length,Q=O>>>1;lt<Q;){var at=2*(lt+1)-1,ot=F[at],dt=at+1,Rt=F[dt];if(0>a(ot,W))dt<O&&0>a(Rt,ot)?(F[lt]=Rt,F[dt]=W,lt=dt):(F[lt]=ot,F[at]=W,lt=at);else if(dt<O&&0>a(Rt,W))F[lt]=Rt,F[dt]=W,lt=dt;else break t}}return it}function a(F,it){var W=F.sortIndex-it.sortIndex;return W!==0?W:F.id-it.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],m=[],_=1,v=null,T=3,w=!1,x=!1,V=!1,M=!1,K=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function rt(F){for(var it=e(m);it!==null;){if(it.callback===null)i(m);else if(it.startTime<=F)i(m),it.sortIndex=it.expirationTime,t(d,it);else break;it=e(m)}}function nt(F){if(V=!1,rt(F),!x)if(e(d)!==null)x=!0,ct||(ct=!0,L());else{var it=e(m);it!==null&&yt(nt,it.startTime-F)}}var ct=!1,N=-1,R=5,I=-1;function k(){return M?!0:!(n.unstable_now()-I<R)}function P(){if(M=!1,ct){var F=n.unstable_now();I=F;var it=!0;try{t:{x=!1,V&&(V=!1,$(N),N=-1),w=!0;var W=T;try{e:{for(rt(F),v=e(d);v!==null&&!(v.expirationTime>F&&k());){var lt=v.callback;if(typeof lt=="function"){v.callback=null,T=v.priorityLevel;var O=lt(v.expirationTime<=F);if(F=n.unstable_now(),typeof O=="function"){v.callback=O,rt(F),it=!0;break e}v===e(d)&&i(d),rt(F)}else i(d);v=e(d)}if(v!==null)it=!0;else{var Q=e(m);Q!==null&&yt(nt,Q.startTime-F),it=!1}}break t}finally{v=null,T=W,w=!1}it=void 0}}finally{it?L():ct=!1}}}var L;if(typeof Z=="function")L=function(){Z(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ht=C.port2;C.port1.onmessage=P,L=function(){Ht.postMessage(null)}}else L=function(){K(P,0)};function yt(F,it){N=K(function(){F(n.unstable_now())},it)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(F){switch(T){case 1:case 2:case 3:var it=3;break;default:it=T}var W=T;T=it;try{return F()}finally{T=W}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(F,it){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=T;T=F;try{return it()}finally{T=W}},n.unstable_scheduleCallback=function(F,it,W){var lt=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?lt+W:lt):W=lt,F){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=W+O,F={id:_++,callback:it,priorityLevel:F,startTime:W,expirationTime:O,sortIndex:-1},W>lt?(F.sortIndex=W,t(m,F),e(d)===null&&F===e(m)&&(V?($(N),N=-1):V=!0,yt(nt,W-lt))):(F.sortIndex=O,t(d,F),x||w||(x=!0,ct||(ct=!0,L()))),F},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(F){var it=T;return function(){var W=T;T=it;try{return F.apply(this,arguments)}finally{T=W}}}}(cm)),cm}var U0;function r1(){return U0||(U0=1,um.exports=s1()),um.exports}var hm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function a1(){if(z0)return en;z0=1;var n=mp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,_)},en.flushSync=function(d){var m=u.T,_=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=m,i.p=_,i.d.f()}},en.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},en.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},en.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:w}):_==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},en.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},en.requestFormReset=function(d){i.d.r(d)},en.unstable_batchedUpdates=function(d,m){return d(m)},en.useFormState=function(d,m,_){return u.H.useFormState(d,m,_)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.1.0",en}var B0;function o1(){if(B0)return hm.exports;B0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hm.exports=a1(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function l1(){if(H0)return eu;H0=1;var n=r1(),t=mp(),e=o1();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(c=g.return,c!==null){l=c;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===c)return h(g),r;p=p.sibling}throw Error(i(188))}if(l.return!==c.return)l=g,c=p;else{for(var E=!1,S=g.child;S;){if(S===l){E=!0,l=g,c=p;break}if(S===c){E=!0,c=g,l=p;break}S=S.sibling}if(!E){for(S=p.child;S;){if(S===l){E=!0,l=p,c=g;break}if(S===c){E=!0,c=p,l=g;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function Ht(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case M:return"Profiler";case V:return"StrictMode";case nt:return"Suspense";case ct:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case Z:return(s.displayName||"Context")+".Provider";case $:return(s._context.displayName||"Context")+".Consumer";case rt:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return r=s.displayName||null,r!==null?r:Ht(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Ht(s(r))}catch{}}return null}var yt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},lt=[],O=-1;function Q(s){return{current:s}}function at(s){0>O||(s.current=lt[O],lt[O]=null,O--)}function ot(s,r){O++,lt[O]=s.current,s.current=r}var dt=Q(null),Rt=Q(null),_t=Q(null),Pe=Q(null);function se(s,r){switch(ot(_t,r),ot(Rt,s),ot(dt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?o0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=o0(r),s=l0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}at(dt),ot(dt,s)}function ri(){at(dt),at(Rt),at(_t)}function ys(s){s.memoizedState!==null&&ot(Pe,s);var r=dt.current,l=l0(r,s.type);r!==l&&(ot(Rt,s),ot(dt,l))}function ki(s){Rt.current===s&&(at(dt),at(Rt)),Pe.current===s&&(at(Pe),Wl._currentValue=W)}var Er=Object.prototype.hasOwnProperty,Tr=n.unstable_scheduleCallback,Sr=n.unstable_cancelCallback,Ko=n.unstable_shouldYield,tc=n.unstable_requestPaint,Mn=n.unstable_now,ad=n.unstable_getCurrentPriorityLevel,Yo=n.unstable_ImmediatePriority,wa=n.unstable_UserBlockingPriority,Ar=n.unstable_NormalPriority,od=n.unstable_LowPriority,Ra=n.unstable_IdlePriority,Qo=n.log,ec=n.unstable_setDisableYieldValue,fe=null,Qt=null;function bn(s){if(typeof Qo=="function"&&ec(s),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(fe,s)}catch{}}var Je=Math.clz32?Math.clz32:wr,nc=Math.log,ld=Math.LN2;function wr(s){return s>>>=0,s===0?32:31-(nc(s)/ld|0)|0}var Rr=256,Ir=4194304;function Qn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ia(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var g=0,p=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var S=c&134217727;return S!==0?(c=S&~p,c!==0?g=Qn(c):(E&=S,E!==0?g=Qn(E):l||(l=S&~s,l!==0&&(g=Qn(l))))):(S=c&~p,S!==0?g=Qn(S):E!==0?g=Qn(E):l||(l=c&~s,l!==0&&(g=Qn(l)))),g===0?0:r!==0&&r!==g&&(r&p)===0&&(p=g&-g,l=r&-r,p>=l||p===32&&(l&4194048)!==0)?r:g}function Cr(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Wo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xo(){var s=Rr;return Rr<<=1,(Rr&4194048)===0&&(Rr=256),s}function $o(){var s=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),s}function Ni(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Pi(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zo(s,r,l,c,g,p){var E=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,D=s.expirationTimes,j=s.hiddenUpdates;for(l=E&~l;0<l;){var X=31-Je(l),tt=1<<X;S[X]=0,D[X]=-1;var q=j[X];if(q!==null)for(j[X]=null,X=0;X<q.length;X++){var G=q[X];G!==null&&(G.lane&=-536870913)}l&=~tt}c!==0&&ai(s,c,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~r))}function ai(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Je(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&4194090}function Jo(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Je(l),g=1<<c;g&r|s[c]&r&&(s[c]|=r),l&=~g}}function vs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ca(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function bs(){var s=it.p;return s!==0?s:(s=window.event,s===void 0?32:I0(s.type))}function ic(s,r){var l=it.p;try{return it.p=s,r()}finally{it.p=l}}var oe=Math.random().toString(36).slice(2),Re="__reactFiber$"+oe,be="__reactProps$"+oe,kn="__reactContainer$"+oe,tl="__reactEvents$"+oe,ud="__reactListeners$"+oe,Es="__reactHandles$"+oe,sc="__reactResources$"+oe,xr="__reactMarker$"+oe;function Ts(s){delete s[Re],delete s[be],delete s[tl],delete s[ud],delete s[Es]}function Vi(s){var r=s[Re];if(r)return r;for(var l=s.parentNode;l;){if(r=l[kn]||l[Re]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=f0(s);s!==null;){if(l=s[Re])return l;s=f0(s)}return r}s=l,l=s.parentNode}return null}function oi(s){if(s=s[Re]||s[kn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function li(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ln(s){var r=s[sc];return r||(r=s[sc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function me(s){s[xr]=!0}var el=new Set,xa={};function Wn(s,r){Li(s,r),Li(s+"Capture",r)}function Li(s,r){for(xa[s]=r,s=0;s<r.length;s++)el.add(r[s])}var rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ac={},Dr={};function oc(s){return Er.call(Dr,s)?!0:Er.call(ac,s)?!1:rc.test(s)?Dr[s]=!0:(ac[s]=!0,!1)}function Ss(s,r,l){if(oc(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function ui(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Fe(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}var Or,lc;function Ui(s){if(Or===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Or=r&&r[1]||"",lc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+s+lc}var Da=!1;function Oa(s,r){if(!s||Da)return"";Da=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(G){var q=G}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(G){q=G}s.call(tt.prototype)}}else{try{throw Error()}catch(G){q=G}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],S=p[1];if(E&&S){var D=E.split(`
`),j=S.split(`
`);for(g=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;if(c===D.length||g===j.length)for(c=D.length-1,g=j.length-1;1<=c&&0<=g&&D[c]!==j[g];)g--;for(;1<=c&&0<=g;c--,g--)if(D[c]!==j[g]){if(c!==1||g!==1)do if(c--,g--,0>g||D[c]!==j[g]){var X=`
`+D[c].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=c&&0<=g);break}}}finally{Da=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ui(l):""}function nl(s){switch(s.tag){case 26:case 27:case 5:return Ui(s.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return Oa(s.type,!1);case 11:return Oa(s.type.render,!1);case 1:return Oa(s.type,!0);case 31:return Ui("Activity");default:return""}}function Ma(s){try{var r="";do r+=nl(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function il(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cd(s){var r=il(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),c=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,p.call(this,E)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ka(s){s._valueTracker||(s._valueTracker=cd(s))}function sl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=il(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Mr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var hd=/[\n"\\]/g;function Ee(s){return s.replace(hd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function En(s,r,l,c,g,p,E,S){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?As(s,E,un(r)):l!=null?As(s,E,un(l)):c!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+un(S):s.removeAttribute("name")}function kr(s,r,l,c,g,p,E,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,S||r===s.value||(s.value=r),s.defaultValue=r}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=S?s.checked:!!c,s.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function As(s,r,l){r==="number"&&Mr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function zi(s,r,l,c){if(s=s.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=r.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&c&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,c&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function Jt(s,r,l){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+un(l):""}function Nr(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(yt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=un(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c)}function Nn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Pr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uc(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Pr.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function rl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var g in r)c=r[g],r.hasOwnProperty(g)&&l[g]!==c&&uc(s,g,c)}else for(var p in r)r.hasOwnProperty(p)&&uc(s,p,r[p])}function al(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(s){return dd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Bi=null;function Pn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Hi=null,ji=null;function ol(s){var r=oi(s);if(r&&(s=r.stateNode)){var l=s[be]||null;t:switch(s=r.stateNode,r.type){case"input":if(En(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ee(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var g=c[be]||null;if(!g)throw Error(i(90));En(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&sl(c)}break t;case"textarea":Jt(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&zi(s,!!l.multiple,r,!1)}}}var ci=!1;function cc(s,r,l){if(ci)return s(r,l);ci=!0;try{var c=s(r);return c}finally{if(ci=!1,(Hi!==null||ji!==null)&&(ih(),Hi&&(r=Hi,s=ji,ji=Hi=null,ol(r),s)))for(r=0;r<s.length;r++)ol(s[r])}}function Vr(s,r){var l=s.stateNode;if(l===null)return null;var c=l[be]||null;if(c===null)return null;l=c[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Xn)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{Vn=!1}var hi=null,ws=null,Fi=null;function ll(){if(Fi)return Fi;var s,r=ws,l=r.length,c,g="value"in hi?hi.value:hi.textContent,p=g.length;for(s=0;s<l&&r[s]===g[s];s++);var E=l-s;for(c=1;c<=E&&r[l-c]===g[p-c];c++);return Fi=g.slice(s,1<c?1-c:void 0)}function fi(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function di(){return!0}function ul(){return!1}function Ve(s){function r(l,c,g,p,E){this._reactName=l,this._targetInst=g,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?di:ul,this.isPropagationStopped=ul,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),r}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=Ve(Kt),Ur=_({},Kt,{view:0,detail:0}),hc=Ve(Ur),Va,La,gi,zr=_({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Va=s.screenX-gi.screenX,La=s.screenY-gi.screenY):La=Va=0,gi=s),Va)},movementY:function(s){return"movementY"in s?s.movementY:La}}),Ln=Ve(zr),fc=_({},zr,{dataTransfer:0}),gd=Ve(fc),Br=_({},Ur,{relatedTarget:0}),Ua=Ve(Br),cl=_({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),za=Ve(cl),dc=_({},Kt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ba=Ve(dc),md=_({},Kt,{data:0}),hl=Ve(md),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=mc[s])?!!r[s]:!1}function jr(){return fl}var pc=_({},Ur,{key:function(s){if(s.key){var r=Hr[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=fi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?gc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(s){return s.type==="keypress"?fi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ha=Ve(pc),_c=_({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=Ve(_c),qi=_({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),yc=Ve(qi),vc=_({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),bc=Ve(vc),Ec=_({},zr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=Ve(Ec),cn=_({},Kt,{newState:0,oldState:0}),Tc=Ve(cn),Sc=[9,13,27,32],mi=Xn&&"CompositionEvent"in window,f=null;Xn&&"documentMode"in document&&(f=document.documentMode);var y=Xn&&"TextEvent"in window&&!f,b=Xn&&(!mi||f&&8<f&&11>=f),A=" ",B=!1;function Y(s,r){switch(s){case"keyup":return Sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ut(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function Ie(s,r){switch(s){case"compositionend":return ut(r);case"keypress":return r.which!==32?null:(B=!0,A);case"textInput":return s=r.data,s===A&&B?null:s;default:return null}}function Ut(s,r){if(Lt)return s==="compositionend"||!mi&&Y(s,r)?(s=ll(),Fi=ws=hi=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b&&r.locale!=="ko"?null:r.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Le[s.type]:r==="textarea"}function Gi(s,r,l,c){Hi?ji?ji.push(c):ji=[c]:Hi=c,r=uh(r,"onChange"),0<r.length&&(l=new Pa("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var qe=null,pi=null;function gl(s){n0(s,0)}function Ac(s){var r=li(s);if(sl(r))return s}function S_(s,r){if(s==="change")return r}var A_=!1;if(Xn){var pd;if(Xn){var _d="oninput"in document;if(!_d){var w_=document.createElement("div");w_.setAttribute("oninput","return;"),_d=typeof w_.oninput=="function"}pd=_d}else pd=!1;A_=pd&&(!document.documentMode||9<document.documentMode)}function R_(){qe&&(qe.detachEvent("onpropertychange",I_),pi=qe=null)}function I_(s){if(s.propertyName==="value"&&Ac(pi)){var r=[];Gi(r,pi,s,Pn(s)),cc(gl,r)}}function Cw(s,r,l){s==="focusin"?(R_(),qe=r,pi=l,qe.attachEvent("onpropertychange",I_)):s==="focusout"&&R_()}function xw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ac(pi)}function Dw(s,r){if(s==="click")return Ac(r)}function Ow(s,r){if(s==="input"||s==="change")return Ac(r)}function Mw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Tn=typeof Object.is=="function"?Object.is:Mw;function ml(s,r){if(Tn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var g=l[c];if(!Er.call(r,g)||!Tn(s[g],r[g]))return!1}return!0}function C_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function x_(s,r){var l=C_(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=C_(l)}}function D_(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?D_(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function O_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Mr(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Mr(s.document)}return r}function yd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var kw=Xn&&"documentMode"in document&&11>=document.documentMode,Fa=null,vd=null,pl=null,bd=!1;function M_(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bd||Fa==null||Fa!==Mr(c)||(c=Fa,"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pl&&ml(pl,c)||(pl=c,c=uh(vd,"onSelect"),0<c.length&&(r=new Pa("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Fa)))}function Fr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var qa={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Ed={},k_={};Xn&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function qr(s){if(Ed[s])return Ed[s];if(!qa[s])return s;var r=qa[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in k_)return Ed[s]=r[l];return s}var N_=qr("animationend"),P_=qr("animationiteration"),V_=qr("animationstart"),Nw=qr("transitionrun"),Pw=qr("transitionstart"),Vw=qr("transitioncancel"),L_=qr("transitionend"),U_=new Map,Td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Td.push("scrollEnd");function $n(s,r){U_.set(s,r),Wn(r,[s])}var z_=new WeakMap;function Un(s,r){if(typeof s=="object"&&s!==null){var l=z_.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ma(r)},z_.set(s,r),r)}return{value:s,source:r,stack:Ma(r)}}var zn=[],Ga=0,Sd=0;function wc(){for(var s=Ga,r=Sd=Ga=0;r<s;){var l=zn[r];zn[r++]=null;var c=zn[r];zn[r++]=null;var g=zn[r];zn[r++]=null;var p=zn[r];if(zn[r++]=null,c!==null&&g!==null){var E=c.pending;E===null?g.next=g:(g.next=E.next,E.next=g),c.pending=g}p!==0&&B_(l,g,p)}}function Rc(s,r,l,c){zn[Ga++]=s,zn[Ga++]=r,zn[Ga++]=l,zn[Ga++]=c,Sd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Ad(s,r,l,c){return Rc(s,r,l,c),Ic(s)}function Ka(s,r){return Rc(s,null,null,r),Ic(s)}function B_(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,c=p.alternate,c!==null&&(c.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&r!==null&&(g=31-Je(l),s=p.hiddenUpdates,c=s[g],c===null?s[g]=[r]:c.push(r),r.lane=l|536870912),p):null}function Ic(s){if(50<Hl)throw Hl=0,Dg=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Ya={};function Lw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(s,r,l,c){return new Lw(s,r,l,c)}function wd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ki(s,r){var l=s.alternate;return l===null?(l=Sn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function H_(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Cc(s,r,l,c,g,p){var E=0;if(c=s,typeof s=="function")wd(s)&&(E=1);else if(typeof s=="string")E=zR(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=Sn(31,l,r,g),s.elementType=I,s.lanes=p,s;case x:return Gr(l.children,g,p,r);case V:E=8,g|=24;break;case M:return s=Sn(12,l,r,g|2),s.elementType=M,s.lanes=p,s;case nt:return s=Sn(13,l,r,g),s.elementType=nt,s.lanes=p,s;case ct:return s=Sn(19,l,r,g),s.elementType=ct,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:case Z:E=10;break t;case $:E=9;break t;case rt:E=11;break t;case N:E=14;break t;case R:E=16,c=null;break t}E=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Sn(E,l,r,g),r.elementType=s,r.type=c,r.lanes=p,r}function Gr(s,r,l,c){return s=Sn(7,s,c,r),s.lanes=l,s}function Rd(s,r,l){return s=Sn(6,s,null,r),s.lanes=l,s}function Id(s,r,l){return r=Sn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Qa=[],Wa=0,xc=null,Dc=0,Bn=[],Hn=0,Kr=null,Yi=1,Qi="";function Yr(s,r){Qa[Wa++]=Dc,Qa[Wa++]=xc,xc=s,Dc=r}function j_(s,r,l){Bn[Hn++]=Yi,Bn[Hn++]=Qi,Bn[Hn++]=Kr,Kr=s;var c=Yi;s=Qi;var g=32-Je(c)-1;c&=~(1<<g),l+=1;var p=32-Je(r)+g;if(30<p){var E=g-g%5;p=(c&(1<<E)-1).toString(32),c>>=E,g-=E,Yi=1<<32-Je(r)+g|l<<g|c,Qi=p+s}else Yi=1<<p|l<<g|c,Qi=s}function Cd(s){s.return!==null&&(Yr(s,1),j_(s,1,0))}function xd(s){for(;s===xc;)xc=Qa[--Wa],Qa[Wa]=null,Dc=Qa[--Wa],Qa[Wa]=null;for(;s===Kr;)Kr=Bn[--Hn],Bn[Hn]=null,Qi=Bn[--Hn],Bn[Hn]=null,Yi=Bn[--Hn],Bn[Hn]=null}var hn=null,de=null,qt=!1,Qr=null,_i=!1,Dd=Error(i(519));function Wr(s){var r=Error(i(418,""));throw vl(Un(r,s)),Dd}function F_(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Re]=s,r[be]=c,l){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Nt(Fl[l],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Nt("invalid",r),kr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ka(r);break;case"select":Nt("invalid",r);break;case"textarea":Nt("invalid",r),Nr(r,c.value,c.defaultValue,c.children),ka(r)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||a0(r.textContent,l)?(c.popover!=null&&(Nt("beforetoggle",r),Nt("toggle",r)),c.onScroll!=null&&Nt("scroll",r),c.onScrollEnd!=null&&Nt("scrollend",r),c.onClick!=null&&(r.onclick=ch),r=!0):r=!1,r||Wr(s)}function q_(s){for(hn=s.return;hn;)switch(hn.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:hn=hn.return}}function _l(s){if(s!==hn)return!1;if(!qt)return q_(s),qt=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Kg(s.type,s.memoizedProps)),l=!l),l&&de&&Wr(s),q_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){de=Jn(s.nextSibling);break t}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}de=null}}else r===27?(r=de,Hs(s.type)?(s=Xg,Xg=null,de=s):de=r):de=hn?Jn(s.stateNode.nextSibling):null;return!0}function yl(){de=hn=null,qt=!1}function G_(){var s=Qr;return s!==null&&(gn===null?gn=s:gn.push.apply(gn,s),Qr=null),s}function vl(s){Qr===null?Qr=[s]:Qr.push(s)}var Od=Q(null),Xr=null,Wi=null;function Rs(s,r,l){ot(Od,r._currentValue),r._currentValue=l}function Xi(s){s._currentValue=Od.current,at(Od)}function Md(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function kd(s,r,l,c){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var E=g.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=g;for(var D=0;D<r.length;D++)if(S.context===r[D]){p.lanes|=l,S=p.alternate,S!==null&&(S.lanes|=l),Md(p.return,l,s),c||(E=null);break t}p=S.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=l,p=E.alternate,p!==null&&(p.lanes|=l),Md(E,l,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function bl(s,r,l,c){s=null;for(var g=r,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=g.type;Tn(g.pendingProps.value,E.value)||(s!==null?s.push(S):s=[S])}}else if(g===Pe.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Wl):s=[Wl])}g=g.return}s!==null&&kd(r,s,l,c),r.flags|=262144}function Oc(s){for(s=s.firstContext;s!==null;){if(!Tn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function $r(s){Xr=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return K_(Xr,s)}function Mc(s,r){return Xr===null&&$r(s),K_(s,r)}function K_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Wi=Wi.next=r;return l}var Uw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},zw=n.unstable_scheduleCallback,Bw=n.unstable_NormalPriority,xe={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nd(){return{controller:new Uw,data:new Map,refCount:0}}function El(s){s.refCount--,s.refCount===0&&zw(Bw,function(){s.controller.abort()})}var Tl=null,Pd=0,Xa=0,$a=null;function Hw(s,r){if(Tl===null){var l=Tl=[];Pd=0,Xa=Lg(),$a={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Pd++,r.then(Y_,Y_),r}function Y_(){if(--Pd===0&&Tl!==null){$a!==null&&($a.status="fulfilled");var s=Tl;Tl=null,Xa=0,$a=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function jw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(c.status="rejected",c.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),c}var Q_=F.S;F.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Hw(s,r),Q_!==null&&Q_(s,r)};var Zr=Q(null);function Vd(){var s=Zr.current;return s!==null?s:re.pooledCache}function kc(s,r){r===null?ot(Zr,Zr.current):ot(Zr,r.pool)}function W_(){var s=Vd();return s===null?null:{parent:xe._currentValue,pool:s}}var Sl=Error(i(460)),X_=Error(i(474)),Nc=Error(i(542)),Ld={then:function(){}};function $_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Pc(){}function Z_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Pc,Pc),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ty(s),s;default:if(typeof r.status=="string")r.then(Pc,Pc);else{if(s=re,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=c}},function(c){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ty(s),s}throw Al=r,Sl}}var Al=null;function J_(){if(Al===null)throw Error(i(459));var s=Al;return Al=null,s}function ty(s){if(s===Sl||s===Nc)throw Error(i(483))}var Is=!1;function Ud(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Cs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function xs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Wt&2)!==0){var g=c.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),c.pending=r,r=Ic(s),B_(s,null,l),r}return Rc(s,c,r,l),Ic(s)}function wl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Jo(s,l)}}function Bd(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=E:p=p.next=E,l=l.next}while(l!==null);p===null?g=p=r:p=p.next=r}else g=p=r;l={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Hd=!1;function Rl(){if(Hd){var s=$a;if(s!==null)throw s}}function Il(s,r,l,c){Hd=!1;var g=s.updateQueue;Is=!1;var p=g.firstBaseUpdate,E=g.lastBaseUpdate,S=g.shared.pending;if(S!==null){g.shared.pending=null;var D=S,j=D.next;D.next=null,E===null?p=j:E.next=j,E=D;var X=s.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==E&&(S===null?X.firstBaseUpdate=j:S.next=j,X.lastBaseUpdate=D))}if(p!==null){var tt=g.baseState;E=0,X=j=D=null,S=p;do{var q=S.lane&-536870913,G=q!==S.lane;if(G?(zt&q)===q:(c&q)===q){q!==0&&q===Xa&&(Hd=!0),X!==null&&(X=X.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var St=s,bt=S;q=r;var ne=l;switch(bt.tag){case 1:if(St=bt.payload,typeof St=="function"){tt=St.call(ne,tt,q);break t}tt=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=bt.payload,q=typeof St=="function"?St.call(ne,tt,q):St,q==null)break t;tt=_({},tt,q);break t;case 2:Is=!0}}q=S.callback,q!==null&&(s.flags|=64,G&&(s.flags|=8192),G=g.callbacks,G===null?g.callbacks=[q]:G.push(q))}else G={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(j=X=G,D=tt):X=X.next=G,E|=q;if(S=S.next,S===null){if(S=g.shared.pending,S===null)break;G=S,S=G.next,G.next=null,g.lastBaseUpdate=G,g.shared.pending=null}}while(!0);X===null&&(D=tt),g.baseState=D,g.firstBaseUpdate=j,g.lastBaseUpdate=X,p===null&&(g.shared.lanes=0),Ls|=E,s.lanes=E,s.memoizedState=tt}}function ey(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function ny(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)ey(l[s],r)}var Za=Q(null),Vc=Q(0);function iy(s,r){s=is,ot(Vc,s),ot(Za,r),is=s|r.baseLanes}function jd(){ot(Vc,is),ot(Za,Za.current)}function Fd(){is=Vc.current,at(Za),at(Vc)}var Ds=0,Dt=null,te=null,Te=null,Lc=!1,Ja=!1,Jr=!1,Uc=0,Cl=0,to=null,Fw=0;function pe(){throw Error(i(321))}function qd(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Tn(s[l],r[l]))return!1;return!0}function Gd(s,r,l,c,g,p){return Ds=p,Dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=s===null||s.memoizedState===null?By:Hy,Jr=!1,p=l(c,g),Jr=!1,Ja&&(p=ry(r,l,c,g)),sy(s),p}function sy(s){F.H=qc;var r=te!==null&&te.next!==null;if(Ds=0,Te=te=Dt=null,Lc=!1,Cl=0,to=null,r)throw Error(i(300));s===null||Ue||(s=s.dependencies,s!==null&&Oc(s)&&(Ue=!0))}function ry(s,r,l,c){Dt=s;var g=0;do{if(Ja&&(to=null),Cl=0,Ja=!1,25<=g)throw Error(i(301));if(g+=1,Te=te=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=Xw,p=r(l,c)}while(Ja);return p}function qw(){var s=F.H,r=s.useState()[0];return r=typeof r.then=="function"?xl(r):r,s=s.useState()[0],(te!==null?te.memoizedState:null)!==s&&(Dt.flags|=1024),r}function Kd(){var s=Uc!==0;return Uc=0,s}function Yd(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Qd(s){if(Lc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Lc=!1}Ds=0,Te=te=Dt=null,Ja=!1,Cl=Uc=0,to=null}function fn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Dt.memoizedState=Te=s:Te=Te.next=s,Te}function Se(){if(te===null){var s=Dt.alternate;s=s!==null?s.memoizedState:null}else s=te.next;var r=Te===null?Dt.memoizedState:Te.next;if(r!==null)Te=r,te=s;else{if(s===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));te=s,s={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},Te===null?Dt.memoizedState=Te=s:Te=Te.next=s}return Te}function Wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(s){var r=Cl;return Cl+=1,to===null&&(to=[]),s=Z_(to,s,r),r=Dt,(Te===null?r.memoizedState:Te.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?By:Hy),s}function zc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return xl(s);if(s.$$typeof===Z)return tn(s)}throw Error(i(438,String(s)))}function Xd(s){var r=null,l=Dt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Wd(),Dt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=k;return r.index++,l}function $i(s,r){return typeof r=="function"?r(s):r}function Bc(s){var r=Se();return $d(r,te,s)}function $d(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var g=s.baseQueue,p=c.pending;if(p!==null){if(g!==null){var E=g.next;g.next=p.next,p.next=E}r.baseQueue=g=p,c.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{r=g.next;var S=E=null,D=null,j=r,X=!1;do{var tt=j.lane&-536870913;if(tt!==j.lane?(zt&tt)===tt:(Ds&tt)===tt){var q=j.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),tt===Xa&&(X=!0);else if((Ds&q)===q){j=j.next,q===Xa&&(X=!0);continue}else tt={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(S=D=tt,E=p):D=D.next=tt,Dt.lanes|=q,Ls|=q;tt=j.action,Jr&&l(p,tt),p=j.hasEagerState?j.eagerState:l(p,tt)}else q={lane:tt,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(S=D=q,E=p):D=D.next=q,Dt.lanes|=tt,Ls|=tt;j=j.next}while(j!==null&&j!==r);if(D===null?E=p:D.next=S,!Tn(p,s.memoizedState)&&(Ue=!0,X&&(l=$a,l!==null)))throw l;s.memoizedState=p,s.baseState=E,s.baseQueue=D,c.lastRenderedState=p}return g===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Zd(s){var r=Se(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,g=l.pending,p=r.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do p=s(p,E.action),E=E.next;while(E!==g);Tn(p,r.memoizedState)||(Ue=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),l.lastRenderedState=p}return[p,c]}function ay(s,r,l){var c=Dt,g=Se(),p=qt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=r();var E=!Tn((te||g).memoizedState,l);E&&(g.memoizedState=l,Ue=!0),g=g.queue;var S=uy.bind(null,c,g,s);if(Dl(2048,8,S,[s]),g.getSnapshot!==r||E||Te!==null&&Te.memoizedState.tag&1){if(c.flags|=2048,eo(9,Hc(),ly.bind(null,c,g,l,r),null),re===null)throw Error(i(349));p||(Ds&124)!==0||oy(c,r,l)}return l}function oy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Dt.updateQueue,r===null?(r=Wd(),Dt.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function ly(s,r,l,c){r.value=l,r.getSnapshot=c,cy(r)&&hy(s)}function uy(s,r,l){return l(function(){cy(r)&&hy(s)})}function cy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Tn(s,l)}catch{return!0}}function hy(s){var r=Ka(s,2);r!==null&&Cn(r,s,2)}function Jd(s){var r=fn();if(typeof s=="function"){var l=s;if(s=l(),Jr){bn(!0);try{l()}finally{bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:s},r}function fy(s,r,l,c){return s.baseState=l,$d(s,te,typeof c=="function"?c:$i)}function Gw(s,r,l,c,g){if(Fc(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};F.T!==null?l(!0):p.isTransition=!1,c(p),l=r.pending,l===null?(p.next=r.pending=p,dy(r,p)):(p.next=l.next,r.pending=l.next=p)}}function dy(s,r){var l=r.action,c=r.payload,g=s.state;if(r.isTransition){var p=F.T,E={};F.T=E;try{var S=l(g,c),D=F.S;D!==null&&D(E,S),gy(s,r,S)}catch(j){tg(s,r,j)}finally{F.T=p}}else try{p=l(g,c),gy(s,r,p)}catch(j){tg(s,r,j)}}function gy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){my(s,r,c)},function(c){return tg(s,r,c)}):my(s,r,l)}function my(s,r,l){r.status="fulfilled",r.value=l,py(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,dy(s,l)))}function tg(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,py(r),r=r.next;while(r!==c)}s.action=null}function py(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function _y(s,r){return r}function yy(s,r){if(qt){var l=re.formState;if(l!==null){t:{var c=Dt;if(qt){if(de){e:{for(var g=de,p=_i;g.nodeType!==8;){if(!p){g=null;break e}if(g=Jn(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){de=Jn(g.nextSibling),c=g.data==="F!";break t}}Wr(c)}c=!1}c&&(r=l[0])}}return l=fn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:r},l.queue=c,l=Ly.bind(null,Dt,c),c.dispatch=l,c=Jd(!1),p=rg.bind(null,Dt,!1,c.queue),c=fn(),g={state:r,dispatch:null,action:s,pending:null},c.queue=g,l=Gw.bind(null,Dt,g,p,l),g.dispatch=l,c.memoizedState=s,[r,l,!1]}function vy(s){var r=Se();return by(r,te,s)}function by(s,r,l){if(r=$d(s,r,_y)[0],s=Bc($i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=xl(r)}catch(E){throw E===Sl?Nc:E}else c=r;r=Se();var g=r.queue,p=g.dispatch;return l!==r.memoizedState&&(Dt.flags|=2048,eo(9,Hc(),Kw.bind(null,g,l),null)),[c,p,s]}function Kw(s,r){s.action=r}function Ey(s){var r=Se(),l=te;if(l!==null)return by(r,l,s);Se(),r=r.memoizedState,l=Se();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function eo(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Dt.updateQueue,r===null&&(r=Wd(),Dt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Hc(){return{destroy:void 0,resource:void 0}}function Ty(){return Se().memoizedState}function jc(s,r,l,c){var g=fn();c=c===void 0?null:c,Dt.flags|=s,g.memoizedState=eo(1|r,Hc(),l,c)}function Dl(s,r,l,c){var g=Se();c=c===void 0?null:c;var p=g.memoizedState.inst;te!==null&&c!==null&&qd(c,te.memoizedState.deps)?g.memoizedState=eo(r,p,l,c):(Dt.flags|=s,g.memoizedState=eo(1|r,p,l,c))}function Sy(s,r){jc(8390656,8,s,r)}function Ay(s,r){Dl(2048,8,s,r)}function wy(s,r){return Dl(4,2,s,r)}function Ry(s,r){return Dl(4,4,s,r)}function Iy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Cy(s,r,l){l=l!=null?l.concat([s]):null,Dl(4,4,Iy.bind(null,r,s),l)}function eg(){}function xy(s,r){var l=Se();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&qd(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Dy(s,r){var l=Se();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&qd(r,c[1]))return c[0];if(c=s(),Jr){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[c,r],c}function ng(s,r,l){return l===void 0||(Ds&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=kv(),Dt.lanes|=s,Ls|=s,l)}function Oy(s,r,l,c){return Tn(l,r)?l:Za.current!==null?(s=ng(s,l,c),Tn(s,r)||(Ue=!0),s):(Ds&42)===0?(Ue=!0,s.memoizedState=l):(s=kv(),Dt.lanes|=s,Ls|=s,r)}function My(s,r,l,c,g){var p=it.p;it.p=p!==0&&8>p?p:8;var E=F.T,S={};F.T=S,rg(s,!1,r,l);try{var D=g(),j=F.S;if(j!==null&&j(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=jw(D,c);Ol(s,r,X,In(s))}else Ol(s,r,c,In(s))}catch(tt){Ol(s,r,{then:function(){},status:"rejected",reason:tt},In())}finally{it.p=p,F.T=E}}function Yw(){}function ig(s,r,l,c){if(s.tag!==5)throw Error(i(476));var g=ky(s).queue;My(s,g,r,W,l===null?Yw:function(){return Ny(s),l(c)})}function ky(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:W},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Ny(s){var r=ky(s).next.queue;Ol(s,r,{},In())}function sg(){return tn(Wl)}function Py(){return Se().memoizedState}function Vy(){return Se().memoizedState}function Qw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=In();s=Cs(l);var c=xs(r,s,l);c!==null&&(Cn(c,r,l),wl(c,r,l)),r={cache:Nd()},s.payload=r;return}r=r.return}}function Ww(s,r,l){var c=In();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Fc(s)?Uy(r,l):(l=Ad(s,r,l,c),l!==null&&(Cn(l,s,c),zy(l,r,c)))}function Ly(s,r,l){var c=In();Ol(s,r,l,c)}function Ol(s,r,l,c){var g={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fc(s))Uy(r,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,S=p(E,l);if(g.hasEagerState=!0,g.eagerState=S,Tn(S,E))return Rc(s,r,g,0),re===null&&wc(),!1}catch{}finally{}if(l=Ad(s,r,g,c),l!==null)return Cn(l,s,c),zy(l,r,c),!0}return!1}function rg(s,r,l,c){if(c={lane:2,revertLane:Lg(),action:c,hasEagerState:!1,eagerState:null,next:null},Fc(s)){if(r)throw Error(i(479))}else r=Ad(s,l,c,2),r!==null&&Cn(r,s,2)}function Fc(s){var r=s.alternate;return s===Dt||r!==null&&r===Dt}function Uy(s,r){Ja=Lc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function zy(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Jo(s,l)}}var qc={readContext:tn,use:zc,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe},By={readContext:tn,use:zc,useCallback:function(s,r){return fn().memoizedState=[s,r===void 0?null:r],s},useContext:tn,useEffect:Sy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,jc(4194308,4,Iy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return jc(4194308,4,s,r)},useInsertionEffect:function(s,r){jc(4,2,s,r)},useMemo:function(s,r){var l=fn();r=r===void 0?null:r;var c=s();if(Jr){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=fn();if(l!==void 0){var g=l(r);if(Jr){bn(!0);try{l(r)}finally{bn(!1)}}}else g=r;return c.memoizedState=c.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},c.queue=s,s=s.dispatch=Ww.bind(null,Dt,s),[c.memoizedState,s]},useRef:function(s){var r=fn();return s={current:s},r.memoizedState=s},useState:function(s){s=Jd(s);var r=s.queue,l=Ly.bind(null,Dt,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:eg,useDeferredValue:function(s,r){var l=fn();return ng(l,s,r)},useTransition:function(){var s=Jd(!1);return s=My.bind(null,Dt,s.queue,!0,!1),fn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Dt,g=fn();if(qt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),re===null)throw Error(i(349));(zt&124)!==0||oy(c,r,l)}g.memoizedState=l;var p={value:l,getSnapshot:r};return g.queue=p,Sy(uy.bind(null,c,p,s),[s]),c.flags|=2048,eo(9,Hc(),ly.bind(null,c,p,l,r),null),l},useId:function(){var s=fn(),r=re.identifierPrefix;if(qt){var l=Qi,c=Yi;l=(c&~(1<<32-Je(c)-1)).toString(32)+l,r="«"+r+"R"+l,l=Uc++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=Fw++,r="«"+r+"r"+l.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:sg,useFormState:yy,useActionState:yy,useOptimistic:function(s){var r=fn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=rg.bind(null,Dt,!0,l),l.dispatch=r,[s,r]},useMemoCache:Xd,useCacheRefresh:function(){return fn().memoizedState=Qw.bind(null,Dt)}},Hy={readContext:tn,use:zc,useCallback:xy,useContext:tn,useEffect:Ay,useImperativeHandle:Cy,useInsertionEffect:wy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Bc,useRef:Ty,useState:function(){return Bc($i)},useDebugValue:eg,useDeferredValue:function(s,r){var l=Se();return Oy(l,te.memoizedState,s,r)},useTransition:function(){var s=Bc($i)[0],r=Se().memoizedState;return[typeof s=="boolean"?s:xl(s),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:sg,useFormState:vy,useActionState:vy,useOptimistic:function(s,r){var l=Se();return fy(l,te,s,r)},useMemoCache:Xd,useCacheRefresh:Vy},Xw={readContext:tn,use:zc,useCallback:xy,useContext:tn,useEffect:Ay,useImperativeHandle:Cy,useInsertionEffect:wy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Zd,useRef:Ty,useState:function(){return Zd($i)},useDebugValue:eg,useDeferredValue:function(s,r){var l=Se();return te===null?ng(l,s,r):Oy(l,te.memoizedState,s,r)},useTransition:function(){var s=Zd($i)[0],r=Se().memoizedState;return[typeof s=="boolean"?s:xl(s),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:sg,useFormState:Ey,useActionState:Ey,useOptimistic:function(s,r){var l=Se();return te!==null?fy(l,te,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:Vy},no=null,Ml=0;function Gc(s){var r=Ml;return Ml+=1,no===null&&(no=[]),Z_(no,s,r)}function kl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Kc(s,r){throw r.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function jy(s){var r=s._init;return r(s._payload)}function Fy(s){function r(z,U){if(s){var H=z.deletions;H===null?(z.deletions=[U],z.flags|=16):H.push(U)}}function l(z,U){if(!s)return null;for(;U!==null;)r(z,U),U=U.sibling;return null}function c(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function g(z,U){return z=Ki(z,U),z.index=0,z.sibling=null,z}function p(z,U,H){return z.index=H,s?(H=z.alternate,H!==null?(H=H.index,H<U?(z.flags|=67108866,U):H):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function S(z,U,H,J){return U===null||U.tag!==6?(U=Rd(H,z.mode,J),U.return=z,U):(U=g(U,H),U.return=z,U)}function D(z,U,H,J){var ft=H.type;return ft===x?X(z,U,H.props.children,J,H.key):U!==null&&(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&jy(ft)===U.type)?(U=g(U,H.props),kl(U,H),U.return=z,U):(U=Cc(H.type,H.key,H.props,null,z.mode,J),kl(U,H),U.return=z,U)}function j(z,U,H,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Id(H,z.mode,J),U.return=z,U):(U=g(U,H.children||[]),U.return=z,U)}function X(z,U,H,J,ft){return U===null||U.tag!==7?(U=Gr(H,z.mode,J,ft),U.return=z,U):(U=g(U,H),U.return=z,U)}function tt(z,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Rd(""+U,z.mode,H),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return H=Cc(U.type,U.key,U.props,null,z.mode,H),kl(H,U),H.return=z,H;case w:return U=Id(U,z.mode,H),U.return=z,U;case R:var J=U._init;return U=J(U._payload),tt(z,U,H)}if(yt(U)||L(U))return U=Gr(U,z.mode,H,null),U.return=z,U;if(typeof U.then=="function")return tt(z,Gc(U),H);if(U.$$typeof===Z)return tt(z,Mc(z,U),H);Kc(z,U)}return null}function q(z,U,H,J){var ft=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ft!==null?null:S(z,U,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===ft?D(z,U,H,J):null;case w:return H.key===ft?j(z,U,H,J):null;case R:return ft=H._init,H=ft(H._payload),q(z,U,H,J)}if(yt(H)||L(H))return ft!==null?null:X(z,U,H,J,null);if(typeof H.then=="function")return q(z,U,Gc(H),J);if(H.$$typeof===Z)return q(z,U,Mc(z,H),J);Kc(z,H)}return null}function G(z,U,H,J,ft){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(H)||null,S(U,z,""+J,ft);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return z=z.get(J.key===null?H:J.key)||null,D(U,z,J,ft);case w:return z=z.get(J.key===null?H:J.key)||null,j(U,z,J,ft);case R:var Mt=J._init;return J=Mt(J._payload),G(z,U,H,J,ft)}if(yt(J)||L(J))return z=z.get(H)||null,X(U,z,J,ft,null);if(typeof J.then=="function")return G(z,U,H,Gc(J),ft);if(J.$$typeof===Z)return G(z,U,H,Mc(U,J),ft);Kc(U,J)}return null}function St(z,U,H,J){for(var ft=null,Mt=null,mt=U,Et=U=0,Be=null;mt!==null&&Et<H.length;Et++){mt.index>Et?(Be=mt,mt=null):Be=mt.sibling;var jt=q(z,mt,H[Et],J);if(jt===null){mt===null&&(mt=Be);break}s&&mt&&jt.alternate===null&&r(z,mt),U=p(jt,U,Et),Mt===null?ft=jt:Mt.sibling=jt,Mt=jt,mt=Be}if(Et===H.length)return l(z,mt),qt&&Yr(z,Et),ft;if(mt===null){for(;Et<H.length;Et++)mt=tt(z,H[Et],J),mt!==null&&(U=p(mt,U,Et),Mt===null?ft=mt:Mt.sibling=mt,Mt=mt);return qt&&Yr(z,Et),ft}for(mt=c(mt);Et<H.length;Et++)Be=G(mt,z,Et,H[Et],J),Be!==null&&(s&&Be.alternate!==null&&mt.delete(Be.key===null?Et:Be.key),U=p(Be,U,Et),Mt===null?ft=Be:Mt.sibling=Be,Mt=Be);return s&&mt.forEach(function(Ks){return r(z,Ks)}),qt&&Yr(z,Et),ft}function bt(z,U,H,J){if(H==null)throw Error(i(151));for(var ft=null,Mt=null,mt=U,Et=U=0,Be=null,jt=H.next();mt!==null&&!jt.done;Et++,jt=H.next()){mt.index>Et?(Be=mt,mt=null):Be=mt.sibling;var Ks=q(z,mt,jt.value,J);if(Ks===null){mt===null&&(mt=Be);break}s&&mt&&Ks.alternate===null&&r(z,mt),U=p(Ks,U,Et),Mt===null?ft=Ks:Mt.sibling=Ks,Mt=Ks,mt=Be}if(jt.done)return l(z,mt),qt&&Yr(z,Et),ft;if(mt===null){for(;!jt.done;Et++,jt=H.next())jt=tt(z,jt.value,J),jt!==null&&(U=p(jt,U,Et),Mt===null?ft=jt:Mt.sibling=jt,Mt=jt);return qt&&Yr(z,Et),ft}for(mt=c(mt);!jt.done;Et++,jt=H.next())jt=G(mt,z,Et,jt.value,J),jt!==null&&(s&&jt.alternate!==null&&mt.delete(jt.key===null?Et:jt.key),U=p(jt,U,Et),Mt===null?ft=jt:Mt.sibling=jt,Mt=jt);return s&&mt.forEach(function($R){return r(z,$R)}),qt&&Yr(z,Et),ft}function ne(z,U,H,J){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:t:{for(var ft=H.key;U!==null;){if(U.key===ft){if(ft=H.type,ft===x){if(U.tag===7){l(z,U.sibling),J=g(U,H.props.children),J.return=z,z=J;break t}}else if(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&jy(ft)===U.type){l(z,U.sibling),J=g(U,H.props),kl(J,H),J.return=z,z=J;break t}l(z,U);break}else r(z,U);U=U.sibling}H.type===x?(J=Gr(H.props.children,z.mode,J,H.key),J.return=z,z=J):(J=Cc(H.type,H.key,H.props,null,z.mode,J),kl(J,H),J.return=z,z=J)}return E(z);case w:t:{for(ft=H.key;U!==null;){if(U.key===ft)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){l(z,U.sibling),J=g(U,H.children||[]),J.return=z,z=J;break t}else{l(z,U);break}else r(z,U);U=U.sibling}J=Id(H,z.mode,J),J.return=z,z=J}return E(z);case R:return ft=H._init,H=ft(H._payload),ne(z,U,H,J)}if(yt(H))return St(z,U,H,J);if(L(H)){if(ft=L(H),typeof ft!="function")throw Error(i(150));return H=ft.call(H),bt(z,U,H,J)}if(typeof H.then=="function")return ne(z,U,Gc(H),J);if(H.$$typeof===Z)return ne(z,U,Mc(z,H),J);Kc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(l(z,U.sibling),J=g(U,H),J.return=z,z=J):(l(z,U),J=Rd(H,z.mode,J),J.return=z,z=J),E(z)):l(z,U)}return function(z,U,H,J){try{Ml=0;var ft=ne(z,U,H,J);return no=null,ft}catch(mt){if(mt===Sl||mt===Nc)throw mt;var Mt=Sn(29,mt,null,z.mode);return Mt.lanes=J,Mt.return=z,Mt}finally{}}}var io=Fy(!0),qy=Fy(!1),jn=Q(null),yi=null;function Os(s){var r=s.alternate;ot(De,De.current&1),ot(jn,s),yi===null&&(r===null||Za.current!==null||r.memoizedState!==null)&&(yi=s)}function Gy(s){if(s.tag===22){if(ot(De,De.current),ot(jn,s),yi===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(yi=s)}}else Ms()}function Ms(){ot(De,De.current),ot(jn,jn.current)}function Zi(s){at(jn),yi===s&&(yi=null),at(De)}var De=Q(0);function Yc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Wg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function ag(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:_({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var og={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=In(),g=Cs(c);g.payload=r,l!=null&&(g.callback=l),r=xs(s,g,c),r!==null&&(Cn(r,s,c),wl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=In(),g=Cs(c);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=xs(s,g,c),r!==null&&(Cn(r,s,c),wl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=In(),c=Cs(l);c.tag=2,r!=null&&(c.callback=r),r=xs(s,c,l),r!==null&&(Cn(r,s,l),wl(r,s,l))}};function Ky(s,r,l,c,g,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,p,E):r.prototype&&r.prototype.isPureReactComponent?!ml(l,c)||!ml(g,p):!0}function Yy(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&og.enqueueReplaceState(r,r.state,null)}function ta(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=_({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var Qc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Qy(s){Qc(s)}function Wy(s){console.error(s)}function Xy(s){Qc(s)}function Wc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function $y(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function lg(s,r,l){return l=Cs(l),l.tag=3,l.payload={element:null},l.callback=function(){Wc(s,r)},l}function Zy(s){return s=Cs(s),s.tag=3,s}function Jy(s,r,l,c){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=c.value;s.payload=function(){return g(p)},s.callback=function(){$y(r,l,c)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){$y(r,l,c),typeof g!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function $w(s,r,l,c,g){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&bl(r,l,g,!0),l=jn.current,l!==null){switch(l.tag){case 13:return yi===null?Mg():l.alternate===null&&ge===0&&(ge=3),l.flags&=-257,l.flags|=65536,l.lanes=g,c===Ld?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Ng(s,c,g)),!1;case 22:return l.flags|=65536,c===Ld?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Ng(s,c,g)),!1}throw Error(i(435,l.tag))}return Ng(s,c,g),Mg(),!1}if(qt)return r=jn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,c!==Dd&&(s=Error(i(422),{cause:c}),vl(Un(s,l)))):(c!==Dd&&(r=Error(i(423),{cause:c}),vl(Un(r,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,c=Un(c,l),g=lg(s.stateNode,c,g),Bd(s,g),ge!==4&&(ge=2)),!1;var p=Error(i(520),{cause:c});if(p=Un(p,l),Bl===null?Bl=[p]:Bl.push(p),ge!==4&&(ge=2),r===null)return!0;c=Un(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=lg(l.stateNode,c,s),Bd(l,s),!1;case 1:if(r=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Us===null||!Us.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Zy(g),Jy(g,s,l,c),Bd(l,g),!1}l=l.return}while(l!==null);return!1}var tv=Error(i(461)),Ue=!1;function Ge(s,r,l,c){r.child=s===null?qy(r,null,l,c):io(r,s.child,l,c)}function ev(s,r,l,c,g){l=l.render;var p=r.ref;if("ref"in c){var E={};for(var S in c)S!=="ref"&&(E[S]=c[S])}else E=c;return $r(r),c=Gd(s,r,l,E,p,g),S=Kd(),s!==null&&!Ue?(Yd(s,r,g),Ji(s,r,g)):(qt&&S&&Cd(r),r.flags|=1,Ge(s,r,c,g),r.child)}function nv(s,r,l,c,g){if(s===null){var p=l.type;return typeof p=="function"&&!wd(p)&&p.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=p,iv(s,r,p,c,g)):(s=Cc(l.type,null,c,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!pg(s,g)){var E=p.memoizedProps;if(l=l.compare,l=l!==null?l:ml,l(E,c)&&s.ref===r.ref)return Ji(s,r,g)}return r.flags|=1,s=Ki(p,c),s.ref=r.ref,s.return=r,r.child=s}function iv(s,r,l,c,g){if(s!==null){var p=s.memoizedProps;if(ml(p,c)&&s.ref===r.ref)if(Ue=!1,r.pendingProps=c=p,pg(s,g))(s.flags&131072)!==0&&(Ue=!0);else return r.lanes=s.lanes,Ji(s,r,g)}return ug(s,r,l,c,g)}function sv(s,r,l){var c=r.pendingProps,g=c.children,p=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=p!==null?p.baseLanes|l:l,s!==null){for(g=r.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;r.childLanes=p&~c}else r.childLanes=0,r.child=null;return rv(s,r,c,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&kc(r,p!==null?p.cachePool:null),p!==null?iy(r,p):jd(),Gy(r);else return r.lanes=r.childLanes=536870912,rv(s,r,p!==null?p.baseLanes|l:l,l)}else p!==null?(kc(r,p.cachePool),iy(r,p),Ms(),r.memoizedState=null):(s!==null&&kc(r,null),jd(),Ms());return Ge(s,r,g,l),r.child}function rv(s,r,l,c){var g=Vd();return g=g===null?null:{parent:xe._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},s!==null&&kc(r,null),jd(),Gy(r),s!==null&&bl(s,r,c,!0),null}function Xc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function ug(s,r,l,c,g){return $r(r),l=Gd(s,r,l,c,void 0,g),c=Kd(),s!==null&&!Ue?(Yd(s,r,g),Ji(s,r,g)):(qt&&c&&Cd(r),r.flags|=1,Ge(s,r,l,g),r.child)}function av(s,r,l,c,g,p){return $r(r),r.updateQueue=null,l=ry(r,c,l,g),sy(s),c=Kd(),s!==null&&!Ue?(Yd(s,r,p),Ji(s,r,p)):(qt&&c&&Cd(r),r.flags|=1,Ge(s,r,l,p),r.child)}function ov(s,r,l,c,g){if($r(r),r.stateNode===null){var p=Ya,E=l.contextType;typeof E=="object"&&E!==null&&(p=tn(E)),p=new l(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=og,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},Ud(r),E=l.contextType,p.context=typeof E=="object"&&E!==null?tn(E):Ya,p.state=r.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(ag(r,l,E,c),p.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&og.enqueueReplaceState(p,p.state,null),Il(r,c,p,g),Rl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){p=r.stateNode;var S=r.memoizedProps,D=ta(l,S);p.props=D;var j=p.context,X=l.contextType;E=Ya,typeof X=="object"&&X!==null&&(E=tn(X));var tt=l.getDerivedStateFromProps;X=typeof tt=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||j!==E)&&Yy(r,p,c,E),Is=!1;var q=r.memoizedState;p.state=q,Il(r,c,p,g),Rl(),j=r.memoizedState,S||q!==j||Is?(typeof tt=="function"&&(ag(r,l,tt,c),j=r.memoizedState),(D=Is||Ky(r,l,D,c,q,j,E))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=j),p.props=c,p.state=j,p.context=E,c=D):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,zd(s,r),E=r.memoizedProps,X=ta(l,E),p.props=X,tt=r.pendingProps,q=p.context,j=l.contextType,D=Ya,typeof j=="object"&&j!==null&&(D=tn(j)),S=l.getDerivedStateFromProps,(j=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==tt||q!==D)&&Yy(r,p,c,D),Is=!1,q=r.memoizedState,p.state=q,Il(r,c,p,g),Rl();var G=r.memoizedState;E!==tt||q!==G||Is||s!==null&&s.dependencies!==null&&Oc(s.dependencies)?(typeof S=="function"&&(ag(r,l,S,c),G=r.memoizedState),(X=Is||Ky(r,l,X,c,q,G,D)||s!==null&&s.dependencies!==null&&Oc(s.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,G,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,G,D)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=G),p.props=c,p.state=G,p.context=D,c=X):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),c=!1)}return p=c,Xc(s,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&c?(r.child=io(r,s.child,null,g),r.child=io(r,null,l,g)):Ge(s,r,l,g),r.memoizedState=p.state,s=r.child):s=Ji(s,r,g),s}function lv(s,r,l,c){return yl(),r.flags|=256,Ge(s,r,l,c),r.child}var cg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hg(s){return{baseLanes:s,cachePool:W_()}}function fg(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Fn),s}function uv(s,r,l){var c=r.pendingProps,g=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(De.current&2)!==0),E&&(g=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(qt){if(g?Os(r):Ms(),qt){var S=de,D;if(D=S){t:{for(D=S,S=_i;D.nodeType!==8;){if(!S){S=null;break t}if(D=Jn(D.nextSibling),D===null){S=null;break t}}S=D}S!==null?(r.memoizedState={dehydrated:S,treeContext:Kr!==null?{id:Yi,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},D=Sn(18,null,null,0),D.stateNode=S,D.return=r,r.child=D,hn=r,de=null,D=!0):D=!1}D||Wr(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Wg(S)?r.lanes=32:r.lanes=536870912,null;Zi(r)}return S=c.children,c=c.fallback,g?(Ms(),g=r.mode,S=$c({mode:"hidden",children:S},g),c=Gr(c,g,l,null),S.return=r,c.return=r,S.sibling=c,r.child=S,g=r.child,g.memoizedState=hg(l),g.childLanes=fg(s,E,l),r.memoizedState=cg,c):(Os(r),dg(r,S))}if(D=s.memoizedState,D!==null&&(S=D.dehydrated,S!==null)){if(p)r.flags&256?(Os(r),r.flags&=-257,r=gg(s,r,l)):r.memoizedState!==null?(Ms(),r.child=s.child,r.flags|=128,r=null):(Ms(),g=c.fallback,S=r.mode,c=$c({mode:"visible",children:c.children},S),g=Gr(g,S,l,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,io(r,s.child,null,l),c=r.child,c.memoizedState=hg(l),c.childLanes=fg(s,E,l),r.memoizedState=cg,r=g);else if(Os(r),Wg(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var j=E.dgst;E=j,c=Error(i(419)),c.stack="",c.digest=E,vl({value:c,source:null,stack:null}),r=gg(s,r,l)}else if(Ue||bl(s,r,l,!1),E=(l&s.childLanes)!==0,Ue||E){if(E=re,E!==null&&(c=l&-l,c=(c&42)!==0?1:vs(c),c=(c&(E.suspendedLanes|l))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Ka(s,c),Cn(E,s,c),tv;S.data==="$?"||Mg(),r=gg(s,r,l)}else S.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=D.treeContext,de=Jn(S.nextSibling),hn=r,qt=!0,Qr=null,_i=!1,s!==null&&(Bn[Hn++]=Yi,Bn[Hn++]=Qi,Bn[Hn++]=Kr,Yi=s.id,Qi=s.overflow,Kr=r),r=dg(r,c.children),r.flags|=4096);return r}return g?(Ms(),g=c.fallback,S=r.mode,D=s.child,j=D.sibling,c=Ki(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,j!==null?g=Ki(j,g):(g=Gr(g,S,l,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,S=s.child.memoizedState,S===null?S=hg(l):(D=S.cachePool,D!==null?(j=xe._currentValue,D=D.parent!==j?{parent:j,pool:j}:D):D=W_(),S={baseLanes:S.baseLanes|l,cachePool:D}),g.memoizedState=S,g.childLanes=fg(s,E,l),r.memoizedState=cg,c):(Os(r),l=s.child,s=l.sibling,l=Ki(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=l,r.memoizedState=null,l)}function dg(s,r){return r=$c({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function $c(s,r){return s=Sn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function gg(s,r,l){return io(r,s.child,null,l),s=dg(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function cv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Md(s.return,r,l)}function mg(s,r,l,c,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:g}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=l,p.tailMode=g)}function hv(s,r,l){var c=r.pendingProps,g=c.revealOrder,p=c.tail;if(Ge(s,r,c.children,l),c=De.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cv(s,l,r);else if(s.tag===19)cv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(ot(De,c),g){case"forwards":for(l=r.child,g=null;l!==null;)s=l.alternate,s!==null&&Yc(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),mg(r,!1,g,l,p);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&Yc(s)===null){r.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}mg(r,!0,l,null,p);break;case"together":mg(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ji(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Ls|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(bl(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Ki(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Ki(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function pg(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Oc(s)))}function Zw(s,r,l){switch(r.tag){case 3:se(r,r.stateNode.containerInfo),Rs(r,xe,s.memoizedState.cache),yl();break;case 27:case 5:ys(r);break;case 4:se(r,r.stateNode.containerInfo);break;case 10:Rs(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Os(r),r.flags|=128,null):(l&r.child.childLanes)!==0?uv(s,r,l):(Os(r),s=Ji(s,r,l),s!==null?s.sibling:null);Os(r);break;case 19:var g=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(bl(s,r,l,!1),c=(l&r.childLanes)!==0),g){if(c)return hv(s,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(De,De.current),c)break;return null;case 22:case 23:return r.lanes=0,sv(s,r,l);case 24:Rs(r,xe,s.memoizedState.cache)}return Ji(s,r,l)}function fv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ue=!0;else{if(!pg(s,l)&&(r.flags&128)===0)return Ue=!1,Zw(s,r,l);Ue=(s.flags&131072)!==0}else Ue=!1,qt&&(r.flags&1048576)!==0&&j_(r,Dc,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var c=r.elementType,g=c._init;if(c=g(c._payload),r.type=c,typeof c=="function")wd(c)?(s=ta(c,s),r.tag=1,r=ov(null,r,c,s,l)):(r.tag=0,r=ug(null,r,c,s,l));else{if(c!=null){if(g=c.$$typeof,g===rt){r.tag=11,r=ev(null,r,c,s,l);break t}else if(g===N){r.tag=14,r=nv(null,r,c,s,l);break t}}throw r=Ht(c)||c,Error(i(306,r,""))}}return r;case 0:return ug(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,g=ta(c,r.pendingProps),ov(s,r,c,g,l);case 3:t:{if(se(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var p=r.memoizedState;g=p.element,zd(s,r),Il(r,c,null,l);var E=r.memoizedState;if(c=E.cache,Rs(r,xe,c),c!==p.cache&&kd(r,[xe],l,!0),Rl(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=lv(s,r,c,l);break t}else if(c!==g){g=Un(Error(i(424)),r),vl(g),r=lv(s,r,c,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(de=Jn(s.firstChild),hn=r,qt=!0,Qr=null,_i=!0,l=qy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yl(),c===g){r=Ji(s,r,l);break t}Ge(s,r,c,l)}r=r.child}return r;case 26:return Xc(s,r),s===null?(l=p0(r.type,null,r.pendingProps,null))?r.memoizedState=l:qt||(l=r.type,s=r.pendingProps,c=hh(_t.current).createElement(l),c[Re]=r,c[be]=s,Ye(c,l,s),me(c),r.stateNode=c):r.memoizedState=p0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return ys(r),s===null&&qt&&(c=r.stateNode=d0(r.type,r.pendingProps,_t.current),hn=r,_i=!0,g=de,Hs(r.type)?(Xg=g,de=Jn(c.firstChild)):de=g),Ge(s,r,r.pendingProps.children,l),Xc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&qt&&((g=c=de)&&(c=RR(c,r.type,r.pendingProps,_i),c!==null?(r.stateNode=c,hn=r,de=Jn(c.firstChild),_i=!1,g=!0):g=!1),g||Wr(r)),ys(r),g=r.type,p=r.pendingProps,E=s!==null?s.memoizedProps:null,c=p.children,Kg(g,p)?c=null:E!==null&&Kg(g,E)&&(r.flags|=32),r.memoizedState!==null&&(g=Gd(s,r,qw,null,null,l),Wl._currentValue=g),Xc(s,r),Ge(s,r,c,l),r.child;case 6:return s===null&&qt&&((s=l=de)&&(l=IR(l,r.pendingProps,_i),l!==null?(r.stateNode=l,hn=r,de=null,s=!0):s=!1),s||Wr(r)),null;case 13:return uv(s,r,l);case 4:return se(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=io(r,null,c,l):Ge(s,r,c,l),r.child;case 11:return ev(s,r,r.type,r.pendingProps,l);case 7:return Ge(s,r,r.pendingProps,l),r.child;case 8:return Ge(s,r,r.pendingProps.children,l),r.child;case 12:return Ge(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Rs(r,r.type,c.value),Ge(s,r,c.children,l),r.child;case 9:return g=r.type._context,c=r.pendingProps.children,$r(r),g=tn(g),c=c(g),r.flags|=1,Ge(s,r,c,l),r.child;case 14:return nv(s,r,r.type,r.pendingProps,l);case 15:return iv(s,r,r.type,r.pendingProps,l);case 19:return hv(s,r,l);case 31:return c=r.pendingProps,l=r.mode,c={mode:c.mode,children:c.children},s===null?(l=$c(c,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Ki(s.child,c),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return sv(s,r,l);case 24:return $r(r),c=tn(xe),s===null?(g=Vd(),g===null&&(g=re,p=Nd(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),r.memoizedState={parent:c,cache:g},Ud(r),Rs(r,xe,g)):((s.lanes&l)!==0&&(zd(s,r),Il(r,null,null,l),Rl()),g=s.memoizedState,p=r.memoizedState,g.parent!==c?(g={parent:c,cache:c},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Rs(r,xe,c)):(c=p.cache,Rs(r,xe,c),c!==g.cache&&kd(r,[xe],l,!0))),Ge(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ts(s){s.flags|=4}function dv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!E0(r)){if(r=jn.current,r!==null&&((zt&4194048)===zt?yi!==null:(zt&62914560)!==zt&&(zt&536870912)===0||r!==yi))throw Al=Ld,X_;s.flags|=8192}}function Zc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?$o():536870912,s.lanes|=r,oo|=r)}function Nl(s,r){if(!qt)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ce(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Jw(s,r,l){var c=r.pendingProps;switch(xd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(r),null;case 1:return ce(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Xi(xe),ri(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(_l(r)?ts(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,G_())),ce(r),null;case 26:return l=r.memoizedState,s===null?(ts(r),l!==null?(ce(r),dv(r,l)):(ce(r),r.flags&=-16777217)):l?l!==s.memoizedState?(ts(r),ce(r),dv(r,l)):(ce(r),r.flags&=-16777217):(s.memoizedProps!==c&&ts(r),ce(r),r.flags&=-16777217),null;case 27:ki(r),l=_t.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ts(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ce(r),null}s=dt.current,_l(r)?F_(r):(s=d0(g,c,l),r.stateNode=s,ts(r))}return ce(r),null;case 5:if(ki(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ts(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ce(r),null}if(s=dt.current,_l(r))F_(r);else{switch(g=hh(_t.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?g.createElement(l,{is:c.is}):g.createElement(l)}}s[Re]=r,s[be]=c;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(Ye(s,l,c),l){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&ts(r)}}return ce(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ts(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=_t.current,_l(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,g=hn,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}s[Re]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||a0(s.nodeValue,l)),s||Wr(r)}else s=hh(s).createTextNode(c),s[Re]=r,r.stateNode=s}return ce(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=_l(r),c!==null&&c.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Re]=r}else yl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ce(r),g=!1}else g=G_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Zi(r),r):(Zi(r),null)}if(Zi(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=c!==null,s=s!==null&&s.memoizedState!==null,l){c=r.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==g&&(c.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),Zc(r,r.updateQueue),ce(r),null;case 4:return ri(),s===null&&Hg(r.stateNode.containerInfo),ce(r),null;case 10:return Xi(r.type),ce(r),null;case 19:if(at(De),g=r.memoizedState,g===null)return ce(r),null;if(c=(r.flags&128)!==0,p=g.rendering,p===null)if(c)Nl(g,!1);else{if(ge!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=Yc(s),p!==null){for(r.flags|=128,Nl(g,!1),s=p.updateQueue,r.updateQueue=s,Zc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)H_(l,s),l=l.sibling;return ot(De,De.current&1|2),r.child}s=s.sibling}g.tail!==null&&Mn()>eh&&(r.flags|=128,c=!0,Nl(g,!1),r.lanes=4194304)}else{if(!c)if(s=Yc(p),s!==null){if(r.flags|=128,c=!0,s=s.updateQueue,r.updateQueue=s,Zc(r,s),Nl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!qt)return ce(r),null}else 2*Mn()-g.renderingStartTime>eh&&l!==536870912&&(r.flags|=128,c=!0,Nl(g,!1),r.lanes=4194304);g.isBackwards?(p.sibling=r.child,r.child=p):(s=g.last,s!==null?s.sibling=p:r.child=p,g.last=p)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Mn(),r.sibling=null,s=De.current,ot(De,c?s&1|2:s&1),r):(ce(r),null);case 22:case 23:return Zi(r),Fd(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ce(r),r.subtreeFlags&6&&(r.flags|=8192)):ce(r),l=r.updateQueue,l!==null&&Zc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&at(Zr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Xi(xe),ce(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function tR(s,r){switch(xd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Xi(xe),ri(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ki(r),null;case 13:if(Zi(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));yl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return at(De),null;case 4:return ri(),null;case 10:return Xi(r.type),null;case 22:case 23:return Zi(r),Fd(),s!==null&&at(Zr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Xi(xe),null;case 25:return null;default:return null}}function gv(s,r){switch(xd(r),r.tag){case 3:Xi(xe),ri();break;case 26:case 27:case 5:ki(r);break;case 4:ri();break;case 13:Zi(r);break;case 19:at(De);break;case 10:Xi(r.type);break;case 22:case 23:Zi(r),Fd(),s!==null&&at(Zr);break;case 24:Xi(xe)}}function Pl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var g=c.next;l=g;do{if((l.tag&s)===s){c=void 0;var p=l.create,E=l.inst;c=p(),E.destroy=c}l=l.next}while(l!==g)}}catch(S){ie(r,r.return,S)}}function ks(s,r,l){try{var c=r.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var p=g.next;c=p;do{if((c.tag&s)===s){var E=c.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,g=r;var D=l,j=S;try{j()}catch(X){ie(g,D,X)}}}c=c.next}while(c!==p)}}catch(X){ie(r,r.return,X)}}function mv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{ny(r,l)}catch(c){ie(s,s.return,c)}}}function pv(s,r,l){l.props=ta(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){ie(s,r,c)}}function Vl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(g){ie(s,r,g)}}function vi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(g){ie(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ie(s,r,g)}else l.current=null}function _v(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break t;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(g){ie(s,s.return,g)}}function _g(s,r,l){try{var c=s.stateNode;ER(c,s.type,l,r),c[be]=r}catch(g){ie(s,s.return,g)}}function yv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Hs(s.type)||s.tag===4}function yg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||yv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Hs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vg(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ch));else if(c!==4&&(c===27&&Hs(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(vg(s,r,l),s=s.sibling;s!==null;)vg(s,r,l),s=s.sibling}function Jc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Hs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Jc(s,r,l),s=s.sibling;s!==null;)Jc(s,r,l),s=s.sibling}function vv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Ye(r,c,l),r[Re]=s,r[be]=l}catch(p){ie(s,s.return,p)}}var es=!1,_e=!1,bg=!1,bv=typeof WeakSet=="function"?WeakSet:Set,ze=null;function eR(s,r){if(s=s.containerInfo,qg=_h,s=O_(s),yd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var g=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var E=0,S=-1,D=-1,j=0,X=0,tt=s,q=null;e:for(;;){for(var G;tt!==l||g!==0&&tt.nodeType!==3||(S=E+g),tt!==p||c!==0&&tt.nodeType!==3||(D=E+c),tt.nodeType===3&&(E+=tt.nodeValue.length),(G=tt.firstChild)!==null;)q=tt,tt=G;for(;;){if(tt===s)break e;if(q===l&&++j===g&&(S=E),q===p&&++X===c&&(D=E),(G=tt.nextSibling)!==null)break;tt=q,q=tt.parentNode}tt=G}l=S===-1||D===-1?null:{start:S,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gg={focusedElem:s,selectionRange:l},_h=!1,ze=r;ze!==null;)if(r=ze,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,ze=s;else for(;ze!==null;){switch(r=ze,p=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=r,g=p.memoizedProps,p=p.memoizedState,c=l.stateNode;try{var St=ta(l.type,g,l.elementType===l.type);s=c.getSnapshotBeforeUpdate(St,p),c.__reactInternalSnapshotBeforeUpdate=s}catch(bt){ie(l,l.return,bt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Qg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Qg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,ze=s;break}ze=r.return}}function Ev(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Ns(s,l),c&4&&Pl(5,l);break;case 1:if(Ns(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(E){ie(l,l.return,E)}else{var g=ta(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ie(l,l.return,E)}}c&64&&mv(l),c&512&&Vl(l,l.return);break;case 3:if(Ns(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{ny(s,r)}catch(E){ie(l,l.return,E)}}break;case 27:r===null&&c&4&&vv(l);case 26:case 5:Ns(s,l),r===null&&c&4&&_v(l),c&512&&Vl(l,l.return);break;case 12:Ns(s,l);break;case 13:Ns(s,l),c&4&&Av(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=cR.bind(null,l),CR(s,l))));break;case 22:if(c=l.memoizedState!==null||es,!c){r=r!==null&&r.memoizedState!==null||_e,g=es;var p=_e;es=c,(_e=r)&&!p?Ps(s,l,(l.subtreeFlags&8772)!==0):Ns(s,l),es=g,_e=p}break;case 30:break;default:Ns(s,l)}}function Tv(s){var r=s.alternate;r!==null&&(s.alternate=null,Tv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ts(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var le=null,dn=!1;function ns(s,r,l){for(l=l.child;l!==null;)Sv(s,r,l),l=l.sibling}function Sv(s,r,l){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(fe,l)}catch{}switch(l.tag){case 26:_e||vi(l,r),ns(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_e||vi(l,r);var c=le,g=dn;Hs(l.type)&&(le=l.stateNode,dn=!1),ns(s,r,l),Gl(l.stateNode),le=c,dn=g;break;case 5:_e||vi(l,r);case 6:if(c=le,g=dn,le=null,ns(s,r,l),le=c,dn=g,le!==null)if(dn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(l.stateNode)}catch(p){ie(l,r,p)}else try{le.removeChild(l.stateNode)}catch(p){ie(l,r,p)}break;case 18:le!==null&&(dn?(s=le,h0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Jl(s)):h0(le,l.stateNode));break;case 4:c=le,g=dn,le=l.stateNode.containerInfo,dn=!0,ns(s,r,l),le=c,dn=g;break;case 0:case 11:case 14:case 15:_e||ks(2,l,r),_e||ks(4,l,r),ns(s,r,l);break;case 1:_e||(vi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&pv(l,r,c)),ns(s,r,l);break;case 21:ns(s,r,l);break;case 22:_e=(c=_e)||l.memoizedState!==null,ns(s,r,l),_e=c;break;default:ns(s,r,l)}}function Av(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jl(s)}catch(l){ie(r,r.return,l)}}function nR(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new bv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new bv),r;default:throw Error(i(435,s.tag))}}function Eg(s,r){var l=nR(s);r.forEach(function(c){var g=hR.bind(null,s,c);l.has(c)||(l.add(c),c.then(g,g))})}function An(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var g=l[c],p=s,E=r,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(Hs(S.type)){le=S.stateNode,dn=!1;break t}break;case 5:le=S.stateNode,dn=!1;break t;case 3:case 4:le=S.stateNode.containerInfo,dn=!0;break t}S=S.return}if(le===null)throw Error(i(160));Sv(p,E,g),le=null,dn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)wv(r,s),r=r.sibling}var Zn=null;function wv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(r,s),wn(s),c&4&&(ks(3,s,s.return),Pl(3,s),ks(5,s,s.return));break;case 1:An(r,s),wn(s),c&512&&(_e||l===null||vi(l,l.return)),c&64&&es&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var g=Zn;if(An(r,s),wn(s),c&512&&(_e||l===null||vi(l,l.return)),c&4){var p=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){t:{c=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":p=g.getElementsByTagName("title")[0],(!p||p[xr]||p[Re]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(c),g.head.insertBefore(p,g.querySelector("head > title"))),Ye(p,c,l),p[Re]=s,me(p),c=p;break t;case"link":var E=v0("link","href",g).get(c+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(p=E[S],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break e}}p=g.createElement(c),Ye(p,c,l),g.head.appendChild(p);break;case"meta":if(E=v0("meta","content",g).get(c+(l.content||""))){for(S=0;S<E.length;S++)if(p=E[S],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break e}}p=g.createElement(c),Ye(p,c,l),g.head.appendChild(p);break;default:throw Error(i(468,c))}p[Re]=s,me(p),c=p}s.stateNode=c}else b0(g,s.type,s.stateNode);else s.stateNode=y0(g,c,s.memoizedProps);else p!==c?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,c===null?b0(g,s.type,s.stateNode):y0(g,c,s.memoizedProps)):c===null&&s.stateNode!==null&&_g(s,s.memoizedProps,l.memoizedProps)}break;case 27:An(r,s),wn(s),c&512&&(_e||l===null||vi(l,l.return)),l!==null&&c&4&&_g(s,s.memoizedProps,l.memoizedProps);break;case 5:if(An(r,s),wn(s),c&512&&(_e||l===null||vi(l,l.return)),s.flags&32){g=s.stateNode;try{Nn(g,"")}catch(G){ie(s,s.return,G)}}c&4&&s.stateNode!=null&&(g=s.memoizedProps,_g(s,g,l!==null?l.memoizedProps:g)),c&1024&&(bg=!0);break;case 6:if(An(r,s),wn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(G){ie(s,s.return,G)}}break;case 3:if(gh=null,g=Zn,Zn=fh(r.containerInfo),An(r,s),Zn=g,wn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Jl(r.containerInfo)}catch(G){ie(s,s.return,G)}bg&&(bg=!1,Rv(s));break;case 4:c=Zn,Zn=fh(s.stateNode.containerInfo),An(r,s),wn(s),Zn=c;break;case 12:An(r,s),wn(s);break;case 13:An(r,s),wn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ig=Mn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Eg(s,c)));break;case 22:g=s.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,j=es,X=_e;if(es=j||g,_e=X||D,An(r,s),_e=X,es=j,wn(s),c&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||D||es||_e||ea(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){D=l=r;try{if(p=D.stateNode,g)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=D.stateNode;var tt=D.memoizedProps.style,q=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(G){ie(D,D.return,G)}}}else if(r.tag===6){if(l===null){D=r;try{D.stateNode.nodeValue=g?"":D.memoizedProps}catch(G){ie(D,D.return,G)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Eg(s,l))));break;case 19:An(r,s),wn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Eg(s,c)));break;case 30:break;case 21:break;default:An(r,s),wn(s)}}function wn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(yv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,p=yg(s);Jc(s,p,g);break;case 5:var E=l.stateNode;l.flags&32&&(Nn(E,""),l.flags&=-33);var S=yg(s);Jc(s,S,E);break;case 3:case 4:var D=l.stateNode.containerInfo,j=yg(s);vg(s,j,D);break;default:throw Error(i(161))}}catch(X){ie(s,s.return,X)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Rv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Rv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ns(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ev(s,r.alternate,r),r=r.sibling}function ea(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ks(4,r,r.return),ea(r);break;case 1:vi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&pv(r,r.return,l),ea(r);break;case 27:Gl(r.stateNode);case 26:case 5:vi(r,r.return),ea(r);break;case 22:r.memoizedState===null&&ea(r);break;case 30:ea(r);break;default:ea(r)}s=s.sibling}}function Ps(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,g=s,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:Ps(g,p,l),Pl(4,p);break;case 1:if(Ps(g,p,l),c=p,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(j){ie(c,c.return,j)}if(c=p,g=c.updateQueue,g!==null){var S=c.stateNode;try{var D=g.shared.hiddenCallbacks;if(D!==null)for(g.shared.hiddenCallbacks=null,g=0;g<D.length;g++)ey(D[g],S)}catch(j){ie(c,c.return,j)}}l&&E&64&&mv(p),Vl(p,p.return);break;case 27:vv(p);case 26:case 5:Ps(g,p,l),l&&c===null&&E&4&&_v(p),Vl(p,p.return);break;case 12:Ps(g,p,l);break;case 13:Ps(g,p,l),l&&E&4&&Av(g,p);break;case 22:p.memoizedState===null&&Ps(g,p,l),Vl(p,p.return);break;case 30:break;default:Ps(g,p,l)}r=r.sibling}}function Tg(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&El(l))}function Sg(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&El(s))}function bi(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Iv(s,r,l,c),r=r.sibling}function Iv(s,r,l,c){var g=r.flags;switch(r.tag){case 0:case 11:case 15:bi(s,r,l,c),g&2048&&Pl(9,r);break;case 1:bi(s,r,l,c);break;case 3:bi(s,r,l,c),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&El(s)));break;case 12:if(g&2048){bi(s,r,l,c),s=r.stateNode;try{var p=r.memoizedProps,E=p.id,S=p.onPostCommit;typeof S=="function"&&S(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){ie(r,r.return,D)}}else bi(s,r,l,c);break;case 13:bi(s,r,l,c);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?bi(s,r,l,c):Ll(s,r):p._visibility&2?bi(s,r,l,c):(p._visibility|=2,so(s,r,l,c,(r.subtreeFlags&10256)!==0)),g&2048&&Tg(E,r);break;case 24:bi(s,r,l,c),g&2048&&Sg(r.alternate,r);break;default:bi(s,r,l,c)}}function so(s,r,l,c,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=s,E=r,S=l,D=c,j=E.flags;switch(E.tag){case 0:case 11:case 15:so(p,E,S,D,g),Pl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?so(p,E,S,D,g):Ll(p,E):(X._visibility|=2,so(p,E,S,D,g)),g&&j&2048&&Tg(E.alternate,E);break;case 24:so(p,E,S,D,g),g&&j&2048&&Sg(E.alternate,E);break;default:so(p,E,S,D,g)}r=r.sibling}}function Ll(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,g=c.flags;switch(c.tag){case 22:Ll(l,c),g&2048&&Tg(c.alternate,c);break;case 24:Ll(l,c),g&2048&&Sg(c.alternate,c);break;default:Ll(l,c)}r=r.sibling}}var Ul=8192;function ro(s){if(s.subtreeFlags&Ul)for(s=s.child;s!==null;)Cv(s),s=s.sibling}function Cv(s){switch(s.tag){case 26:ro(s),s.flags&Ul&&s.memoizedState!==null&&HR(Zn,s.memoizedState,s.memoizedProps);break;case 5:ro(s);break;case 3:case 4:var r=Zn;Zn=fh(s.stateNode.containerInfo),ro(s),Zn=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Ul,Ul=16777216,ro(s),Ul=r):ro(s));break;default:ro(s)}}function xv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function zl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];ze=c,Ov(c,s)}xv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dv(s),s=s.sibling}function Dv(s){switch(s.tag){case 0:case 11:case 15:zl(s),s.flags&2048&&ks(9,s,s.return);break;case 3:zl(s);break;case 12:zl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,th(s)):zl(s);break;default:zl(s)}}function th(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];ze=c,Ov(c,s)}xv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ks(8,r,r.return),th(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,th(r));break;default:th(r)}s=s.sibling}}function Ov(s,r){for(;ze!==null;){var l=ze;switch(l.tag){case 0:case 11:case 15:ks(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:El(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,ze=c;else t:for(l=s;ze!==null;){c=ze;var g=c.sibling,p=c.return;if(Tv(c),c===l){ze=null;break t}if(g!==null){g.return=p,ze=g;break t}ze=p}}}var iR={getCacheForType:function(s){var r=tn(xe),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},sR=typeof WeakMap=="function"?WeakMap:Map,Wt=0,re=null,kt=null,zt=0,Xt=0,Rn=null,Vs=!1,ao=!1,Ag=!1,is=0,ge=0,Ls=0,na=0,wg=0,Fn=0,oo=0,Bl=null,gn=null,Rg=!1,Ig=0,eh=1/0,nh=null,Us=null,Ke=0,zs=null,lo=null,uo=0,Cg=0,xg=null,Mv=null,Hl=0,Dg=null;function In(){if((Wt&2)!==0&&zt!==0)return zt&-zt;if(F.T!==null){var s=Xa;return s!==0?s:Lg()}return bs()}function kv(){Fn===0&&(Fn=(zt&536870912)===0||qt?Xo():536870912);var s=jn.current;return s!==null&&(s.flags|=32),Fn}function Cn(s,r,l){(s===re&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(co(s,0),Bs(s,zt,Fn,!1)),Pi(s,l),((Wt&2)===0||s!==re)&&(s===re&&((Wt&2)===0&&(na|=l),ge===4&&Bs(s,zt,Fn,!1)),Ei(s))}function Nv(s,r,l){if((Wt&6)!==0)throw Error(i(327));var c=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Cr(s,r),g=c?oR(s,r):kg(s,r,!0),p=c;do{if(g===0){ao&&!c&&Bs(s,r,0,!1);break}else{if(l=s.current.alternate,p&&!rR(l)){g=kg(s,r,!1),p=!1;continue}if(g===2){if(p=r,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var S=s;g=Bl;var D=S.current.memoizedState.isDehydrated;if(D&&(co(S,E).flags|=256),E=kg(S,E,!1),E!==2){if(Ag&&!D){S.errorRecoveryDisabledLanes|=p,na|=p,g=4;break t}p=gn,gn=g,p!==null&&(gn===null?gn=p:gn.push.apply(gn,p))}g=E}if(p=!1,g!==2)continue}}if(g===1){co(s,0),Bs(s,r,0,!0);break}t:{switch(c=s,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Bs(c,r,Fn,!Vs);break t;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=Ig+300-Mn(),10<g)){if(Bs(c,r,Fn,!Vs),Ia(c,0,!0)!==0)break t;c.timeoutHandle=u0(Pv.bind(null,c,l,gn,nh,Rg,r,Fn,na,oo,Vs,p,2,-0,0),g);break t}Pv(c,l,gn,nh,Rg,r,Fn,na,oo,Vs,p,0,-0,0)}}break}while(!0);Ei(s)}function Pv(s,r,l,c,g,p,E,S,D,j,X,tt,q,G){if(s.timeoutHandle=-1,tt=r.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:BR},Cv(r),tt=jR(),tt!==null)){s.cancelPendingCommit=tt(jv.bind(null,s,r,p,l,c,g,E,S,D,X,1,q,G)),Bs(s,p,E,!j);return}jv(s,r,p,l,c,g,E,S,D)}function rR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var g=l[c],p=g.getSnapshot;g=g.value;try{if(!Tn(p(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bs(s,r,l,c){r&=~wg,r&=~na,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var g=r;0<g;){var p=31-Je(g),E=1<<p;c[p]=-1,g&=~E}l!==0&&ai(s,l,r)}function ih(){return(Wt&6)===0?(jl(0),!1):!0}function Og(){if(kt!==null){if(Xt===0)var s=kt.return;else s=kt,Wi=Xr=null,Qd(s),no=null,Ml=0,s=kt;for(;s!==null;)gv(s.alternate,s),s=s.return;kt=null}}function co(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,SR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Og(),re=s,kt=l=Ki(s.current,null),zt=r,Xt=0,Rn=null,Vs=!1,ao=Cr(s,r),Ag=!1,oo=Fn=wg=na=Ls=ge=0,gn=Bl=null,Rg=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var g=31-Je(c),p=1<<g;r|=s[g],c&=~p}return is=r,wc(),l}function Vv(s,r){Dt=null,F.H=qc,r===Sl||r===Nc?(r=J_(),Xt=3):r===X_?(r=J_(),Xt=4):Xt=r===tv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,kt===null&&(ge=1,Wc(s,Un(r,s.current)))}function Lv(){var s=F.H;return F.H=qc,s===null?qc:s}function Uv(){var s=F.A;return F.A=iR,s}function Mg(){ge=4,Vs||(zt&4194048)!==zt&&jn.current!==null||(ao=!0),(Ls&134217727)===0&&(na&134217727)===0||re===null||Bs(re,zt,Fn,!1)}function kg(s,r,l){var c=Wt;Wt|=2;var g=Lv(),p=Uv();(re!==s||zt!==r)&&(nh=null,co(s,r)),r=!1;var E=ge;t:do try{if(Xt!==0&&kt!==null){var S=kt,D=Rn;switch(Xt){case 8:Og(),E=6;break t;case 3:case 2:case 9:case 6:jn.current===null&&(r=!0);var j=Xt;if(Xt=0,Rn=null,ho(s,S,D,j),l&&ao){E=0;break t}break;default:j=Xt,Xt=0,Rn=null,ho(s,S,D,j)}}aR(),E=ge;break}catch(X){Vv(s,X)}while(!0);return r&&s.shellSuspendCounter++,Wi=Xr=null,Wt=c,F.H=g,F.A=p,kt===null&&(re=null,zt=0,wc()),E}function aR(){for(;kt!==null;)zv(kt)}function oR(s,r){var l=Wt;Wt|=2;var c=Lv(),g=Uv();re!==s||zt!==r?(nh=null,eh=Mn()+500,co(s,r)):ao=Cr(s,r);t:do try{if(Xt!==0&&kt!==null){r=kt;var p=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,ho(s,r,p,1);break;case 2:case 9:if($_(p)){Xt=0,Rn=null,Bv(r);break}r=function(){Xt!==2&&Xt!==9||re!==s||(Xt=7),Ei(s)},p.then(r,r);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:$_(p)?(Xt=0,Rn=null,Bv(r)):(Xt=0,Rn=null,ho(s,r,p,7));break;case 5:var E=null;switch(kt.tag){case 26:E=kt.memoizedState;case 5:case 27:var S=kt;if(!E||E0(E)){Xt=0,Rn=null;var D=S.sibling;if(D!==null)kt=D;else{var j=S.return;j!==null?(kt=j,sh(j)):kt=null}break e}}Xt=0,Rn=null,ho(s,r,p,5);break;case 6:Xt=0,Rn=null,ho(s,r,p,6);break;case 8:Og(),ge=6;break t;default:throw Error(i(462))}}lR();break}catch(X){Vv(s,X)}while(!0);return Wi=Xr=null,F.H=c,F.A=g,Wt=l,kt!==null?0:(re=null,zt=0,wc(),ge)}function lR(){for(;kt!==null&&!Ko();)zv(kt)}function zv(s){var r=fv(s.alternate,s,is);s.memoizedProps=s.pendingProps,r===null?sh(s):kt=r}function Bv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=av(l,r,r.pendingProps,r.type,void 0,zt);break;case 11:r=av(l,r,r.pendingProps,r.type.render,r.ref,zt);break;case 5:Qd(r);default:gv(l,r),r=kt=H_(r,is),r=fv(l,r,is)}s.memoizedProps=s.pendingProps,r===null?sh(s):kt=r}function ho(s,r,l,c){Wi=Xr=null,Qd(r),no=null,Ml=0;var g=r.return;try{if($w(s,g,r,l,zt)){ge=1,Wc(s,Un(l,s.current)),kt=null;return}}catch(p){if(g!==null)throw kt=g,p;ge=1,Wc(s,Un(l,s.current)),kt=null;return}r.flags&32768?(qt||c===1?s=!0:ao||(zt&536870912)!==0?s=!1:(Vs=s=!0,(c===2||c===9||c===3||c===6)&&(c=jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Hv(r,s)):sh(r)}function sh(s){var r=s;do{if((r.flags&32768)!==0){Hv(r,Vs);return}s=r.return;var l=Jw(r.alternate,r,is);if(l!==null){kt=l;return}if(r=r.sibling,r!==null){kt=r;return}kt=r=s}while(r!==null);ge===0&&(ge=5)}function Hv(s,r){do{var l=tR(s.alternate,s);if(l!==null){l.flags&=32767,kt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){kt=s;return}kt=s=l}while(s!==null);ge=6,kt=null}function jv(s,r,l,c,g,p,E,S,D){s.cancelPendingCommit=null;do rh();while(Ke!==0);if((Wt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Sd,Zo(s,l,p,E,S,D),s===re&&(kt=re=null,zt=0),lo=r,zs=s,uo=l,Cg=p,xg=g,Mv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,fR(Ar,function(){return Yv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,g=it.p,it.p=2,E=Wt,Wt|=4;try{eR(s,r,l)}finally{Wt=E,it.p=g,F.T=c}}Ke=1,Fv(),qv(),Gv()}}function Fv(){if(Ke===1){Ke=0;var s=zs,r=lo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var c=it.p;it.p=2;var g=Wt;Wt|=4;try{wv(r,s);var p=Gg,E=O_(s.containerInfo),S=p.focusedElem,D=p.selectionRange;if(E!==S&&S&&S.ownerDocument&&D_(S.ownerDocument.documentElement,S)){if(D!==null&&yd(S)){var j=D.start,X=D.end;if(X===void 0&&(X=j),"selectionStart"in S)S.selectionStart=j,S.selectionEnd=Math.min(X,S.value.length);else{var tt=S.ownerDocument||document,q=tt&&tt.defaultView||window;if(q.getSelection){var G=q.getSelection(),St=S.textContent.length,bt=Math.min(D.start,St),ne=D.end===void 0?bt:Math.min(D.end,St);!G.extend&&bt>ne&&(E=ne,ne=bt,bt=E);var z=x_(S,bt),U=x_(S,ne);if(z&&U&&(G.rangeCount!==1||G.anchorNode!==z.node||G.anchorOffset!==z.offset||G.focusNode!==U.node||G.focusOffset!==U.offset)){var H=tt.createRange();H.setStart(z.node,z.offset),G.removeAllRanges(),bt>ne?(G.addRange(H),G.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),G.addRange(H))}}}}for(tt=[],G=S;G=G.parentNode;)G.nodeType===1&&tt.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<tt.length;S++){var J=tt[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}_h=!!qg,Gg=qg=null}finally{Wt=g,it.p=c,F.T=l}}s.current=r,Ke=2}}function qv(){if(Ke===2){Ke=0;var s=zs,r=lo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var c=it.p;it.p=2;var g=Wt;Wt|=4;try{Ev(s,r.alternate,r)}finally{Wt=g,it.p=c,F.T=l}}Ke=3}}function Gv(){if(Ke===4||Ke===3){Ke=0,tc();var s=zs,r=lo,l=uo,c=Mv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ke=5:(Ke=0,lo=zs=null,Kv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Us=null),Ca(l),r=r.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(fe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=F.T,g=it.p,it.p=2,F.T=null;try{for(var p=s.onRecoverableError,E=0;E<c.length;E++){var S=c[E];p(S.value,{componentStack:S.stack})}}finally{F.T=r,it.p=g}}(uo&3)!==0&&rh(),Ei(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Dg?Hl++:(Hl=0,Dg=s):Hl=0,jl(0)}}function Kv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,El(r)))}function rh(s){return Fv(),qv(),Gv(),Yv()}function Yv(){if(Ke!==5)return!1;var s=zs,r=Cg;Cg=0;var l=Ca(uo),c=F.T,g=it.p;try{it.p=32>l?32:l,F.T=null,l=xg,xg=null;var p=zs,E=uo;if(Ke=0,lo=zs=null,uo=0,(Wt&6)!==0)throw Error(i(331));var S=Wt;if(Wt|=4,Dv(p.current),Iv(p,p.current,E,l),Wt=S,jl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(fe,p)}catch{}return!0}finally{it.p=g,F.T=c,Kv(s,r)}}function Qv(s,r,l){r=Un(l,r),r=lg(s.stateNode,r,2),s=xs(s,r,2),s!==null&&(Pi(s,2),Ei(s))}function ie(s,r,l){if(s.tag===3)Qv(s,s,l);else for(;r!==null;){if(r.tag===3){Qv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Us===null||!Us.has(c))){s=Un(l,s),l=Zy(2),c=xs(r,l,2),c!==null&&(Jy(l,c,r,s),Pi(c,2),Ei(c));break}}r=r.return}}function Ng(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new sR;var g=new Set;c.set(r,g)}else g=c.get(r),g===void 0&&(g=new Set,c.set(r,g));g.has(l)||(Ag=!0,g.add(l),s=uR.bind(null,s,r,l),r.then(s,s))}function uR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,re===s&&(zt&l)===l&&(ge===4||ge===3&&(zt&62914560)===zt&&300>Mn()-Ig?(Wt&2)===0&&co(s,0):wg|=l,oo===zt&&(oo=0)),Ei(s)}function Wv(s,r){r===0&&(r=$o()),s=Ka(s,r),s!==null&&(Pi(s,r),Ei(s))}function cR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Wv(s,l)}function hR(s,r){var l=0;switch(s.tag){case 13:var c=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Wv(s,l)}function fR(s,r){return Tr(s,r)}var ah=null,fo=null,Pg=!1,oh=!1,Vg=!1,ia=0;function Ei(s){s!==fo&&s.next===null&&(fo===null?ah=fo=s:fo=fo.next=s),oh=!0,Pg||(Pg=!0,gR())}function jl(s,r){if(!Vg&&oh){Vg=!0;do for(var l=!1,c=ah;c!==null;){if(s!==0){var g=c.pendingLanes;if(g===0)var p=0;else{var E=c.suspendedLanes,S=c.pingedLanes;p=(1<<31-Je(42|s)+1)-1,p&=g&~(E&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,Jv(c,p))}else p=zt,p=Ia(c,c===re?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Cr(c,p)||(l=!0,Jv(c,p));c=c.next}while(l);Vg=!1}}function dR(){Xv()}function Xv(){oh=Pg=!1;var s=0;ia!==0&&(TR()&&(s=ia),ia=0);for(var r=Mn(),l=null,c=ah;c!==null;){var g=c.next,p=$v(c,r);p===0?(c.next=null,l===null?ah=g:l.next=g,g===null&&(fo=l)):(l=c,(s!==0||(p&3)!==0)&&(oh=!0)),c=g}jl(s)}function $v(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-Je(p),S=1<<E,D=g[E];D===-1?((S&l)===0||(S&c)!==0)&&(g[E]=Wo(S,r)):D<=r&&(s.expiredLanes|=S),p&=~S}if(r=re,l=zt,l=Ia(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Sr(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Cr(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Sr(c),Ca(l)){case 2:case 8:l=wa;break;case 32:l=Ar;break;case 268435456:l=Ra;break;default:l=Ar}return c=Zv.bind(null,s),l=Tr(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Sr(c),s.callbackPriority=2,s.callbackNode=null,2}function Zv(s,r){if(Ke!==0&&Ke!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(rh()&&s.callbackNode!==l)return null;var c=zt;return c=Ia(s,s===re?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Nv(s,c,r),$v(s,Mn()),s.callbackNode!=null&&s.callbackNode===l?Zv.bind(null,s):null)}function Jv(s,r){if(rh())return null;Nv(s,r,!0)}function gR(){AR(function(){(Wt&6)!==0?Tr(Yo,dR):Xv()})}function Lg(){return ia===0&&(ia=Xo()),ia}function t0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Na(""+s)}function e0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function mR(s,r,l,c,g){if(r==="submit"&&l&&l.stateNode===g){var p=t0((g[be]||null).action),E=c.submitter;E&&(r=(r=E[be]||null)?t0(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var S=new Pa("action","action",null,c,g);s.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ia!==0){var D=E?e0(g,E):new FormData(g);ig(l,{pending:!0,data:D,method:g.method,action:p},null,D)}}else typeof p=="function"&&(S.preventDefault(),D=E?e0(g,E):new FormData(g),ig(l,{pending:!0,data:D,method:g.method,action:p},p,D))},currentTarget:g}]})}}for(var Ug=0;Ug<Td.length;Ug++){var zg=Td[Ug],pR=zg.toLowerCase(),_R=zg[0].toUpperCase()+zg.slice(1);$n(pR,"on"+_R)}$n(N_,"onAnimationEnd"),$n(P_,"onAnimationIteration"),$n(V_,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(Nw,"onTransitionRun"),$n(Pw,"onTransitionStart"),$n(Vw,"onTransitionCancel"),$n(L_,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function n0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],g=c.event;c=c.listeners;t:{var p=void 0;if(r)for(var E=c.length-1;0<=E;E--){var S=c[E],D=S.instance,j=S.currentTarget;if(S=S.listener,D!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=j;try{p(g)}catch(X){Qc(X)}g.currentTarget=null,p=D}else for(E=0;E<c.length;E++){if(S=c[E],D=S.instance,j=S.currentTarget,S=S.listener,D!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=j;try{p(g)}catch(X){Qc(X)}g.currentTarget=null,p=D}}}}function Nt(s,r){var l=r[tl];l===void 0&&(l=r[tl]=new Set);var c=s+"__bubble";l.has(c)||(i0(r,s,2,!1),l.add(c))}function Bg(s,r,l){var c=0;r&&(c|=4),i0(l,s,c,r)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Hg(s){if(!s[lh]){s[lh]=!0,el.forEach(function(l){l!=="selectionchange"&&(yR.has(l)||Bg(l,!1,s),Bg(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[lh]||(r[lh]=!0,Bg("selectionchange",!1,r))}}function i0(s,r,l,c){switch(I0(r)){case 2:var g=GR;break;case 8:g=KR;break;default:g=em}l=g.bind(null,r,l,s),g=void 0,!Vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),c?g!==void 0?s.addEventListener(r,l,{capture:!0,passive:g}):s.addEventListener(r,l,!0):g!==void 0?s.addEventListener(r,l,{passive:g}):s.addEventListener(r,l,!1)}function jg(s,r,l,c,g){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)t:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var S=c.stateNode.containerInfo;if(S===g)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;S!==null;){if(E=Vi(S),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){c=p=E;continue t}S=S.parentNode}}c=c.return}cc(function(){var j=p,X=Pn(l),tt=[];t:{var q=U_.get(s);if(q!==void 0){var G=Pa,St=s;switch(s){case"keypress":if(fi(l)===0)break t;case"keydown":case"keyup":G=Ha;break;case"focusin":St="focus",G=Ua;break;case"focusout":St="blur",G=Ua;break;case"beforeblur":case"afterblur":G=Ua;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=gd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=yc;break;case N_:case P_:case V_:G=za;break;case L_:G=bc;break;case"scroll":case"scrollend":G=hc;break;case"wheel":G=ja;break;case"copy":case"cut":case"paste":G=Ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=dl;break;case"toggle":case"beforetoggle":G=Tc}var bt=(r&4)!==0,ne=!bt&&(s==="scroll"||s==="scrollend"),z=bt?q!==null?q+"Capture":null:q;bt=[];for(var U=j,H;U!==null;){var J=U;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||z===null||(J=Vr(U,z),J!=null&&bt.push(ql(U,J,H))),ne)break;U=U.return}0<bt.length&&(q=new G(q,St,null,l,X),tt.push({event:q,listeners:bt}))}}if((r&7)===0){t:{if(q=s==="mouseover"||s==="pointerover",G=s==="mouseout"||s==="pointerout",q&&l!==Bi&&(St=l.relatedTarget||l.fromElement)&&(Vi(St)||St[kn]))break t;if((G||q)&&(q=X.window===X?X:(q=X.ownerDocument)?q.defaultView||q.parentWindow:window,G?(St=l.relatedTarget||l.toElement,G=j,St=St?Vi(St):null,St!==null&&(ne=o(St),bt=St.tag,St!==ne||bt!==5&&bt!==27&&bt!==6)&&(St=null)):(G=null,St=j),G!==St)){if(bt=Ln,J="onMouseLeave",z="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(bt=dl,J="onPointerLeave",z="onPointerEnter",U="pointer"),ne=G==null?q:li(G),H=St==null?q:li(St),q=new bt(J,U+"leave",G,l,X),q.target=ne,q.relatedTarget=H,J=null,Vi(X)===j&&(bt=new bt(z,U+"enter",St,l,X),bt.target=H,bt.relatedTarget=ne,J=bt),ne=J,G&&St)e:{for(bt=G,z=St,U=0,H=bt;H;H=go(H))U++;for(H=0,J=z;J;J=go(J))H++;for(;0<U-H;)bt=go(bt),U--;for(;0<H-U;)z=go(z),H--;for(;U--;){if(bt===z||z!==null&&bt===z.alternate)break e;bt=go(bt),z=go(z)}bt=null}else bt=null;G!==null&&s0(tt,q,G,bt,!1),St!==null&&ne!==null&&s0(tt,ne,St,bt,!0)}}t:{if(q=j?li(j):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var ft=S_;else if(Ce(q))if(A_)ft=Ow;else{ft=xw;var Mt=Cw}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&al(j.elementType)&&(ft=S_):ft=Dw;if(ft&&(ft=ft(s,j))){Gi(tt,ft,l,X);break t}Mt&&Mt(s,q,j),s==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&As(q,"number",q.value)}switch(Mt=j?li(j):window,s){case"focusin":(Ce(Mt)||Mt.contentEditable==="true")&&(Fa=Mt,vd=j,pl=null);break;case"focusout":pl=vd=Fa=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,M_(tt,l,X);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":M_(tt,l,X)}var mt;if(mi)t:{switch(s){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else Lt?Y(s,l)&&(Et="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Et="onCompositionStart");Et&&(b&&l.locale!=="ko"&&(Lt||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Lt&&(mt=ll()):(hi=X,ws="value"in hi?hi.value:hi.textContent,Lt=!0)),Mt=uh(j,Et),0<Mt.length&&(Et=new hl(Et,s,null,l,X),tt.push({event:Et,listeners:Mt}),mt?Et.data=mt:(mt=ut(l),mt!==null&&(Et.data=mt)))),(mt=y?Ie(s,l):Ut(s,l))&&(Et=uh(j,"onBeforeInput"),0<Et.length&&(Mt=new hl("onBeforeInput","beforeinput",null,l,X),tt.push({event:Mt,listeners:Et}),Mt.data=mt)),mR(tt,s,j,l,X)}n0(tt,r)})}function ql(s,r,l){return{instance:s,listener:r,currentTarget:l}}function uh(s,r){for(var l=r+"Capture",c=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=Vr(s,l),g!=null&&c.unshift(ql(s,g,p)),g=Vr(s,r),g!=null&&c.push(ql(s,g,p))),s.tag===3)return c;s=s.return}return[]}function go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function s0(s,r,l,c,g){for(var p=r._reactName,E=[];l!==null&&l!==c;){var S=l,D=S.alternate,j=S.stateNode;if(S=S.tag,D!==null&&D===c)break;S!==5&&S!==26&&S!==27||j===null||(D=j,g?(j=Vr(l,p),j!=null&&E.unshift(ql(l,j,D))):g||(j=Vr(l,p),j!=null&&E.push(ql(l,j,D)))),l=l.return}E.length!==0&&s.push({event:r,listeners:E})}var vR=/\r\n?/g,bR=/\u0000|\uFFFD/g;function r0(s){return(typeof s=="string"?s:""+s).replace(vR,`
`).replace(bR,"")}function a0(s,r){return r=r0(r),r0(s)===r}function ch(){}function ee(s,r,l,c,g,p){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Nn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Nn(s,""+c);break;case"className":ui(s,"class",c);break;case"tabIndex":ui(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ui(s,l,c);break;case"style":rl(s,c,p);break;case"data":if(r!=="object"){ui(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Na(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(r!=="input"&&ee(s,r,"name",g.name,g,null),ee(s,r,"formEncType",g.formEncType,g,null),ee(s,r,"formMethod",g.formMethod,g,null),ee(s,r,"formTarget",g.formTarget,g,null)):(ee(s,r,"encType",g.encType,g,null),ee(s,r,"method",g.method,g,null),ee(s,r,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Na(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ch);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Na(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Nt("beforetoggle",s),Nt("toggle",s),Ss(s,"popover",c);break;case"xlinkActuate":Fe(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fe(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fe(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fe(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fe(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fe(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fe(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ss(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fd.get(l)||l,Ss(s,l,c))}}function Fg(s,r,l,c,g,p){switch(l){case"style":rl(s,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Nn(s,c):(typeof c=="number"||typeof c=="bigint")&&Nn(s,""+c);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ch);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),p=s[be]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(r,p,g),typeof c=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,g);break t}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Ss(s,l,c)}}}function Ye(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",s),Nt("load",s);var c=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var E=l[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ee(s,r,p,E,l,null)}}g&&ee(s,r,"srcSet",l.srcSet,l,null),c&&ee(s,r,"src",l.src,l,null);return;case"input":Nt("invalid",s);var S=p=E=g=null,D=null,j=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":g=X;break;case"type":E=X;break;case"checked":D=X;break;case"defaultChecked":j=X;break;case"value":p=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:ee(s,r,c,X,l,null)}}kr(s,p,S,D,j,E,g,!1),ka(s);return;case"select":Nt("invalid",s),c=E=p=null;for(g in l)if(l.hasOwnProperty(g)&&(S=l[g],S!=null))switch(g){case"value":p=S;break;case"defaultValue":E=S;break;case"multiple":c=S;default:ee(s,r,g,S,l,null)}r=p,l=E,s.multiple=!!c,r!=null?zi(s,!!c,r,!1):l!=null&&zi(s,!!c,l,!0);return;case"textarea":Nt("invalid",s),p=g=c=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":c=S;break;case"defaultValue":g=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ee(s,r,E,S,l,null)}Nr(s,c,g,p),ka(s);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(c=l[D],c!=null))switch(D){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ee(s,r,D,c,l,null)}return;case"dialog":Nt("beforetoggle",s),Nt("toggle",s),Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":Nt("load",s);break;case"video":case"audio":for(c=0;c<Fl.length;c++)Nt(Fl[c],s);break;case"image":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"embed":case"source":case"link":Nt("error",s),Nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(c=l[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ee(s,r,j,c,l,null)}return;default:if(al(r)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&Fg(s,r,X,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&ee(s,r,S,c,l,null))}function ER(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,E=null,S=null,D=null,j=null,X=null;for(G in l){var tt=l[G];if(l.hasOwnProperty(G)&&tt!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=tt;default:c.hasOwnProperty(G)||ee(s,r,G,null,c,tt)}}for(var q in c){var G=c[q];if(tt=l[q],c.hasOwnProperty(q)&&(G!=null||tt!=null))switch(q){case"type":p=G;break;case"name":g=G;break;case"checked":j=G;break;case"defaultChecked":X=G;break;case"value":E=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:G!==tt&&ee(s,r,q,G,c,tt)}}En(s,E,S,D,j,X,p,g);return;case"select":G=E=S=q=null;for(p in l)if(D=l[p],l.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":G=D;default:c.hasOwnProperty(p)||ee(s,r,p,null,c,D)}for(g in c)if(p=c[g],D=l[g],c.hasOwnProperty(g)&&(p!=null||D!=null))switch(g){case"value":q=p;break;case"defaultValue":S=p;break;case"multiple":E=p;default:p!==D&&ee(s,r,g,p,c,D)}r=S,l=E,c=G,q!=null?zi(s,!!l,q,!1):!!c!=!!l&&(r!=null?zi(s,!!l,r,!0):zi(s,!!l,l?[]:"",!1));return;case"textarea":G=q=null;for(S in l)if(g=l[S],l.hasOwnProperty(S)&&g!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ee(s,r,S,null,c,g)}for(E in c)if(g=c[E],p=l[E],c.hasOwnProperty(E)&&(g!=null||p!=null))switch(E){case"value":q=g;break;case"defaultValue":G=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&ee(s,r,E,g,c,p)}Jt(s,q,G);return;case"option":for(var St in l)if(q=l[St],l.hasOwnProperty(St)&&q!=null&&!c.hasOwnProperty(St))switch(St){case"selected":s.selected=!1;break;default:ee(s,r,St,null,c,q)}for(D in c)if(q=c[D],G=l[D],c.hasOwnProperty(D)&&q!==G&&(q!=null||G!=null))switch(D){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ee(s,r,D,q,c,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in l)q=l[bt],l.hasOwnProperty(bt)&&q!=null&&!c.hasOwnProperty(bt)&&ee(s,r,bt,null,c,q);for(j in c)if(q=c[j],G=l[j],c.hasOwnProperty(j)&&q!==G&&(q!=null||G!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:ee(s,r,j,q,c,G)}return;default:if(al(r)){for(var ne in l)q=l[ne],l.hasOwnProperty(ne)&&q!==void 0&&!c.hasOwnProperty(ne)&&Fg(s,r,ne,void 0,c,q);for(X in c)q=c[X],G=l[X],!c.hasOwnProperty(X)||q===G||q===void 0&&G===void 0||Fg(s,r,X,q,c,G);return}}for(var z in l)q=l[z],l.hasOwnProperty(z)&&q!=null&&!c.hasOwnProperty(z)&&ee(s,r,z,null,c,q);for(tt in c)q=c[tt],G=l[tt],!c.hasOwnProperty(tt)||q===G||q==null&&G==null||ee(s,r,tt,q,c,G)}var qg=null,Gg=null;function hh(s){return s.nodeType===9?s:s.ownerDocument}function o0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Kg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Yg=null;function TR(){var s=window.event;return s&&s.type==="popstate"?s===Yg?!1:(Yg=s,!0):(Yg=null,!1)}var u0=typeof setTimeout=="function"?setTimeout:void 0,SR=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,AR=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(s){return c0.resolve(null).then(s).catch(wR)}:u0;function wR(s){setTimeout(function(){throw s})}function Hs(s){return s==="head"}function h0(s,r){var l=r,c=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<c&&8>c){l=c;var E=s.ownerDocument;if(l&1&&Gl(E.documentElement),l&2&&Gl(E.body),l&4)for(l=E.head,Gl(l),E=l.firstChild;E;){var S=E.nextSibling,D=E.nodeName;E[xr]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=S}}if(g===0){s.removeChild(p),Jl(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:c=l.charCodeAt(0)-48;else c=0;l=p}while(l);Jl(r)}function Qg(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Qg(l),Ts(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function RR(s,r,l,c){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[xr])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function IR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function Wg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function CR(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Xg=null;function f0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function d0(s,r,l){switch(r=hh(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Gl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ts(s)}var qn=new Map,g0=new Set;function fh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ss=it.d;it.d={f:xR,r:DR,D:OR,C:MR,L:kR,m:NR,X:VR,S:PR,M:LR};function xR(){var s=ss.f(),r=ih();return s||r}function DR(s){var r=oi(s);r!==null&&r.tag===5&&r.type==="form"?Ny(r):ss.r(s)}var mo=typeof document>"u"?null:document;function m0(s,r,l){var c=mo;if(c&&typeof r=="string"&&r){var g=Ee(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),g0.has(g)||(g0.add(g),s={rel:s,crossOrigin:l,href:r},c.querySelector(g)===null&&(r=c.createElement("link"),Ye(r,"link",s),me(r),c.head.appendChild(r)))}}function OR(s){ss.D(s),m0("dns-prefetch",s,null)}function MR(s,r){ss.C(s,r),m0("preconnect",s,r)}function kR(s,r,l){ss.L(s,r,l);var c=mo;if(c&&s&&r){var g='link[rel="preload"][as="'+Ee(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ee(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ee(l.imageSizes)+'"]')):g+='[href="'+Ee(s)+'"]';var p=g;switch(r){case"style":p=po(s);break;case"script":p=_o(s)}qn.has(p)||(s=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),qn.set(p,s),c.querySelector(g)!==null||r==="style"&&c.querySelector(Kl(p))||r==="script"&&c.querySelector(Yl(p))||(r=c.createElement("link"),Ye(r,"link",s),me(r),c.head.appendChild(r)))}}function NR(s,r){ss.m(s,r);var l=mo;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Ee(c)+'"][href="'+Ee(s)+'"]',p=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=_o(s)}if(!qn.has(p)&&(s=_({rel:"modulepreload",href:s},r),qn.set(p,s),l.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yl(p)))return}c=l.createElement("link"),Ye(c,"link",s),me(c),l.head.appendChild(c)}}}function PR(s,r,l){ss.S(s,r,l);var c=mo;if(c&&s){var g=ln(c).hoistableStyles,p=po(s);r=r||"default";var E=g.get(p);if(!E){var S={loading:0,preload:null};if(E=c.querySelector(Kl(p)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":r},l),(l=qn.get(p))&&$g(s,l);var D=E=c.createElement("link");me(D),Ye(D,"link",s),D._p=new Promise(function(j,X){D.onload=j,D.onerror=X}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,dh(E,r,c)}E={type:"stylesheet",instance:E,count:1,state:S},g.set(p,E)}}}function VR(s,r){ss.X(s,r);var l=mo;if(l&&s){var c=ln(l).hoistableScripts,g=_o(s),p=c.get(g);p||(p=l.querySelector(Yl(g)),p||(s=_({src:s,async:!0},r),(r=qn.get(g))&&Zg(s,r),p=l.createElement("script"),me(p),Ye(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(g,p))}}function LR(s,r){ss.M(s,r);var l=mo;if(l&&s){var c=ln(l).hoistableScripts,g=_o(s),p=c.get(g);p||(p=l.querySelector(Yl(g)),p||(s=_({src:s,async:!0,type:"module"},r),(r=qn.get(g))&&Zg(s,r),p=l.createElement("script"),me(p),Ye(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(g,p))}}function p0(s,r,l,c){var g=(g=_t.current)?fh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=po(l.href),l=ln(g).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=po(l.href);var p=ln(g).hoistableStyles,E=p.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=g.querySelector(Kl(s)))&&!p._p&&(E.instance=p,E.state.loading=5),qn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},qn.set(s,l),p||UR(g,s,l,E.state))),r&&c===null)throw Error(i(528,""));return E}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_o(l),l=ln(g).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function po(s){return'href="'+Ee(s)+'"'}function Kl(s){return'link[rel="stylesheet"]['+s+"]"}function _0(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function UR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ye(r,"link",l),me(r),s.head.appendChild(r))}function _o(s){return'[src="'+Ee(s)+'"]'}function Yl(s){return"script[async]"+s}function y0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Ee(l.href)+'"]');if(c)return r.instance=c,me(c),c;var g=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),me(c),Ye(c,"style",g),dh(c,l.precedence,s),r.instance=c;case"stylesheet":g=po(l.href);var p=s.querySelector(Kl(g));if(p)return r.state.loading|=4,r.instance=p,me(p),p;c=_0(l),(g=qn.get(g))&&$g(c,g),p=(s.ownerDocument||s).createElement("link"),me(p);var E=p;return E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),Ye(p,"link",c),r.state.loading|=4,dh(p,l.precedence,s),r.instance=p;case"script":return p=_o(l.src),(g=s.querySelector(Yl(p)))?(r.instance=g,me(g),g):(c=l,(g=qn.get(p))&&(c=_({},l),Zg(c,g)),s=s.ownerDocument||s,g=s.createElement("script"),me(g),Ye(g,"link",c),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,dh(c,l.precedence,s));return r.instance}function dh(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,p=g,E=0;E<c.length;E++){var S=c[E];if(S.dataset.precedence===r)p=S;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function $g(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Zg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var gh=null;function v0(s,r,l){if(gh===null){var c=new Map,g=gh=new Map;g.set(l,c)}else g=gh,c=g.get(l),c||(c=new Map,g.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[xr]||p[Re]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=s+E;var S=c.get(E);S?S.push(p):c.set(E,[p])}}return c}function b0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function zR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function E0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ql=null;function BR(){}function HR(s,r,l){if(Ql===null)throw Error(i(475));var c=Ql;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=po(l.href),p=s.querySelector(Kl(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=mh.bind(c),s.then(c,c)),r.state.loading|=4,r.instance=p,me(p);return}p=s.ownerDocument||s,l=_0(l),(g=qn.get(g))&&$g(l,g),p=p.createElement("link"),me(p);var E=p;E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),Ye(p,"link",l),r.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=mh.bind(c),s.addEventListener("load",r),s.addEventListener("error",r))}}function jR(){if(Ql===null)throw Error(i(475));var s=Ql;return s.stylesheets&&s.count===0&&Jg(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&Jg(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function mh(){if(this.count--,this.count===0){if(this.stylesheets)Jg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ph=null;function Jg(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ph=new Map,r.forEach(FR,s),ph=null,mh.call(s))}function FR(s,r){if(!(r.state.loading&4)){var l=ph.get(s);if(l)var c=l.get(null);else{l=new Map,ph.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var E=g[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),c=E)}c&&l.set(null,c)}g=r.instance,E=g.getAttribute("data-precedence"),p=l.get(E)||c,p===c&&l.set(null,g),l.set(E,g),this.count++,c=mh.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var Wl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function qR(s,r,l,c,g,p,E,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function T0(s,r,l,c,g,p,E,S,D,j,X,tt){return s=new qR(s,r,l,E,S,D,j,tt),r=1,p===!0&&(r|=24),p=Sn(3,null,null,r),s.current=p,p.stateNode=s,r=Nd(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:l,cache:r},Ud(p),s}function S0(s){return s?(s=Ya,s):Ya}function A0(s,r,l,c,g,p){g=S0(g),c.context===null?c.context=g:c.pendingContext=g,c=Cs(r),c.payload={element:l},p=p===void 0?null:p,p!==null&&(c.callback=p),l=xs(s,c,r),l!==null&&(Cn(l,s,r),wl(l,s,r))}function w0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function tm(s,r){w0(s,r),(s=s.alternate)&&w0(s,r)}function R0(s){if(s.tag===13){var r=Ka(s,67108864);r!==null&&Cn(r,s,67108864),tm(s,67108864)}}var _h=!0;function GR(s,r,l,c){var g=F.T;F.T=null;var p=it.p;try{it.p=2,em(s,r,l,c)}finally{it.p=p,F.T=g}}function KR(s,r,l,c){var g=F.T;F.T=null;var p=it.p;try{it.p=8,em(s,r,l,c)}finally{it.p=p,F.T=g}}function em(s,r,l,c){if(_h){var g=nm(c);if(g===null)jg(s,r,c,yh,l),C0(s,c);else if(QR(g,s,r,l,c))c.stopPropagation();else if(C0(s,c),r&4&&-1<YR.indexOf(s)){for(;g!==null;){var p=oi(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Qn(p.pendingLanes);if(E!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var D=1<<31-Je(E);S.entanglements[1]|=D,E&=~D}Ei(p),(Wt&6)===0&&(eh=Mn()+500,jl(0))}}break;case 13:S=Ka(p,2),S!==null&&Cn(S,p,2),ih(),tm(p,2)}if(p=nm(c),p===null&&jg(s,r,c,yh,l),p===g)break;g=p}g!==null&&c.stopPropagation()}else jg(s,r,c,null,l)}}function nm(s){return s=Pn(s),im(s)}var yh=null;function im(s){if(yh=null,s=Vi(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return yh=s,null}function I0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ad()){case Yo:return 2;case wa:return 8;case Ar:case od:return 32;case Ra:return 268435456;default:return 32}default:return 32}}var sm=!1,js=null,Fs=null,qs=null,Xl=new Map,$l=new Map,Gs=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(s,r){switch(s){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Zl(s,r,l,c,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:p,targetContainers:[g]},r!==null&&(r=oi(r),r!==null&&R0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function QR(s,r,l,c,g){switch(r){case"focusin":return js=Zl(js,s,r,l,c,g),!0;case"dragenter":return Fs=Zl(Fs,s,r,l,c,g),!0;case"mouseover":return qs=Zl(qs,s,r,l,c,g),!0;case"pointerover":var p=g.pointerId;return Xl.set(p,Zl(Xl.get(p)||null,s,r,l,c,g)),!0;case"gotpointercapture":return p=g.pointerId,$l.set(p,Zl($l.get(p)||null,s,r,l,c,g)),!0}return!1}function x0(s){var r=Vi(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ic(s.priority,function(){if(l.tag===13){var c=In();c=vs(c);var g=Ka(l,c);g!==null&&Cn(g,l,c),tm(l,c)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function vh(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=nm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Bi=c,l.target.dispatchEvent(c),Bi=null}else return r=oi(l),r!==null&&R0(r),s.blockedOn=l,!1;r.shift()}return!0}function D0(s,r,l){vh(s)&&l.delete(r)}function WR(){sm=!1,js!==null&&vh(js)&&(js=null),Fs!==null&&vh(Fs)&&(Fs=null),qs!==null&&vh(qs)&&(qs=null),Xl.forEach(D0),$l.forEach(D0)}function bh(s,r){s.blockedOn===r&&(s.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WR)))}var Eh=null;function O0(s){Eh!==s&&(Eh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Eh===s&&(Eh=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],g=s[r+2];if(typeof c!="function"){if(im(c||l)===null)continue;break}var p=oi(l);p!==null&&(s.splice(r,3),r-=3,ig(p,{pending:!0,data:g,method:l.method,action:c},c,g))}}))}function Jl(s){function r(D){return bh(D,s)}js!==null&&bh(js,s),Fs!==null&&bh(Fs,s),qs!==null&&bh(qs,s),Xl.forEach(r),$l.forEach(r);for(var l=0;l<Gs.length;l++){var c=Gs[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Gs.length&&(l=Gs[0],l.blockedOn===null);)x0(l),l.blockedOn===null&&Gs.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var g=l[c],p=l[c+1],E=g[be]||null;if(typeof p=="function")E||O0(l);else if(E){var S=null;if(p&&p.hasAttribute("formAction")){if(g=p,E=p[be]||null)S=E.formAction;else if(im(g)!==null)continue}else S=E.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),O0(l)}}}function rm(s){this._internalRoot=s}Th.prototype.render=rm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=In();A0(l,c,s,r,null,null)},Th.prototype.unmount=rm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;A0(s.current,2,null,s,null,null),ih(),r[kn]=null}};function Th(s){this._internalRoot=s}Th.prototype.unstable_scheduleHydration=function(s){if(s){var r=bs();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Gs.length&&r!==0&&r<Gs[l].priority;l++);Gs.splice(l,0,s),l===0&&x0(s)}};var M0=t.version;if(M0!=="19.1.0")throw Error(i(527,M0,"19.1.0"));it.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var XR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{fe=Sh.inject(XR),Qt=Sh}catch{}}return eu.createRoot=function(s,r){if(!a(s))throw Error(i(299));var l=!1,c="",g=Qy,p=Wy,E=Xy,S=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=T0(s,1,!1,null,null,l,c,g,p,E,S,null),s[kn]=r.current,Hg(s),new rm(r)},eu.hydrateRoot=function(s,r,l){if(!a(s))throw Error(i(299));var c=!1,g="",p=Qy,E=Wy,S=Xy,D=null,j=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&(j=l.formState)),r=T0(s,1,!0,r,l??null,c,g,p,E,S,D,j),r.context=S0(null),l=r.current,c=In(),c=vs(c),g=Cs(c),g.callback=null,xs(l,g,c),l=c,r.current.lanes=l,Pi(r,l),Ei(r),s[kn]=r.current,Hg(s),new Th(r)},eu.version="19.1.0",eu}var j0;function u1(){if(j0)return lm.exports;j0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lm.exports=l1(),lm.exports}var c1=u1();const h1=()=>{};var F0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},f1=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const a=n[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[e++];t[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[e++],u=n[e++],h=n[e++],d=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],u=n[e++];t[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return t.join("")},ST={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,h=u?n[a+1]:0,d=a+2<n.length,m=d?n[a+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,w=m&63;d||(w=64,u||(T=64)),i.push(e[_],e[v],e[T],e[w])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(TT(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):f1(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const m=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||v==null)throw new d1;const T=o<<2|h>>4;if(i.push(T),m!==64){const w=h<<4&240|m>>2;if(i.push(w),v!==64){const x=m<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class d1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g1=function(n){const t=TT(n);return ST.encodeByteArray(t,!0)},sf=function(n){return g1(n).replace(/\./g,"")},AT=function(n){try{return ST.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=()=>m1().__FIREBASE_DEFAULTS__,_1=()=>{if(typeof process>"u"||typeof F0>"u")return;const n=F0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&AT(n[1]);return t&&JSON.parse(t)},Pf=()=>{try{return h1()||p1()||_1()||y1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wT=n=>{var t,e;return(e=(t=Pf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},v1=n=>{const t=wT(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},RT=()=>{var n;return(n=Pf())===null||n===void 0?void 0:n.config},IT=n=>{var t;return(t=Pf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sf(JSON.stringify(e)),sf(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function S1(){var n;const t=(n=Pf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function R1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I1(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function C1(){return!S1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x1(){try{return typeof indexedDB=="object"}catch{return!1}}function D1(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var o;t(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="FirebaseError";class _s extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=O1,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,o=this.errors[t],u=o?M1(o,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new _s(a,h,i)}}function M1(n,t){return n.replace(k1,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const k1=/\{\$([^}]+)}/g;function N1(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function da(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const o=n[a],u=t[a];if(q0(o)&&q0(u)){if(!da(o,u))return!1}else if(o!==u)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function q0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ou(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function lu(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function P1(n,t){const e=new V1(n,t);return e.subscribe.bind(e)}class V1{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");L1(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=fm),a.error===void 0&&(a.error=fm),a.complete===void 0&&(a.complete=fm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L1(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function fm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n){return n&&n._delegate?n._delegate:n}class ga{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new b1;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(B1(t))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(t=la){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=la){return this.instances.has(t)}getOptions(t=la){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&t(u,a),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:z1(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=la){return this.component?this.component.multipleInstances?t:la:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z1(n){return n===la?void 0:n}function B1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new U1(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const j1={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},F1=Pt.INFO,q1={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},G1=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),a=q1[t];if(a)console[a](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pp{constructor(t){this.name=t,this._logLevel=F1,this._logHandler=G1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?j1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const K1=(n,t)=>t.some(e=>n instanceof e);let G0,K0;function Y1(){return G0||(G0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q1(){return K0||(K0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CT=new WeakMap,km=new WeakMap,xT=new WeakMap,dm=new WeakMap,_p=new WeakMap;function W1(n){const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{e(ir(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&CT.set(e,n)}).catch(()=>{}),_p.set(t,n),t}function X1(n){if(km.has(n))return;const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{e(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});km.set(n,t)}let Nm={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return km.get(n);if(t==="objectStoreNames")return n.objectStoreNames||xT.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ir(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function $1(n){Nm=n(Nm)}function Z1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(gm(this),t,...e);return xT.set(i,t.sort?t.sort():[t]),ir(i)}:Q1().includes(n)?function(...t){return n.apply(gm(this),t),ir(CT.get(this))}:function(...t){return ir(n.apply(gm(this),t))}}function J1(n){return typeof n=="function"?Z1(n):(n instanceof IDBTransaction&&X1(n),K1(n,Y1())?new Proxy(n,Nm):n)}function ir(n){if(n instanceof IDBRequest)return W1(n);if(dm.has(n))return dm.get(n);const t=J1(n);return t!==n&&(dm.set(n,t),_p.set(t,n)),t}const gm=n=>_p.get(n);function tI(n,t,{blocked:e,upgrade:i,blocking:a,terminated:o}={}){const u=indexedDB.open(n,t),h=ir(u);return i&&u.addEventListener("upgradeneeded",d=>{i(ir(u.result),d.oldVersion,d.newVersion,ir(u.transaction),d)}),e&&u.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),a&&d.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const eI=["get","getKey","getAll","getAllKeys","count"],nI=["put","add","delete","clear"],mm=new Map;function Y0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(mm.get(t))return mm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=nI.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||eI.includes(e)))return;const o=async function(u,...h){const d=this.transaction(u,a?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),a&&d.done]))[0]};return mm.set(t,o),o}$1(n=>({...n,get:(t,e,i)=>Y0(t,e)||n.get(t,e,i),has:(t,e)=>!!Y0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sI(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function sI(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Pm="@firebase/app",Q0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new pp("@firebase/app"),rI="@firebase/app-compat",aI="@firebase/analytics-compat",oI="@firebase/analytics",lI="@firebase/app-check-compat",uI="@firebase/app-check",cI="@firebase/auth",hI="@firebase/auth-compat",fI="@firebase/database",dI="@firebase/data-connect",gI="@firebase/database-compat",mI="@firebase/functions",pI="@firebase/functions-compat",_I="@firebase/installations",yI="@firebase/installations-compat",vI="@firebase/messaging",bI="@firebase/messaging-compat",EI="@firebase/performance",TI="@firebase/performance-compat",SI="@firebase/remote-config",AI="@firebase/remote-config-compat",wI="@firebase/storage",RI="@firebase/storage-compat",II="@firebase/firestore",CI="@firebase/vertexai",xI="@firebase/firestore-compat",DI="firebase",OI="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",MI={[Pm]:"fire-core",[rI]:"fire-core-compat",[oI]:"fire-analytics",[aI]:"fire-analytics-compat",[uI]:"fire-app-check",[lI]:"fire-app-check-compat",[cI]:"fire-auth",[hI]:"fire-auth-compat",[fI]:"fire-rtdb",[dI]:"fire-data-connect",[gI]:"fire-rtdb-compat",[mI]:"fire-fn",[pI]:"fire-fn-compat",[_I]:"fire-iid",[yI]:"fire-iid-compat",[vI]:"fire-fcm",[bI]:"fire-fcm-compat",[EI]:"fire-perf",[TI]:"fire-perf-compat",[SI]:"fire-rc",[AI]:"fire-rc-compat",[wI]:"fire-gcs",[RI]:"fire-gcs-compat",[II]:"fire-fst",[xI]:"fire-fst-compat",[CI]:"fire-vertex","fire-js":"fire-js",[DI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,kI=new Map,Lm=new Map;function W0(n,t){try{n.container.addComponent(t)}catch(e){fs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Do(n){const t=n.name;if(Lm.has(t))return fs.debug(`There were multiple attempts to register component ${t}.`),!1;Lm.set(t,n);for(const e of rf.values())W0(e,n);for(const e of kI.values())W0(e,n);return!0}function yp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new ju("app","Firebase",NI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=OI;function DT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Vm,automaticDataCollectionEnabled:!1},t),a=i.name;if(typeof a!="string"||!a)throw sr.create("bad-app-name",{appName:String(a)});if(e||(e=RT()),!e)throw sr.create("no-options");const o=rf.get(a);if(o){if(da(e,o.options)&&da(i,o.config))return o;throw sr.create("duplicate-app",{appName:a})}const u=new H1(a);for(const d of Lm.values())u.addComponent(d);const h=new PI(e,i,u);return rf.set(a,h),h}function OT(n=Vm){const t=rf.get(n);if(!t&&n===Vm&&RT())return DT();if(!t)throw sr.create("no-app",{appName:n});return t}function rr(n,t,e){var i;let a=(i=MI[n])!==null&&i!==void 0?i:n;e&&(a+=`-${e}`);const o=a.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${t}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fs.warn(h.join(" "));return}Do(new ga(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="firebase-heartbeat-database",LI=1,xu="firebase-heartbeat-store";let pm=null;function MT(){return pm||(pm=tI(VI,LI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(xu)}catch(e){console.warn(e)}}}}).catch(n=>{throw sr.create("idb-open",{originalErrorMessage:n.message})})),pm}async function UI(n){try{const e=(await MT()).transaction(xu),i=await e.objectStore(xu).get(kT(n));return await e.done,i}catch(t){if(t instanceof _s)fs.warn(t.message);else{const e=sr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fs.warn(e.message)}}}async function X0(n,t){try{const i=(await MT()).transaction(xu,"readwrite");await i.objectStore(xu).put(t,kT(n)),await i.done}catch(e){if(e instanceof _s)fs.warn(e.message);else{const i=sr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});fs.warn(i.message)}}}function kT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=1024,BI=30;class HI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new FI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$0();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>BI){const u=qI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fs.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$0(),{heartbeatsToSend:i,unsentEntries:a}=jI(this._heartbeatsCache.heartbeats),o=sf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fs.warn(e),""}}}function $0(){return new Date().toISOString().substring(0,10)}function jI(n,t=zI){const e=[];let i=n.slice();for(const a of n){const o=e.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),Z0(e)>t){o.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Z0(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class FI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x1()?D1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await UI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return X0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return X0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function Z0(n){return sf(JSON.stringify({version:2,heartbeats:n})).length}function qI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n){Do(new ga("platform-logger",t=>new iI(t),"PRIVATE")),Do(new ga("heartbeat",t=>new HI(t),"PRIVATE")),rr(Pm,Q0,n),rr(Pm,Q0,"esm2017"),rr("fire-js","")}GI("");var KI="firebase",YI="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(KI,YI,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,NT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,R){function I(){}I.prototype=R.prototype,N.D=R.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(k,P,L){for(var C=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)C[Ht-2]=arguments[Ht];return R.prototype[P].apply(k,C)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,R,I){I||(I=0);var k=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)k[P]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(P=0;16>P;++P)k[P]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=N.g[0],I=N.g[1],P=N.g[2];var L=N.g[3],C=R+(L^I&(P^L))+k[0]+3614090360&4294967295;R=I+(C<<7&4294967295|C>>>25),C=L+(P^R&(I^P))+k[1]+3905402710&4294967295,L=R+(C<<12&4294967295|C>>>20),C=P+(I^L&(R^I))+k[2]+606105819&4294967295,P=L+(C<<17&4294967295|C>>>15),C=I+(R^P&(L^R))+k[3]+3250441966&4294967295,I=P+(C<<22&4294967295|C>>>10),C=R+(L^I&(P^L))+k[4]+4118548399&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(P^R&(I^P))+k[5]+1200080426&4294967295,L=R+(C<<12&4294967295|C>>>20),C=P+(I^L&(R^I))+k[6]+2821735955&4294967295,P=L+(C<<17&4294967295|C>>>15),C=I+(R^P&(L^R))+k[7]+4249261313&4294967295,I=P+(C<<22&4294967295|C>>>10),C=R+(L^I&(P^L))+k[8]+1770035416&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(P^R&(I^P))+k[9]+2336552879&4294967295,L=R+(C<<12&4294967295|C>>>20),C=P+(I^L&(R^I))+k[10]+4294925233&4294967295,P=L+(C<<17&4294967295|C>>>15),C=I+(R^P&(L^R))+k[11]+2304563134&4294967295,I=P+(C<<22&4294967295|C>>>10),C=R+(L^I&(P^L))+k[12]+1804603682&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(P^R&(I^P))+k[13]+4254626195&4294967295,L=R+(C<<12&4294967295|C>>>20),C=P+(I^L&(R^I))+k[14]+2792965006&4294967295,P=L+(C<<17&4294967295|C>>>15),C=I+(R^P&(L^R))+k[15]+1236535329&4294967295,I=P+(C<<22&4294967295|C>>>10),C=R+(P^L&(I^P))+k[1]+4129170786&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^P&(R^I))+k[6]+3225465664&4294967295,L=R+(C<<9&4294967295|C>>>23),C=P+(R^I&(L^R))+k[11]+643717713&4294967295,P=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(P^L))+k[0]+3921069994&4294967295,I=P+(C<<20&4294967295|C>>>12),C=R+(P^L&(I^P))+k[5]+3593408605&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^P&(R^I))+k[10]+38016083&4294967295,L=R+(C<<9&4294967295|C>>>23),C=P+(R^I&(L^R))+k[15]+3634488961&4294967295,P=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(P^L))+k[4]+3889429448&4294967295,I=P+(C<<20&4294967295|C>>>12),C=R+(P^L&(I^P))+k[9]+568446438&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^P&(R^I))+k[14]+3275163606&4294967295,L=R+(C<<9&4294967295|C>>>23),C=P+(R^I&(L^R))+k[3]+4107603335&4294967295,P=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(P^L))+k[8]+1163531501&4294967295,I=P+(C<<20&4294967295|C>>>12),C=R+(P^L&(I^P))+k[13]+2850285829&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^P&(R^I))+k[2]+4243563512&4294967295,L=R+(C<<9&4294967295|C>>>23),C=P+(R^I&(L^R))+k[7]+1735328473&4294967295,P=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(P^L))+k[12]+2368359562&4294967295,I=P+(C<<20&4294967295|C>>>12),C=R+(I^P^L)+k[5]+4294588738&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^P)+k[8]+2272392833&4294967295,L=R+(C<<11&4294967295|C>>>21),C=P+(L^R^I)+k[11]+1839030562&4294967295,P=L+(C<<16&4294967295|C>>>16),C=I+(P^L^R)+k[14]+4259657740&4294967295,I=P+(C<<23&4294967295|C>>>9),C=R+(I^P^L)+k[1]+2763975236&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^P)+k[4]+1272893353&4294967295,L=R+(C<<11&4294967295|C>>>21),C=P+(L^R^I)+k[7]+4139469664&4294967295,P=L+(C<<16&4294967295|C>>>16),C=I+(P^L^R)+k[10]+3200236656&4294967295,I=P+(C<<23&4294967295|C>>>9),C=R+(I^P^L)+k[13]+681279174&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^P)+k[0]+3936430074&4294967295,L=R+(C<<11&4294967295|C>>>21),C=P+(L^R^I)+k[3]+3572445317&4294967295,P=L+(C<<16&4294967295|C>>>16),C=I+(P^L^R)+k[6]+76029189&4294967295,I=P+(C<<23&4294967295|C>>>9),C=R+(I^P^L)+k[9]+3654602809&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^P)+k[12]+3873151461&4294967295,L=R+(C<<11&4294967295|C>>>21),C=P+(L^R^I)+k[15]+530742520&4294967295,P=L+(C<<16&4294967295|C>>>16),C=I+(P^L^R)+k[2]+3299628645&4294967295,I=P+(C<<23&4294967295|C>>>9),C=R+(P^(I|~L))+k[0]+4096336452&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~P))+k[7]+1126891415&4294967295,L=R+(C<<10&4294967295|C>>>22),C=P+(R^(L|~I))+k[14]+2878612391&4294967295,P=L+(C<<15&4294967295|C>>>17),C=I+(L^(P|~R))+k[5]+4237533241&4294967295,I=P+(C<<21&4294967295|C>>>11),C=R+(P^(I|~L))+k[12]+1700485571&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~P))+k[3]+2399980690&4294967295,L=R+(C<<10&4294967295|C>>>22),C=P+(R^(L|~I))+k[10]+4293915773&4294967295,P=L+(C<<15&4294967295|C>>>17),C=I+(L^(P|~R))+k[1]+2240044497&4294967295,I=P+(C<<21&4294967295|C>>>11),C=R+(P^(I|~L))+k[8]+1873313359&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~P))+k[15]+4264355552&4294967295,L=R+(C<<10&4294967295|C>>>22),C=P+(R^(L|~I))+k[6]+2734768916&4294967295,P=L+(C<<15&4294967295|C>>>17),C=I+(L^(P|~R))+k[13]+1309151649&4294967295,I=P+(C<<21&4294967295|C>>>11),C=R+(P^(I|~L))+k[4]+4149444226&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~P))+k[11]+3174756917&4294967295,L=R+(C<<10&4294967295|C>>>22),C=P+(R^(L|~I))+k[2]+718787259&4294967295,P=L+(C<<15&4294967295|C>>>17),C=I+(L^(P|~R))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.u=function(N,R){R===void 0&&(R=N.length);for(var I=R-this.blockSize,k=this.B,P=this.h,L=0;L<R;){if(P==0)for(;L<=I;)a(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<R;)if(k[P++]=N.charCodeAt(L++),P==this.blockSize){a(this,k),P=0;break}}else for(;L<R;)if(k[P++]=N[L++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=R},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;var I=8*this.o;for(R=N.length-8;R<N.length;++R)N[R]=I&255,I/=256;for(this.u(N),N=Array(16),R=I=0;4>R;++R)for(var k=0;32>k;k+=8)N[I++]=this.g[R]>>>k&255;return N};function o(N,R){var I=h;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=R(N)}function u(N,R){this.h=R;for(var I=[],k=!0,P=N.length-1;0<=P;P--){var L=N[P]|0;k&&L==R||(I[P]=L,k=!1)}this.g=I}var h={};function d(N){return-128<=N&&128>N?o(N,function(R){return new u([R|0],0>R?-1:0)}):new u([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return M(m(-N));for(var R=[],I=1,k=0;N>=I;k++)R[k]=N/I|0,I*=4294967296;return new u(R,0)}function _(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return M(_(N.substring(1),R));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(R,8)),k=v,P=0;P<N.length;P+=8){var L=Math.min(8,N.length-P),C=parseInt(N.substring(P,P+L),R);8>L?(L=m(Math.pow(R,L)),k=k.j(L).add(m(C))):(k=k.j(I),k=k.add(m(C)))}return k}var v=d(0),T=d(1),w=d(16777216);n=u.prototype,n.m=function(){if(V(this))return-M(this).m();for(var N=0,R=1,I=0;I<this.g.length;I++){var k=this.i(I);N+=(0<=k?k:4294967296+k)*R,R*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(V(this))return"-"+M(this).toString(N);for(var R=m(Math.pow(N,6)),I=this,k="";;){var P=rt(I,R).g;I=K(I,P.j(R));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=P,x(I))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function V(N){return N.h==-1}n.l=function(N){return N=K(this,N),V(N)?-1:x(N)?0:1};function M(N){for(var R=N.g.length,I=[],k=0;k<R;k++)I[k]=~N.g[k];return new u(I,~N.h).add(T)}n.abs=function(){return V(this)?M(this):this},n.add=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],k=0,P=0;P<=R;P++){var L=k+(this.i(P)&65535)+(N.i(P)&65535),C=(L>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);k=C>>>16,L&=65535,C&=65535,I[P]=C<<16|L}return new u(I,I[I.length-1]&-2147483648?-1:0)};function K(N,R){return N.add(M(R))}n.j=function(N){if(x(this)||x(N))return v;if(V(this))return V(N)?M(this).j(M(N)):M(M(this).j(N));if(V(N))return M(this.j(M(N)));if(0>this.l(w)&&0>N.l(w))return m(this.m()*N.m());for(var R=this.g.length+N.g.length,I=[],k=0;k<2*R;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<N.g.length;P++){var L=this.i(k)>>>16,C=this.i(k)&65535,Ht=N.i(P)>>>16,yt=N.i(P)&65535;I[2*k+2*P]+=C*yt,$(I,2*k+2*P),I[2*k+2*P+1]+=L*yt,$(I,2*k+2*P+1),I[2*k+2*P+1]+=C*Ht,$(I,2*k+2*P+1),I[2*k+2*P+2]+=L*Ht,$(I,2*k+2*P+2)}for(k=0;k<R;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=R;k<2*R;k++)I[k]=0;return new u(I,0)};function $(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function Z(N,R){this.g=N,this.h=R}function rt(N,R){if(x(R))throw Error("division by zero");if(x(N))return new Z(v,v);if(V(N))return R=rt(M(N),R),new Z(M(R.g),M(R.h));if(V(R))return R=rt(N,M(R)),new Z(M(R.g),R.h);if(30<N.g.length){if(V(N)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=R;0>=k.l(N);)I=nt(I),k=nt(k);var P=ct(I,1),L=ct(k,1);for(k=ct(k,2),I=ct(I,2);!x(k);){var C=L.add(k);0>=C.l(N)&&(P=P.add(I),L=C),k=ct(k,1),I=ct(I,1)}return R=K(N,P.j(R)),new Z(P,R)}for(P=v;0<=N.l(R);){for(I=Math.max(1,Math.floor(N.m()/R.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=m(I),C=L.j(R);V(C)||0<C.l(N);)I-=k,L=m(I),C=L.j(R);x(L)&&(L=T),P=P.add(L),N=K(N,C)}return new Z(P,N)}n.A=function(N){return rt(this,N).h},n.and=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)&N.i(k);return new u(I,this.h&N.h)},n.or=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)|N.i(k);return new u(I,this.h|N.h)},n.xor=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)^N.i(k);return new u(I,this.h^N.h)};function nt(N){for(var R=N.g.length+1,I=[],k=0;k<R;k++)I[k]=N.i(k)<<1|N.i(k-1)>>>31;return new u(I,N.h)}function ct(N,R){var I=R>>5;R%=32;for(var k=N.g.length-I,P=[],L=0;L<k;L++)P[L]=0<R?N.i(L+I)>>>R|N.i(L+I+1)<<32-R:N.i(L+I);return new u(P,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,NT=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,ar=u}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PT,uu,VT,qh,Um,LT,UT,zT;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=e(this);function a(f,y){if(y)t:{var b=i;f=f.split(".");for(var A=0;A<f.length-1;A++){var B=f[A];if(!(B in b))break t;b=b[B]}f=f[f.length-1],A=b[f],y=y(A),y!=A&&y!=null&&t(b,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var b=0,A=!1,B={next:function(){if(!A&&b<f.length){var Y=b++;return{value:y(Y,f[Y]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(f){return f||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function v(f,y,b){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),f.apply(y,B)}}return function(){return f.apply(y,arguments)}}function T(f,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function w(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function x(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(A,B,Y){for(var ut=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)ut[Lt-2]=arguments[Lt];return y.prototype[B].apply(A,ut)}}function V(f){const y=f.length;if(0<y){const b=Array(y);for(let A=0;A<y;A++)b[A]=f[A];return b}return[]}function M(f,y){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(d(A)){const B=f.length||0,Y=A.length||0;f.length=B+Y;for(let ut=0;ut<Y;ut++)f[B+ut]=A[ut]}else f.push(A)}}class K{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(f){return/^[\s\xa0]*$/.test(f)}function Z(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function rt(f){return rt[" "](f),f}rt[" "]=function(){};var nt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ct(f,y,b){for(const A in f)y.call(b,f[A],A,f)}function N(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function R(f){const y={};for(const b in f)y[b]=f[b];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,y){let b,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(b in A)f[b]=A[b];for(let Y=0;Y<I.length;Y++)b=I[Y],Object.prototype.hasOwnProperty.call(A,b)&&(f[b]=A[b])}}function P(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function L(f){h.setTimeout(()=>{throw f},0)}function C(){var f=lt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Ht{constructor(){this.h=this.g=null}add(y,b){const A=yt.get();A.set(y,b),this.h?this.h.next=A:this.g=A,this.h=A}}var yt=new K(()=>new F,f=>f.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let it,W=!1,lt=new Ht,O=()=>{const f=h.Promise.resolve(void 0);it=()=>{f.then(Q)}};var Q=()=>{for(var f;f=C();){try{f.h.call(f.g)}catch(b){L(b)}var y=yt;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}W=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return f}();function Rt(f,y){if(ot.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(nt){t:{try{rt(y.nodeName);var B=!0;break t}catch{}B=!1}B||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_t[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Rt.aa.h.call(this)}}x(Rt,ot);var _t={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),se=0;function ri(f,y,b,A,B){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!A,this.ha=B,this.key=++se,this.da=this.fa=!1}function ys(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ki(f){this.src=f,this.g={},this.h=0}ki.prototype.add=function(f,y,b,A,B){var Y=f.toString();f=this.g[Y],f||(f=this.g[Y]=[],this.h++);var ut=Tr(f,y,A,B);return-1<ut?(y=f[ut],b||(y.fa=!1)):(y=new ri(y,this.src,Y,!!A,B),y.fa=b,f.push(y)),y};function Er(f,y){var b=y.type;if(b in f.g){var A=f.g[b],B=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=0<=B)&&Array.prototype.splice.call(A,B,1),Y&&(ys(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function Tr(f,y,b,A){for(var B=0;B<f.length;++B){var Y=f[B];if(!Y.da&&Y.listener==y&&Y.capture==!!b&&Y.ha==A)return B}return-1}var Sr="closure_lm_"+(1e6*Math.random()|0),Ko={};function tc(f,y,b,A,B){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)tc(f,y[Y],b,A,B);return null}return b=ec(b),f&&f[Pe]?f.K(y,b,m(A)?!!A.capture:!1,B):Mn(f,y,b,!1,A,B)}function Mn(f,y,b,A,B,Y){if(!y)throw Error("Invalid event type");var ut=m(B)?!!B.capture:!!B,Lt=Ra(f);if(Lt||(f[Sr]=Lt=new ki(f)),b=Lt.add(y,b,A,ut,Y),b.proxy)return b;if(A=ad(),b.proxy=A,A.src=f,A.listener=b,f.addEventListener)dt||(B=ut),B===void 0&&(B=!1),f.addEventListener(y.toString(),A,B);else if(f.attachEvent)f.attachEvent(Ar(y.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ad(){function f(b){return y.call(f.src,f.listener,b)}const y=od;return f}function Yo(f,y,b,A,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Yo(f,y[Y],b,A,B);else A=m(A)?!!A.capture:!!A,b=ec(b),f&&f[Pe]?(f=f.i,y=String(y).toString(),y in f.g&&(Y=f.g[y],b=Tr(Y,b,A,B),-1<b&&(ys(Y[b]),Array.prototype.splice.call(Y,b,1),Y.length==0&&(delete f.g[y],f.h--)))):f&&(f=Ra(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Tr(y,b,A,B)),(b=-1<f?y[f]:null)&&wa(b))}function wa(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Pe])Er(y.i,f);else{var b=f.type,A=f.proxy;y.removeEventListener?y.removeEventListener(b,A,f.capture):y.detachEvent?y.detachEvent(Ar(b),A):y.addListener&&y.removeListener&&y.removeListener(A),(b=Ra(y))?(Er(b,f),b.h==0&&(b.src=null,y[Sr]=null)):ys(f)}}}function Ar(f){return f in Ko?Ko[f]:Ko[f]="on"+f}function od(f,y){if(f.da)f=!0;else{y=new Rt(y,this);var b=f.listener,A=f.ha||f.src;f.fa&&wa(f),f=b.call(A,y)}return f}function Ra(f){return f=f[Sr],f instanceof ki?f:null}var Qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ec(f){return typeof f=="function"?f:(f[Qo]||(f[Qo]=function(y){return f.handleEvent(y)}),f[Qo])}function fe(){at.call(this),this.i=new ki(this),this.M=this,this.F=null}x(fe,at),fe.prototype[Pe]=!0,fe.prototype.removeEventListener=function(f,y,b,A){Yo(this,f,y,b,A)};function Qt(f,y){var b,A=f.F;if(A)for(b=[];A;A=A.F)b.push(A);if(f=f.M,A=y.type||y,typeof y=="string")y=new ot(y,f);else if(y instanceof ot)y.target=y.target||f;else{var B=y;y=new ot(A,f),k(y,B)}if(B=!0,b)for(var Y=b.length-1;0<=Y;Y--){var ut=y.g=b[Y];B=bn(ut,A,!0,y)&&B}if(ut=y.g=f,B=bn(ut,A,!0,y)&&B,B=bn(ut,A,!1,y)&&B,b)for(Y=0;Y<b.length;Y++)ut=y.g=b[Y],B=bn(ut,A,!1,y)&&B}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],A=0;A<b.length;A++)ys(b[A]);delete f.g[y],f.h--}}this.F=null},fe.prototype.K=function(f,y,b,A){return this.i.add(String(f),y,!1,b,A)},fe.prototype.L=function(f,y,b,A){return this.i.add(String(f),y,!0,b,A)};function bn(f,y,b,A){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,Y=0;Y<y.length;++Y){var ut=y[Y];if(ut&&!ut.da&&ut.capture==b){var Lt=ut.listener,Ie=ut.ha||ut.src;ut.fa&&Er(f.i,ut),B=Lt.call(Ie,A)!==!1&&B}}return B&&!A.defaultPrevented}function Je(f,y,b){if(typeof f=="function")b&&(f=T(f,b));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function nc(f){f.g=Je(()=>{f.g=null,f.i&&(f.i=!1,nc(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class ld extends at{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:nc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(f){at.call(this),this.h=f,this.g={}}x(wr,at);var Rr=[];function Ir(f){ct(f.g,function(y,b){this.g.hasOwnProperty(b)&&wa(y)},f),f.g={}}wr.prototype.N=function(){wr.aa.N.call(this),Ir(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=h.JSON.stringify,Ia=h.JSON.parse,Cr=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Wo(){}Wo.prototype.h=null;function Xo(f){return f.h||(f.h=f.i())}function $o(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){ot.call(this,"d")}x(Pi,ot);function Zo(){ot.call(this,"c")}x(Zo,ot);var ai={},Jo=null;function vs(){return Jo=Jo||new fe}ai.La="serverreachability";function Ca(f){ot.call(this,ai.La,f)}x(Ca,ot);function bs(f){const y=vs();Qt(y,new Ca(y))}ai.STAT_EVENT="statevent";function ic(f,y){ot.call(this,ai.STAT_EVENT,f),this.stat=y}x(ic,ot);function oe(f){const y=vs();Qt(y,new ic(y,f))}ai.Ma="timingevent";function Re(f,y){ot.call(this,ai.Ma,f),this.size=y}x(Re,ot);function be(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function tl(f,y,b,A,B,Y){f.info(function(){if(f.g)if(Y)for(var ut="",Lt=Y.split("&"),Ie=0;Ie<Lt.length;Ie++){var Ut=Lt[Ie].split("=");if(1<Ut.length){var Le=Ut[0];Ut=Ut[1];var Ce=Le.split("_");ut=2<=Ce.length&&Ce[1]=="type"?ut+(Le+"="+Ut+"&"):ut+(Le+"=redacted&")}}else ut=null;else ut=Y;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+b+`
`+ut})}function ud(f,y,b,A,B,Y,ut){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+b+`
`+Y+" "+ut})}function Es(f,y,b,A){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+xr(f,b)+(A?" "+A:"")})}function sc(f,y){f.info(function(){return"TIMEOUT: "+y})}kn.prototype.info=function(){};function xr(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var A=b[f];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var Y=B[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ut=1;ut<B.length;ut++)B[ut]=""}}}}return Qn(b)}catch{return y}}var Ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oi;function li(){}x(li,Wo),li.prototype.g=function(){return new XMLHttpRequest},li.prototype.i=function(){return{}},oi=new li;function ln(f,y,b,A){this.j=f,this.i=y,this.l=b,this.R=A||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var el={},xa={};function Wn(f,y,b){f.L=1,f.v=Nr(En(y)),f.m=b,f.P=!0,Li(f,null)}function Li(f,y){f.F=Date.now(),Dr(f),f.A=En(f.v);var b=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),ol(b.i,"t",A),f.C=0,b=f.j.J,f.h=new me,f.g=bc(f.j,b?y:null,!f.m),0<f.O&&(f.M=new ld(T(f.Y,f,f.g),f.O)),y=f.U,b=f.g,A=f.ca;var B="readystatechange";Array.isArray(B)||(B&&(Rr[0]=B.toString()),B=Rr);for(var Y=0;Y<B.length;Y++){var ut=tc(b,B[Y],A||y.handleEvent,!1,y.h||y);if(!ut)break;y.g[ut.key]=ut}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),bs(),tl(f.i,f.u,f.A,f.l,f.R,f.m)}ln.prototype.ca=function(f){f=f.target;const y=this.M;y&&Ln(f)==3?y.j():this.Y(f)},ln.prototype.Y=function(f){try{if(f==this.g)t:{const Ce=Ln(this.g);var y=this.g.Ba();const Gi=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||fc(this.g)))){this.J||Ce!=4||y==7||(y==8||0>=Gi?bs(3):bs(2)),Ss(this);var b=this.g.Z();this.X=b;e:if(rc(this)){var A=fc(this.g);f="";var B=A.length,Y=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),ui(this);var ut="";break e}this.h.i=new h.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,f+=this.h.i.decode(A[y],{stream:!(Y&&y==B-1)});A.length=0,this.h.g+=f,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=b==200,ud(this.i,this.u,this.A,this.l,this.R,Ce,b),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ie=this.g;if((Lt=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Lt)){var Ut=Lt;break e}}Ut=null}if(b=Ut)Es(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,b);else{this.o=!1,this.s=3,oe(12),Fe(this),ui(this);break t}}if(this.P){b=!0;let qe;for(;!this.J&&this.C<ut.length;)if(qe=ac(this,ut),qe==xa){Ce==4&&(this.s=4,oe(14),b=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==el){this.s=4,oe(15),Es(this.i,this.l,ut,"[Invalid Chunk]"),b=!1;break}else Es(this.i,this.l,qe,null),Or(this,qe);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||ut.length!=0||this.h.h||(this.s=1,oe(16),b=!1),this.o=this.o&&b,!b)Es(this.i,this.l,ut,"[Invalid Chunked Response]"),Fe(this),ui(this);else if(0<ut.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),jr(Le),Le.M=!0,oe(11))}}else Es(this.i,this.l,ut,null),Or(this,ut);Ce==4&&Fe(this),this.o&&!this.J&&(Ce==4?_c(this.j,this):(this.o=!1,Dr(this)))}else gd(this.g),b==400&&0<ut.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Fe(this),ui(this)}}}catch{}finally{}};function rc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ac(f,y){var b=f.C,A=y.indexOf(`
`,b);return A==-1?xa:(b=Number(y.substring(b,A)),isNaN(b)?el:(A+=1,A+b>y.length?xa:(y=y.slice(A,A+b),f.C=A+b,y)))}ln.prototype.cancel=function(){this.J=!0,Fe(this)};function Dr(f){f.S=Date.now()+f.I,oc(f,f.I)}function oc(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=be(T(f.ba,f),y)}function Ss(f){f.B&&(h.clearTimeout(f.B),f.B=null)}ln.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(sc(this.i,this.A),this.L!=2&&(bs(),oe(17)),Fe(this),this.s=2,ui(this)):oc(this,this.S-f)};function ui(f){f.j.G==0||f.J||_c(f.j,f)}function Fe(f){Ss(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Ir(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Or(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||nl(b.h,f))){if(!f.K&&nl(b.h,f)&&b.G==3){try{var A=b.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){t:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Ha(b),za(b);else break t;fl(b),oe(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=be(T(b.Za,b),6e3));if(1>=Oa(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else qi(b,11)}else if((f.K||b.g==f)&&Ha(b),!$(y))for(B=b.Da.g.parse(y),y=0;y<B.length;y++){let Ut=B[y];if(b.T=Ut[0],Ut=Ut[1],b.G==2)if(Ut[0]=="c"){b.K=Ut[1],b.ia=Ut[2];const Le=Ut[3];Le!=null&&(b.la=Le,b.j.info("VER="+b.la));const Ce=Ut[4];Ce!=null&&(b.Aa=Ce,b.j.info("SVER="+b.Aa));const Gi=Ut[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(A=1.5*Gi,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const qe=f.g;if(qe){const pi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var Y=A.h;Y.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ma(Y,Y.h),Y.h=null))}if(A.D){const gl=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(A.ya=gl,Jt(A.I,A.D,gl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var ut=f;if(A.qa=vc(A,A.J?A.ia:null,A.W),ut.K){un(A.h,ut);var Lt=ut,Ie=A.L;Ie&&(Lt.I=Ie),Lt.B&&(Ss(Lt),Dr(Lt)),A.g=ut}else mc(A);0<b.i.length&&Ba(b)}else Ut[0]!="stop"&&Ut[0]!="close"||qi(b,7);else b.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?qi(b,7):cl(b):Ut[0]!="noop"&&b.l&&b.l.ta(Ut),b.v=0)}}bs(4)}catch{}}var lc=class{constructor(f,y){this.g=f,this.map=y}};function Ui(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Da(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Oa(f){return f.h?1:f.g?f.g.size:0}function nl(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function Ma(f,y){f.g?f.g.add(y):f.h=y}function un(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Ui.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function il(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return V(f.i)}function cd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],b=f.length,A=0;A<b;A++)y.push(f[A]);return y}y=[],b=0;for(A in f)y[b++]=f[A];return y}function ka(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const A in f)y[b++]=A;return y}}}function sl(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=ka(f),A=cd(f),B=A.length,Y=0;Y<B;Y++)y.call(void 0,A[Y],b&&b[Y],f)}var Mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hd(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var A=f[b].indexOf("="),B=null;if(0<=A){var Y=f[b].substring(0,A);B=f[b].substring(A+1)}else Y=f[b];y(Y,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ee(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ee){this.h=f.h,kr(this,f.j),this.o=f.o,this.g=f.g,As(this,f.s),this.l=f.l;var y=f.i,b=new Bi;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),zi(this,b),this.m=f.m}else f&&(y=String(f).match(Mr))?(this.h=!1,kr(this,y[1]||"",!0),this.o=Nn(y[2]||""),this.g=Nn(y[3]||"",!0),As(this,y[4]),this.l=Nn(y[5]||"",!0),zi(this,y[6]||"",!0),this.m=Nn(y[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}Ee.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Pr(y,rl,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Pr(y,rl,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Pr(b,b.charAt(0)=="/"?fd:al,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Pr(b,Na)),f.join("")};function En(f){return new Ee(f)}function kr(f,y,b){f.j=b?Nn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function As(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function zi(f,y,b){y instanceof Bi?(f.i=y,cc(f.i,f.h)):(b||(y=Pr(y,dd)),f.i=new Bi(y,f.h))}function Jt(f,y,b){f.i.set(y,b)}function Nr(f){return Jt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Nn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Pr(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,uc),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function uc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var rl=/[#\/\?@]/g,al=/[#\?:]/g,fd=/[#\?]/g,dd=/[#\?@]/g,Na=/#/g;function Bi(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Pn(f){f.g||(f.g=new Map,f.h=0,f.i&&hd(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Bi.prototype,n.add=function(f,y){Pn(this),this.i=null,f=ci(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function Hi(f,y){Pn(f),y=ci(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function ji(f,y){return Pn(f),y=ci(f,y),f.g.has(y)}n.forEach=function(f,y){Pn(this),this.g.forEach(function(b,A){b.forEach(function(B){f.call(y,B,A,this)},this)},this)},n.na=function(){Pn(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let A=0;A<y.length;A++){const B=f[A];for(let Y=0;Y<B.length;Y++)b.push(y[A])}return b},n.V=function(f){Pn(this);let y=[];if(typeof f=="string")ji(this,f)&&(y=y.concat(this.g.get(ci(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return Pn(this),this.i=null,f=ci(this,f),ji(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function ol(f,y,b){Hi(f,y),0<b.length&&(f.i=null,f.g.set(ci(f,y),V(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var A=y[b];const Y=encodeURIComponent(String(A)),ut=this.V(A);for(A=0;A<ut.length;A++){var B=Y;ut[A]!==""&&(B+="="+encodeURIComponent(String(ut[A]))),f.push(B)}}return this.i=f.join("&")};function ci(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function cc(f,y){y&&!f.j&&(Pn(f),f.i=null,f.g.forEach(function(b,A){var B=A.toLowerCase();A!=B&&(Hi(this,A),ol(this,B,b))},f)),f.j=y}function Vr(f,y){const b=new kn;if(h.Image){const A=new Image;A.onload=w(Vn,b,"TestLoadImage: loaded",!0,y,A),A.onerror=w(Vn,b,"TestLoadImage: error",!1,y,A),A.onabort=w(Vn,b,"TestLoadImage: abort",!1,y,A),A.ontimeout=w(Vn,b,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else y(!1)}function Xn(f,y){const b=new kn,A=new AbortController,B=setTimeout(()=>{A.abort(),Vn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:A.signal}).then(Y=>{clearTimeout(B),Y.ok?Vn(b,"TestPingServer: ok",!0,y):Vn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Vn(b,"TestPingServer: error",!1,y)})}function Vn(f,y,b,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(b)}catch{}}function Lr(){this.g=new Cr}function hi(f,y,b){const A=b||"";try{sl(f,function(B,Y){let ut=B;m(B)&&(ut=Qn(B)),y.push(A+Y+"="+encodeURIComponent(ut))})}catch(B){throw y.push(A+"type="+encodeURIComponent("_badmap")),B}}function ws(f){this.l=f.Ub||null,this.j=f.eb||!1}x(ws,Wo),ws.prototype.g=function(){return new Fi(this.l,this.j)},ws.prototype.i=function(f){return function(){return f}}({});function Fi(f,y){fe.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Fi,fe),n=Fi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,di(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ll(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ll(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?fi(this):di(this),this.readyState==3&&ll(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,fi(this))},n.Qa=function(f){this.g&&(this.response=f,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,di(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function di(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ul(f){let y="";return ct(f,function(b,A){y+=A,y+=":",y+=b,y+=`\r
`}),y}function Ve(f,y,b){t:{for(A in b){var A=!1;break t}A=!0}A||(b=ul(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Jt(f,y,b))}function Kt(f){fe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Kt,fe);var Pa=/^https?$/i,Ur=["POST","PUT"];n=Kt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oi.g(),this.v=this.o?Xo(this.o):Xo(oi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Y){hc(this,Y);return}if(f=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)b.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())b.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ur,y,void 0))||A||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ut]of b)this.g.setRequestHeader(Y,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zr(this),this.u=!0,this.g.send(f),this.u=!1}catch(Y){hc(this,Y)}};function hc(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Va(f),gi(f)}function Va(f){f.A||(f.A=!0,Qt(f,"complete"),Qt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Qt(this,"complete"),Qt(this,"abort"),gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),Kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},n.bb=function(){La(this)};function La(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Ln(f)!=4||f.Z()!=2)){if(f.u&&Ln(f)==4)Je(f.Ea,0,f);else if(Qt(f,"readystatechange"),Ln(f)==4){f.h=!1;try{const ut=f.Z();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var b;if(!(b=y)){var A;if(A=ut===0){var B=String(f.D).match(Mr)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),A=!Pa.test(B?B.toLowerCase():"")}b=A}if(b)Qt(f,"complete"),Qt(f,"success");else{f.m=6;try{var Y=2<Ln(f)?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.Z()+"]",Va(f)}}finally{gi(f)}}}}function gi(f,y){if(f.g){zr(f);const b=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Qt(f,"ready");try{b.onreadystatechange=A}catch{}}}function zr(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Ln(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),Ia(y)}};function fc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function gd(f){const y={};f=(f.g&&2<=Ln(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if($(f[A]))continue;var b=P(f[A]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=y[B]||[];y[B]=Y,Y.push(b)}N(y,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function Ua(f){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,f),this.cb=Br("retryDelaySeedMs",1e4,f),this.Wa=Br("forwardChannelMaxRetries",2,f),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(f&&f.concurrentRequestLimit),this.Da=new Lr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ua.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,A){oe(0),this.W=f,this.H=y||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=vc(this,null,this.W),Ba(this)};function cl(f){if(dc(f),f.G==3){var y=f.U++,b=En(f.I);if(Jt(b,"SID",f.K),Jt(b,"RID",y),Jt(b,"TYPE","terminate"),Hr(f,b),y=new ln(f,f.j,y),y.L=2,y.v=Nr(En(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=bc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Dr(y)}yc(f)}function za(f){f.g&&(jr(f),f.g.cancel(),f.g=null)}function dc(f){za(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ha(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Ba(f){if(!Da(f.h)&&!f.s){f.s=!0;var y=f.Ga;it||O(),W||(it(),W=!0),lt.add(y,f),f.B=0}}function md(f,y){return Oa(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=be(T(f.Ga,f,y),dl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const B=new ln(this,this.j,f);let Y=this.o;if(this.S&&(Y?(Y=R(Y),k(Y,this.S)):Y=this.S),this.m!==null||this.O||(B.H=Y,Y=null),this.P)t:{for(var y=0,b=0;b<this.i.length;b++){e:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=b;break t}if(y===4096||b===this.i.length-1){y=b+1;break t}}y=1e3}else y=1e3;y=gc(this,B,y),b=En(this.I),Jt(b,"RID",f),Jt(b,"CVER",22),this.D&&Jt(b,"X-HTTP-Session-Id",this.D),Hr(this,b),Y&&(this.O?y="headers="+encodeURIComponent(String(ul(Y)))+"&"+y:this.m&&Ve(b,this.m,Y)),Ma(this.h,B),this.Ua&&Jt(b,"TYPE","init"),this.P?(Jt(b,"$req",y),Jt(b,"SID","null"),B.T=!0,Wn(B,b,null)):Wn(B,b,y),this.G=2}}else this.G==3&&(f?hl(this,f):this.i.length==0||Da(this.h)||hl(this))};function hl(f,y){var b;y?b=y.l:b=f.U++;const A=En(f.I);Jt(A,"SID",f.K),Jt(A,"RID",b),Jt(A,"AID",f.T),Hr(f,A),f.m&&f.o&&Ve(A,f.m,f.o),b=new ln(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=gc(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ma(f.h,b),Wn(b,A,y)}function Hr(f,y){f.H&&ct(f.H,function(b,A){Jt(y,A,b)}),f.l&&sl({},function(b,A){Jt(y,A,b)})}function gc(f,y,b){b=Math.min(f.i.length,b);var A=f.l?T(f.l.Na,f.l,f):null;t:{var B=f.i;let Y=-1;for(;;){const ut=["count="+b];Y==-1?0<b?(Y=B[0].g,ut.push("ofs="+Y)):Y=0:ut.push("ofs="+Y);let Lt=!0;for(let Ie=0;Ie<b;Ie++){let Ut=B[Ie].g;const Le=B[Ie].map;if(Ut-=Y,0>Ut)Y=Math.max(0,B[Ie].g-100),Lt=!1;else try{hi(Le,ut,"req"+Ut+"_")}catch{A&&A(Le)}}if(Lt){A=ut.join("&");break t}}}return f=f.i.splice(0,b),y.D=f,A}function mc(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;it||O(),W||(it(),W=!0),lt.add(y,f),f.v=0}}function fl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=be(T(f.Fa,f),dl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,pc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=be(T(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),za(this),pc(this))};function jr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function pc(f){f.g=new ln(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=En(f.qa);Jt(y,"RID","rpc"),Jt(y,"SID",f.K),Jt(y,"AID",f.T),Jt(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Jt(y,"TO",f.ja),Jt(y,"TYPE","xmlhttp"),Hr(f,y),f.m&&f.o&&Ve(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Nr(En(y)),b.m=null,b.P=!0,Li(b,f)}n.Za=function(){this.C!=null&&(this.C=null,za(this),fl(this),oe(19))};function Ha(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function _c(f,y){var b=null;if(f.g==y){Ha(f),jr(f),f.g=null;var A=2}else if(nl(f.h,y))b=y.D,un(f.h,y),A=1;else return;if(f.G!=0){if(y.o)if(A==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var B=f.B;A=vs(),Qt(A,new Re(A,b)),Ba(f)}else mc(f);else if(B=y.s,B==3||B==0&&0<y.X||!(A==1&&md(f,y)||A==2&&fl(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),B){case 1:qi(f,5);break;case 4:qi(f,10);break;case 3:qi(f,6);break;default:qi(f,2)}}}function dl(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function qi(f,y){if(f.j.info("Error code "+y),y==2){var b=T(f.fb,f),A=f.Xa;const B=!A;A=new Ee(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||kr(A,"https"),Nr(A),B?Vr(A.toString(),b):Xn(A.toString(),b)}else oe(2);f.G=0,f.l&&f.l.sa(y),yc(f),dc(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function yc(f){if(f.G=0,f.ka=[],f.l){const y=il(f.h);(y.length!=0||f.i.length!=0)&&(M(f.ka,y),M(f.ka,f.i),f.h.i.length=0,V(f.i),f.i.length=0),f.l.ra()}}function vc(f,y,b){var A=b instanceof Ee?En(b):new Ee(b);if(A.g!="")y&&(A.g=y+"."+A.g),As(A,A.s);else{var B=h.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var Y=new Ee(null);A&&kr(Y,A),y&&(Y.g=y),B&&As(Y,B),b&&(Y.l=b),A=Y}return b=f.D,y=f.ya,b&&y&&Jt(A,b,y),Jt(A,"VER",f.la),Hr(f,A),A}function bc(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Kt(new ws({eb:b})):new Kt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}n=Ec.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ja(){}ja.prototype.g=function(f,y){return new cn(f,y)};function cn(f,y){fe.call(this),this.g=new Ua(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!$(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!$(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new mi(this)}x(cn,fe),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){cl(this.g)},cn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=Qn(f),f=b);y.i.push(new lc(y.Ya++,f)),y.G==3&&Ba(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,cn.aa.N.call(this)};function Tc(f){Pi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){t:{for(const b in y){f=b;break t}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}x(Tc,Pi);function Sc(){Zo.call(this),this.status=1}x(Sc,Zo);function mi(f){this.g=f}x(mi,Ec),mi.prototype.ua=function(){Qt(this.g,"a")},mi.prototype.ta=function(f){Qt(this.g,new Tc(f))},mi.prototype.sa=function(f){Qt(this.g,new Sc)},mi.prototype.ra=function(){Qt(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,zT=function(){return new ja},UT=function(){return vs()},LT=ai,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,qh=Ts,Vi.COMPLETE="complete",VT=Vi,$o.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",fe.prototype.listen=fe.prototype.K,uu=$o,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,PT=Kt}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});const tb="@firebase/firestore",eb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new pp("@firebase/firestore");function bo(){return ma.logLevel}function ht(n,...t){if(ma.logLevel<=Pt.DEBUG){const e=t.map(vp);ma.debug(`Firestore (${Bo}): ${n}`,...e)}}function ds(n,...t){if(ma.logLevel<=Pt.ERROR){const e=t.map(vp);ma.error(`Firestore (${Bo}): ${n}`,...e)}}function Oo(n,...t){if(ma.logLevel<=Pt.WARN){const e=t.map(vp);ma.warn(`Firestore (${Bo}): ${n}`,...e)}}function vp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n="Unexpected state"){const t=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+n;throw ds(t),new Error(t)}function Yt(n,t){n||At()}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends _s{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(sn.UNAUTHENTICATED))}shutdown(){}}class WI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class XI{constructor(t){this.t=t,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0);let i=this.i;const a=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new or,t.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await a(this.currentUser)})},h=d=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new or)}},0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string"),new BT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string"),new sn(t)}}class $I{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ZI{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new $I(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JI{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Kn(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const a=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new nb(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Yt(typeof e.token=="string"),this.R=e.token,new nb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=tC(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<e&&(i+=t.charAt(a[o]%62))}return i}}function Ot(n,t){return n<t?-1:n>t?1:0}function zm(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),a=t.codePointAt(e);if(i!==a){if(i<128&&a<128)return Ot(i,a);{const o=HT(),u=eC(o.encode(ib(n,e)),o.encode(ib(t,e)));return u!==0?u:Ot(i,a)}}e+=i>65535?2:1}return Ot(n.length,t.length)}function ib(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function eC(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Ot(n[e],t[e]);return Ot(n.length,t.length)}function Mo(n,t,e){return n.length===t.length&&n.every((i,a)=>e(i,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-62135596800,rb=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(t){return ke.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*rb);return new ke(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new pt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new pt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<sb)throw new pt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rb}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-sb;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new ke(0,0))}static max(){return new wt(new ke(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="__name__";class wi{constructor(t,e,i){e===void 0?e=0:e>t.length&&At(),i===void 0?i=t.length-e:i>t.length-e&&At(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return wi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof wi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const o=wi.compareSegments(t.get(a),e.get(a));if(o!==0)return o}return Ot(t.length,e.length)}static compareSegments(t,e){const i=wi.isNumericId(t),a=wi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?wi.extractNumericId(t).compare(wi.extractNumericId(e)):zm(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ar.fromString(t.substring(4,t.length-2))}}class ue extends wi{construct(t,e,i){return new ue(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new pt(st.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new ue(e)}static emptyPath(){return new ue([])}}const nC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends wi{construct(t,e,i){return new We(t,e,i)}static isValidIdentifier(t){return nC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ab}static keyField(){return new We([ab])}static fromServerFormat(t){const e=[];let i="",a=0;const o=()=>{if(i.length===0)throw new pt(st.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new pt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(o(),a++)}if(o(),u)throw new pt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new We(e)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.path=t}static fromPath(t){return new vt(ue.fromString(t))}static fromName(t){return new vt(ue.fromString(t).popFirst(5))}static empty(){return new vt(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ue.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vt(new ue(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function iC(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=wt.fromTimestamp(i===1e9?new ke(e+1,0):new ke(e,i));return new cr(a,vt.empty(),t)}function sC(n){return new cr(n.readTime,n.key,Du)}class cr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new cr(wt.min(),vt.empty(),Du)}static max(){return new cr(wt.max(),vt.empty(),Du)}}function rC(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=vt.comparator(n.documentKey,t.documentKey),e!==0?e:Ot(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n){if(n.code!==st.FAILED_PRECONDITION||n.message!==aC)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new et((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof et?e:et.resolve(e)}catch(e){return et.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):et.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):et.reject(e)}static resolve(t){return new et((e,i)=>{e(t)})}static reject(t){return new et((e,i)=>{i(t)})}static waitFor(t){return new et((e,i)=>{let a=0,o=0,u=!1;t.forEach(h=>{++a,h.next(()=>{++o,u&&o===a&&e()},d=>i(d))}),u=!0,o===a&&e()})}static or(t){let e=et.resolve(!1);for(const i of t)e=e.next(a=>a?et.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,o)=>{i.push(e.call(this,a,o))}),this.waitFor(i)}static mapArray(t,e){return new et((i,a)=>{const o=t.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(_=>{u[m]=_,++h,h===o&&i(u)},_=>a(_))}})}static doWhile(t,e){return new et((i,a)=>{const o=()=>{t()===!0?e().next(()=>{o()},a):i()};o()})}}function lC(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function jo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.oe(i),this._e=i=>e.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Vf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=-1;function Lf(n){return n==null}function af(n){return n===0&&1/n==-1/0}function uC(n){return typeof n=="number"&&Number.isInteger(n)&&!af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="";function cC(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=ob(t)),t=hC(n.get(e),t);return ob(t)}function hC(n,t){let e=t;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":e+="";break;case FT:e+="";break;default:e+=o}}return e}function ob(n){return n+FT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function _r(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function qT(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e){this.comparator=t,this.root=e||Qe.EMPTY}insert(t,e){return new he(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new he(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wh(this.root,t,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wh(this.root,t,this.comparator,!0)}}class wh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,e,i,a,o){this.key=t,this.value=e,this.color=i??Qe.RED,this.left=a??Qe.EMPTY,this.right=o??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,o){return new Qe(t??this.key,e??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const o=i(t,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(t,e,i),null):o===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Qe.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const t=this.left.check();if(t!==this.right.check())throw At();return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(t,e,i,a,o){return this}insert(t,e,i){return new Qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new he(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ub(this.data.getIterator())}getIteratorFrom(t){return new ub(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ne(this.comparator);return e.data=t,e}}class ub{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.fields=t,t.sort(We.comparator)}static empty(){return new Dn([])}unionWith(t){let e=new Ne(We.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Dn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Mo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new GT("Invalid base64 string: "+o):o}}(t);return new Ze(e)}static fromUint8Array(t){const e=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(t);return new Ze(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const fC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(n){if(Yt(!!n),typeof n=="string"){let t=0;const e=fC.exec(n);if(Yt(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ye(n.seconds),nanos:ye(n.nanos)}}function ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fr(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="server_timestamp",YT="__type__",QT="__previous_value__",WT="__local_write_time__";function Ep(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[YT])===null||e===void 0?void 0:e.stringValue)===KT}function Uf(n){const t=n.mapValue.fields[QT];return Ep(t)?Uf(t):t}function Ou(n){const t=hr(n.mapValue.fields[WT].timestampValue);return new ke(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,e,i,a,o,u,h,d,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}const of="(default)";class Mu{constructor(t,e){this.projectId=t,this.database=e||of}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===of}isEqual(t){return t instanceof Mu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="__type__",gC="__max__",Rh={mapValue:{}},$T="__vector__",lf="value";function dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ep(n)?4:pC(n)?9007199254740991:mC(n)?10:11:At()}function Oi(n,t){if(n===t)return!0;const e=dr(n);if(e!==dr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ou(n).isEqual(Ou(t));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=hr(a.timestampValue),h=hr(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(a,o){return fr(a.bytesValue).isEqual(fr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(a,o){return ye(a.geoPointValue.latitude)===ye(o.geoPointValue.latitude)&&ye(a.geoPointValue.longitude)===ye(o.geoPointValue.longitude)}(n,t);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return ye(a.integerValue)===ye(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=ye(a.doubleValue),h=ye(o.doubleValue);return u===h?af(u)===af(h):isNaN(u)&&isNaN(h)}return!1}(n,t);case 9:return Mo(n.arrayValue.values||[],t.arrayValue.values||[],Oi);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(lb(u)!==lb(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Oi(u[d],h[d])))return!1;return!0}(n,t);default:return At()}}function ku(n,t){return(n.values||[]).find(e=>Oi(e,t))!==void 0}function ko(n,t){if(n===t)return 0;const e=dr(n),i=dr(t);if(e!==i)return Ot(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,t.booleanValue);case 2:return function(o,u){const h=ye(o.integerValue||o.doubleValue),d=ye(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return cb(n.timestampValue,t.timestampValue);case 4:return cb(Ou(n),Ou(t));case 5:return zm(n.stringValue,t.stringValue);case 6:return function(o,u){const h=fr(o),d=fr(u);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Ot(h[m],d[m]);if(_!==0)return _}return Ot(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,u){const h=Ot(ye(o.latitude),ye(u.latitude));return h!==0?h:Ot(ye(o.longitude),ye(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return hb(n.arrayValue,t.arrayValue);case 10:return function(o,u){var h,d,m,_;const v=o.fields||{},T=u.fields||{},w=(h=v[lf])===null||h===void 0?void 0:h.arrayValue,x=(d=T[lf])===null||d===void 0?void 0:d.arrayValue,V=Ot(((m=w==null?void 0:w.values)===null||m===void 0?void 0:m.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:hb(w,x)}(n.mapValue,t.mapValue);case 11:return function(o,u){if(o===Rh.mapValue&&u===Rh.mapValue)return 0;if(o===Rh.mapValue)return 1;if(u===Rh.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=u.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=zm(d[v],_[v]);if(T!==0)return T;const w=ko(h[d[v]],m[_[v]]);if(w!==0)return w}return Ot(d.length,_.length)}(n.mapValue,t.mapValue);default:throw At()}}function cb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ot(n,t);const e=hr(n),i=hr(t),a=Ot(e.seconds,i.seconds);return a!==0?a:Ot(e.nanos,i.nanos)}function hb(n,t){const e=n.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const o=ko(e[a],i[a]);if(o)return o}return Ot(e.length,i.length)}function No(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=hr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return fr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return vt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",a=!0;for(const o of e.values||[])a?a=!1:i+=",",i+=Bm(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",o=!0;for(const u of i)o?o=!1:a+=",",a+=`${u}:${Bm(e.fields[u])}`;return a+"}"}(n.mapValue):At()}function Gh(n){switch(dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Uf(n);return t?16+Gh(t):16;case 5:return 2*n.stringValue.length;case 6:return fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+Gh(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return _r(i.fields,(o,u)=>{a+=o.length+Gh(u)}),a}(n.mapValue);default:throw At()}}function Hm(n){return!!n&&"integerValue"in n}function Tp(n){return!!n&&"arrayValue"in n}function fb(n){return!!n&&"nullValue"in n}function db(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kh(n){return!!n&&"mapValue"in n}function mC(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[XT])===null||e===void 0?void 0:e.stringValue)===$T}function vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return _r(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=vu(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=vu(n.arrayValue.values[e]);return t}return Object.assign({},n)}function pC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Kh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=vu(e)}setAll(t){let e=We.emptyPath(),i={},a=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,a),i={},a=[],e=h.popLast()}u?i[h.lastSegment()]=vu(u):a.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,a)}delete(t){const e=this.field(t.popLast());Kh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Oi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];Kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){_r(e,(a,o)=>t[a]=o);for(const a of i)delete t[a]}clone(){return new _n(vu(this.value))}}function ZT(n){const t=[];return _r(n.fields,(e,i)=>{const a=new We([e]);if(Kh(i)){const o=ZT(i.mapValue).fields;if(o.length===0)t.push(a);else for(const u of o)t.push(a.child(u))}else t.push(a)}),new Dn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,e,i,a,o,u,h){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(t){return new rn(t,0,wt.min(),wt.min(),wt.min(),_n.empty(),0)}static newFoundDocument(t,e,i,a){return new rn(t,1,e,wt.min(),i,a,0)}static newNoDocument(t,e){return new rn(t,2,e,wt.min(),wt.min(),_n.empty(),0)}static newUnknownDocument(t,e){return new rn(t,3,e,wt.min(),wt.min(),_n.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(t,e){this.position=t,this.inclusive=e}}function gb(n,t,e){let i=0;for(let a=0;a<n.position.length;a++){const o=t[a],u=n.position[a];if(o.field.isKeyField()?i=vt.comparator(vt.fromName(u.referenceValue),e.key):i=ko(u,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function mb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Oi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,e="asc"){this.field=t,this.dir=e}}function _C(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{}class Oe extends JT{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new vC(t,e,i):e==="array-contains"?new TC(t,i):e==="in"?new SC(t,i):e==="not-in"?new AC(t,i):e==="array-contains-any"?new wC(t,i):new Oe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new bC(t,i):new EC(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(ko(e,this.value)):e!==null&&dr(this.value)===dr(e)&&this.matchesComparison(ko(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends JT{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Mi(t,e)}matches(t){return tS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function tS(n){return n.op==="and"}function eS(n){return yC(n)&&tS(n)}function yC(n){for(const t of n.filters)if(t instanceof Mi)return!1;return!0}function jm(n){if(n instanceof Oe)return n.field.canonicalString()+n.op.toString()+No(n.value);if(eS(n))return n.filters.map(t=>jm(t)).join(",");{const t=n.filters.map(e=>jm(e)).join(",");return`${n.op}(${t})`}}function nS(n,t){return n instanceof Oe?function(i,a){return a instanceof Oe&&i.op===a.op&&i.field.isEqual(a.field)&&Oi(i.value,a.value)}(n,t):n instanceof Mi?function(i,a){return a instanceof Mi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,u,h)=>o&&nS(u,a.filters[h]),!0):!1}(n,t):void At()}function iS(n){return n instanceof Oe?function(e){return`${e.field.canonicalString()} ${e.op} ${No(e.value)}`}(n):n instanceof Mi?function(e){return e.op.toString()+" {"+e.getFilters().map(iS).join(" ,")+"}"}(n):"Filter"}class vC extends Oe{constructor(t,e,i){super(t,e,i),this.key=vt.fromName(i.referenceValue)}matches(t){const e=vt.comparator(t.key,this.key);return this.matchesComparison(e)}}class bC extends Oe{constructor(t,e){super(t,"in",e),this.keys=sS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class EC extends Oe{constructor(t,e){super(t,"not-in",e),this.keys=sS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function sS(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>vt.fromName(i.referenceValue))}class TC extends Oe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Tp(e)&&ku(e.arrayValue,this.value)}}class SC extends Oe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ku(this.value.arrayValue,e)}}class AC extends Oe{constructor(t,e){super(t,"not-in",e)}matches(t){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!ku(this.value.arrayValue,e)}}class wC extends Oe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Tp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,e=null,i=[],a=[],o=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function pb(n,t=null,e=[],i=[],a=null,o=null,u=null){return new RC(n,t,e,i,a,o,u)}function Sp(n){const t=It(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>jm(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Lf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>No(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>No(i)).join(",")),t.le=e}return t.le}function Ap(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!_C(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!nS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!mb(n.startAt,t.startAt)&&mb(n.endAt,t.endAt)}function Fm(n){return vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,e=null,i=[],a=[],o=null,u="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function IC(n,t,e,i,a,o,u,h){return new zf(n,t,e,i,a,o,u,h)}function wp(n){return new zf(n)}function _b(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CC(n){return n.collectionGroup!==null}function bu(n){const t=It(n);if(t.he===null){t.he=[];const e=new Set;for(const o of t.explicitOrderBy)t.he.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Ne(We.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.he.push(new cf(o,i))}),e.has(We.keyField().canonicalString())||t.he.push(new cf(We.keyField(),i))}return t.he}function Ri(n){const t=It(n);return t.Pe||(t.Pe=xC(t,bu(n))),t.Pe}function xC(n,t){if(n.limitType==="F")return pb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new cf(a.field,o)});const e=n.endAt?new uf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new uf(n.startAt.position,n.startAt.inclusive):null;return pb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function qm(n,t,e){return new zf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Bf(n,t){return Ap(Ri(n),Ri(t))&&n.limitType===t.limitType}function rS(n){return`${Sp(Ri(n))}|lt:${n.limitType}`}function Eo(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>iS(a)).join(", ")}]`),Lf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>No(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>No(a)).join(",")),`Target(${i})`}(Ri(n))}; limitType=${n.limitType})`}function Hf(n,t){return t.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):vt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,a){for(const o of bu(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,t)&&function(i,a){return!(i.startAt&&!function(u,h,d){const m=gb(u,h,d);return u.inclusive?m<=0:m<0}(i.startAt,bu(i),a)||i.endAt&&!function(u,h,d){const m=gb(u,h,d);return u.inclusive?m>=0:m>0}(i.endAt,bu(i),a))}(n,t)}function DC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aS(n){return(t,e)=>{let i=!1;for(const a of bu(n)){const o=OC(a,t,e);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function OC(n,t,e){const i=n.field.isKeyField()?vt.comparator(t.key,e.key):function(o,u,h){const d=u.data.field(o),m=h.data.field(o);return d!==null&&m!==null?ko(d,m):At()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],t))return void(a[o]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){_r(this.inner,(e,i)=>{for(const[a,o]of i)t(a,o)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new he(vt.comparator);function gs(){return MC}const oS=new he(vt.comparator);function cu(...n){let t=oS;for(const e of n)t=t.insert(e.key,e);return t}function lS(n){let t=oS;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ca(){return Eu()}function uS(){return Eu()}function Eu(){return new Ta(n=>n.toString(),(n,t)=>n.isEqual(t))}const kC=new he(vt.comparator),NC=new Ne(vt.comparator);function Vt(...n){let t=NC;for(const e of n)t=t.add(e);return t}const PC=new Ne(Ot);function VC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(t)?"-0":t}}function cS(n){return{integerValue:""+n}}function LC(n,t){return uC(t)?cS(t):Rp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function UC(n,t,e){return n instanceof hf?function(a,o){const u={fields:{[YT]:{stringValue:KT},[WT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Ep(o)&&(o=Uf(o)),o&&(u.fields[QT]=o),{mapValue:u}}(e,t):n instanceof Nu?fS(n,t):n instanceof Pu?dS(n,t):function(a,o){const u=hS(a,o),h=yb(u)+yb(a.Ie);return Hm(u)&&Hm(a.Ie)?cS(h):Rp(a.serializer,h)}(n,t)}function zC(n,t,e){return n instanceof Nu?fS(n,t):n instanceof Pu?dS(n,t):e}function hS(n,t){return n instanceof ff?function(i){return Hm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class hf extends jf{}class Nu extends jf{constructor(t){super(),this.elements=t}}function fS(n,t){const e=gS(t);for(const i of n.elements)e.some(a=>Oi(a,i))||e.push(i);return{arrayValue:{values:e}}}class Pu extends jf{constructor(t){super(),this.elements=t}}function dS(n,t){let e=gS(t);for(const i of n.elements)e=e.filter(a=>!Oi(a,i));return{arrayValue:{values:e}}}class ff extends jf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function yb(n){return ye(n.integerValue||n.doubleValue)}function gS(n){return Tp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BC(n,t){return n.field.isEqual(t.field)&&function(i,a){return i instanceof Nu&&a instanceof Nu||i instanceof Pu&&a instanceof Pu?Mo(i.elements,a.elements,Oi):i instanceof ff&&a instanceof ff?Oi(i.Ie,a.Ie):i instanceof hf&&a instanceof hf}(n.transform,t.transform)}class HC{constructor(t,e){this.version=t,this.transformResults=e}}class ni{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ni}static exists(t){return new ni(void 0,t)}static updateTime(t){return new ni(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ff{}function mS(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ip(n.key,ni.none()):new qu(n.key,n.data,ni.none());{const e=n.data,i=_n.empty();let a=new Ne(We.comparator);for(let o of t.fields)if(!a.has(o)){let u=e.field(o);u===null&&o.length>1&&(o=o.popLast(),u=e.field(o)),u===null?i.delete(o):i.set(o,u),a=a.add(o)}return new yr(n.key,i,new Dn(a.toArray()),ni.none())}}function jC(n,t,e){n instanceof qu?function(a,o,u){const h=a.value.clone(),d=bb(a.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,t,e):n instanceof yr?function(a,o,u){if(!Yh(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=bb(a.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(pS(a)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,t,e):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function Tu(n,t,e,i){return n instanceof qu?function(o,u,h,d){if(!Yh(o.precondition,u))return h;const m=o.value.clone(),_=Eb(o.fieldTransforms,d,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof yr?function(o,u,h,d){if(!Yh(o.precondition,u))return h;const m=Eb(o.fieldTransforms,d,u),_=u.data;return _.setAll(pS(o)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,u,h){return Yh(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,t,e)}function FC(n,t){let e=null;for(const i of n.fieldTransforms){const a=t.data.field(i.field),o=hS(i.transform,a||null);o!=null&&(e===null&&(e=_n.empty()),e.set(i.field,o))}return e||null}function vb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Mo(i,a,(o,u)=>BC(o,u))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class qu extends Ff{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class yr extends Ff{constructor(t,e,i,a,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pS(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function bb(n,t,e){const i=new Map;Yt(n.length===e.length);for(let a=0;a<e.length;a++){const o=n[a],u=o.transform,h=t.data.field(o.field);i.set(o.field,zC(u,h,e[a]))}return i}function Eb(n,t,e){const i=new Map;for(const a of n){const o=a.transform,u=e.data.field(a.field);i.set(a.field,UC(o,u,t))}return i}class Ip extends Ff{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qC extends Ff{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(t.key)&&jC(o,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Tu(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Tu(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=uS();return this.mutations.forEach(a=>{const o=t.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=e.has(a.key)?null:h;const d=mS(u,h);d!==null&&i.set(a.key,d),u.isValidDocument()||u.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Mo(this.mutations,t.mutations,(e,i)=>vb(e,i))&&Mo(this.baseMutations,t.baseMutations,(e,i)=>vb(e,i))}}class Cp{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){Yt(t.mutations.length===i.length);let a=function(){return kC}();const o=t.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,i[u].version);return new Cp(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,Bt;function QC(n){switch(n){case st.OK:return At();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return At()}}function _S(n){if(n===void 0)return ds("GRPC error has no .code"),st.UNKNOWN;switch(n){case Ae.OK:return st.OK;case Ae.CANCELLED:return st.CANCELLED;case Ae.UNKNOWN:return st.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return st.INTERNAL;case Ae.UNAVAILABLE:return st.UNAVAILABLE;case Ae.UNAUTHENTICATED:return st.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case Ae.NOT_FOUND:return st.NOT_FOUND;case Ae.ALREADY_EXISTS:return st.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return st.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case Ae.ABORTED:return st.ABORTED;case Ae.OUT_OF_RANGE:return st.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return st.UNIMPLEMENTED;case Ae.DATA_LOSS:return st.DATA_LOSS;default:return At()}}(Bt=Ae||(Ae={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new ar([4294967295,4294967295],0);function Tb(n){const t=HT().encode(n),e=new NT;return e.update(t),new Uint8Array(e.digest())}function Sb(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ar([e,i],0),new ar([a,o],0)]}class xp{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new hu(`Invalid padding: ${e}`);if(i<0)throw new hu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new hu(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=ar.fromNumber(this.Ee)}Ae(t,e,i){let a=t.add(e.multiply(ar.fromNumber(i)));return a.compare(WC)===1&&(a=new ar([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=Tb(t),[i,a]=Sb(e);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);if(!this.Re(u))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),u=new xp(o,a,e);return i.forEach(h=>u.insert(h)),u}insert(t){if(this.Ee===0)return;const e=Tb(t),[i,a]=Sb(e);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);this.Ve(u)}}Ve(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,e,i,a,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Gu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new qf(wt.min(),a,new he(Ot),gs(),Vt())}}class Gu{constructor(t,e,i,a,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Gu(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,e,i,a){this.me=t,this.removedTargetIds=e,this.key=i,this.fe=a}}class yS{constructor(t,e){this.targetId=t,this.ge=e}}class vS{constructor(t,e,i=Ze.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class Ab{constructor(){this.pe=0,this.ye=wb(),this.we=Ze.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Vt(),e=Vt(),i=Vt();return this.ye.forEach((a,o)=>{switch(o){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:At()}}),new Gu(this.we,this.Se,t,e,i)}Me(){this.be=!1,this.ye=wb()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Yt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class XC{constructor(t){this.ke=t,this.qe=new Map,this.Qe=gs(),this.$e=Ih(),this.Ue=Ih(),this.Ke=new he(Ot)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const i=this.He(e);switch(t.state){case 0:this.Je(e)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(e);break;case 3:this.Je(e)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),i.Ce(t.resumeToken));break;default:At()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((i,a)=>{this.Je(a)&&e(a)})}Ze(t){const e=t.targetId,i=t.ge.count,a=this.Xe(e);if(a){const o=a.target;if(Fm(o))if(i===0){const u=new vt(o.path);this.ze(e,u,rn.newNoDocument(u,wt.min()))}else Yt(i===1);else{const u=this.et(e);if(u!==i){const h=this.tt(t),d=h?this.nt(h,t,u):1;if(d!==0){this.Ye(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,m)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=e;let u,h;try{u=fr(i).toUint8Array()}catch(d){if(d instanceof GT)return Oo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new xp(u,a,o)}catch(d){return Oo(d instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ee===0?null:h}nt(t,e,i){return e.ge.count===i-this.st(t,e.targetId)?0:2}st(t,e){const i=this.ke.getRemoteKeysForTarget(e);let a=0;return i.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.ze(e,o,null),a++)}),a}ot(t){const e=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&Fm(h.target)){const d=new vt(h.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,rn.newNoDocument(d,t))}o.ve&&(e.set(u,o.Fe()),o.Me())}});let i=Vt();this.Ue.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const m=this.Xe(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(t));const a=new qf(t,e,this.Ke,this.Qe,i);return this.Qe=gs(),this.$e=Ih(),this.Ue=Ih(),this.Ke=new he(Ot),a}Ge(t,e){if(!this.Je(t))return;const i=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,i),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,i){if(!this.Je(t))return;const a=this.He(t);this.ut(t,e)?a.xe(e,1):a.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),i&&(this.Qe=this.Qe.insert(e,i))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Ab,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Ne(Ot),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Ne(Ot),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Ab),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Ih(){return new he(vt.comparator)}function wb(){return new he(vt.comparator)}const $C={asc:"ASCENDING",desc:"DESCENDING"},ZC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JC={and:"AND",or:"OR"};class tx{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Gm(n,t){return n.useProto3Json||Lf(t)?t:{value:t}}function df(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bS(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function ex(n,t){return df(n,t.toTimestamp())}function Ii(n){return Yt(!!n),wt.fromTimestamp(function(e){const i=hr(e);return new ke(i.seconds,i.nanos)}(n))}function Dp(n,t){return Km(n,t).canonicalString()}function Km(n,t){const e=function(a){return new ue(["projects",a.projectId,"databases",a.database])}(n).child("documents");return t===void 0?e:e.child(t)}function ES(n){const t=ue.fromString(n);return Yt(RS(t)),t}function Ym(n,t){return Dp(n.databaseId,t.path)}function _m(n,t){const e=ES(t);if(e.get(1)!==n.databaseId.projectId)throw new pt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new pt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new vt(SS(e))}function TS(n,t){return Dp(n.databaseId,t)}function nx(n){const t=ES(n);return t.length===4?ue.emptyPath():SS(t)}function Qm(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SS(n){return Yt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Rb(n,t,e){return{name:Ym(n,t),fields:e.value.mapValue.fields}}function ix(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:At()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Yt(_===void 0||typeof _=="string"),Ze.fromBase64String(_||"")):(Yt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Ze.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(m){const _=m.code===void 0?st.UNKNOWN:_S(m.code);return new pt(_,m.message||"")}(u);e=new vS(i,a,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=_m(n,i.document.name),o=Ii(i.document.updateTime),u=i.document.createTime?Ii(i.document.createTime):wt.min(),h=new _n({mapValue:{fields:i.document.fields}}),d=rn.newFoundDocument(a,o,u,h),m=i.targetIds||[],_=i.removedTargetIds||[];e=new Qh(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=_m(n,i.document),o=i.readTime?Ii(i.readTime):wt.min(),u=rn.newNoDocument(a,o),h=i.removedTargetIds||[];e=new Qh([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=_m(n,i.document),o=i.removedTargetIds||[];e=new Qh([],o,a,null)}else{if(!("filter"in t))return At();{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,u=new YC(a,o),h=i.targetId;e=new yS(h,u)}}return e}function sx(n,t){let e;if(t instanceof qu)e={update:Rb(n,t.key,t.value)};else if(t instanceof Ip)e={delete:Ym(n,t.key)};else if(t instanceof yr)e={update:Rb(n,t.key,t.data),updateMask:dx(t.fieldMask)};else{if(!(t instanceof qC))return At();e={verify:Ym(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,u){const h=u.transform;if(h instanceof hf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Nu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Pu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ff)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw At()}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:ex(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:At()}(n,t.precondition)),e}function rx(n,t){return n&&n.length>0?(Yt(t!==void 0),n.map(e=>function(a,o){let u=a.updateTime?Ii(a.updateTime):Ii(o);return u.isEqual(wt.min())&&(u=Ii(o)),new HC(u,a.transformResults||[])}(e,t))):[]}function ax(n,t){return{documents:[TS(n,t.path)]}}function ox(n,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=TS(n,a);const o=function(m){if(m.length!==0)return wS(Mi.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const u=function(m){if(m.length!==0)return m.map(_=>function(T){return{field:To(T.field),direction:cx(T.dir)}}(_))}(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=Gm(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{ht:e,parent:a}}function lx(n){let t=nx(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){Yt(i===1);const _=e.from[0];_.allDescendants?a=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(v){const T=AS(v);return T instanceof Mi&&eS(T)?T.getFilters():[T]}(e.where));let u=[];e.orderBy&&(u=function(v){return v.map(T=>function(x){return new cf(So(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(T))}(e.orderBy));let h=null;e.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,Lf(T)?null:T}(e.limit));let d=null;e.startAt&&(d=function(v){const T=!!v.before,w=v.values||[];return new uf(w,T)}(e.startAt));let m=null;return e.endAt&&(m=function(v){const T=!v.before,w=v.values||[];return new uf(w,T)}(e.endAt)),IC(t,a,u,o,h,"F",d,m)}function ux(n,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function AS(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=So(e.unaryFilter.field);return Oe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=So(e.unaryFilter.field);return Oe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=So(e.unaryFilter.field);return Oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=So(e.unaryFilter.field);return Oe.create(u,"!=",{nullValue:"NULL_VALUE"});default:return At()}}(n):n.fieldFilter!==void 0?function(e){return Oe.create(So(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Mi.create(e.compositeFilter.filters.map(i=>AS(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return At()}}(e.compositeFilter.op))}(n):At()}function cx(n){return $C[n]}function hx(n){return ZC[n]}function fx(n){return JC[n]}function To(n){return{fieldPath:n.canonicalString()}}function So(n){return We.fromServerFormat(n.fieldPath)}function wS(n){return n instanceof Oe?function(e){if(e.op==="=="){if(db(e.value))return{unaryFilter:{field:To(e.field),op:"IS_NAN"}};if(fb(e.value))return{unaryFilter:{field:To(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(db(e.value))return{unaryFilter:{field:To(e.field),op:"IS_NOT_NAN"}};if(fb(e.value))return{unaryFilter:{field:To(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(e.field),op:hx(e.op),value:e.value}}}(n):n instanceof Mi?function(e){const i=e.getFilters().map(a=>wS(a));return i.length===1?i[0]:{compositeFilter:{op:fx(e.op),filters:i}}}(n):At()}function dx(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function RS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t,e,i,a,o=wt.min(),u=wt.min(),h=Ze.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t){this.Tt=t}}function mx(n){const t=lx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Tn=new _x}addToCollectionParentIndex(t,e){return this.Tn.add(e),et.resolve()}getCollectionParents(t,e){return et.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return et.resolve()}deleteFieldIndex(t,e){return et.resolve()}deleteAllFieldIndexes(t){return et.resolve()}createTargetIndexes(t,e){return et.resolve()}getDocumentsMatchingTarget(t,e){return et.resolve(null)}getIndexType(t,e){return et.resolve(0)}getFieldIndexes(t,e){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,e){return et.resolve(cr.min())}getMinOffsetFromCollectionGroup(t,e){return et.resolve(cr.min())}updateCollectionGroup(t,e,i){return et.resolve()}updateIndexEntries(t,e){return et.resolve()}}class _x{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new Ne(ue.comparator),o=!a.has(i);return this.index[e]=a.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new Ne(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IS=41943040;class pn{static withCacheSize(t){return new pn(t,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(IS,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Po(0)}static Kn(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="LruGarbageCollector",yx=1048576;function xb([n,t],[e,i]){const a=Ot(n,e);return a===0?Ot(t,i):a}class vx{constructor(t){this.Hn=t,this.buffer=new Ne(xb),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();xb(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class bx{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){ht(Cb,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){jo(e)?ht(Cb,"Ignoring IndexedDB error during garbage collection: ",e):await Ho(e)}await this.er(3e5)})}}class Ex{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return et.resolve(Vf.ae);const i=new vx(e);return this.tr.forEachTarget(t,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(t,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.tr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(Ib)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ib):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let i,a,o,u,h,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(m=Date.now(),bo()<=Pt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function Tx(n,t){return new Ex(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.changes=new Ta(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?et.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Tu(i.mutation,a,Dn.empty(),ke.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const a=ca();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(o=>{let u=cu();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const i=ca();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const a=[];return i.forEach(o=>{e.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(t,a).next(o=>{o.forEach((u,h)=>{e.set(u,h)})})}computeViews(t,e,i,a){let o=gs();const u=Eu(),h=function(){return Eu()}();return e.forEach((d,m)=>{const _=i.get(m.key);a.has(m.key)&&(_===void 0||_.mutation instanceof yr)?o=o.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Tu(_.mutation,m,_.mutation.getFieldMask(),ke.now())):u.set(m.key,Dn.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,_)=>u.set(m,_)),e.forEach((m,_)=>{var v;return h.set(m,new Ax(_,(v=u.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Eu();let a=new he((u,h)=>u-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const h of u)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let _=i.get(d)||Dn.empty();_=h.applyToLocalView(m,_),i.set(d,_);const v=(a.get(h.batchId)||Vt()).add(d);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=uS();_.forEach(T=>{if(!o.has(T)){const w=mS(e.get(T),i.get(T));w!==null&&v.set(T,w),o=o.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(t,m,v))}return et.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(u){return vt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):CC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-o.size):et.resolve(ca());let h=Du,d=o;return u.next(m=>et.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?et.resolve():this.remoteDocumentCache.getEntry(t,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,Vt())).next(_=>({batchId:h,changes:lS(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vt(e)).next(i=>{let a=cu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const o=e.collectionGroup;let u=cu();return this.indexManager.getCollectionParents(t,o).next(h=>et.forEach(h,d=>{const m=function(v,T){return new zf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,a).next(_=>{_.forEach((v,T)=>{u=u.insert(v,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(t,e,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,a))).next(u=>{o.forEach((d,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,rn.newInvalidDocument(_)))});let h=cu();return u.forEach((d,m)=>{const _=o.get(d);_!==void 0&&Tu(_.mutation,m,Dn.empty(),ke.now()),Hf(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return et.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Ii(a.createTime)}}(e)),et.resolve()}getNamedQuery(t,e){return et.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(a){return{name:a.name,query:mx(a.bundledQuery),readTime:Ii(a.readTime)}}(e)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.overlays=new he(vt.comparator),this.Rr=new Map}getOverlay(t,e){return et.resolve(this.overlays.get(e))}getOverlays(t,e){const i=ca();return et.forEach(e,a=>this.getOverlay(t,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,o)=>{this.Et(t,e,o)}),et.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),et.resolve()}getOverlaysForCollection(t,e,i){const a=ca(),o=e.length+1,u=new vt(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&a.set(d.getKey(),d)}return et.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let o=new he((m,_)=>m-_);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=ca(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=ca(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=a)););return et.resolve(h)}Et(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new KC(e,i));let o=this.Rr.get(e);o===void 0&&(o=Vt(),this.Rr.set(e,o)),this.Rr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return et.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.Vr=new Ne(He.mr),this.gr=new Ne(He.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const i=new He(t,e);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.wr(new He(t,e))}Sr(t,e){t.forEach(i=>this.removeReference(i,e))}br(t){const e=new vt(new ue([])),i=new He(e,t),a=new He(e,t+1),o=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new vt(new ue([])),i=new He(e,t),a=new He(e,t+1);let o=Vt();return this.gr.forEachInRange([i,a],u=>{o=o.add(u.key)}),o}containsKey(t){const e=new He(t,0),i=this.Vr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class He{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return vt.comparator(t.key,e.key)||Ot(t.Cr,e.Cr)}static pr(t,e){return Ot(t.Cr,e.Cr)||vt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Ne(He.mr)}checkEmpty(t){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new GC(o,e,i,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new He(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return et.resolve(u)}lookupMutationBatch(t,e){return et.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.Nr(i),o=a<0?0:a;return et.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?bp:this.Fr-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new He(e,0),a=new He(e,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,a],u=>{const h=this.Or(u.Cr);o.push(h)}),et.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ne(Ot);return e.forEach(a=>{const o=new He(a,0),u=new He(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{i=i.add(h.Cr)})}),et.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let o=i;vt.isDocumentKey(o)||(o=o.child(""));const u=new He(new vt(o),0);let h=new Ne(Ot);return this.Mr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(d.Cr)),!0)},u),et.resolve(this.Br(h))}Br(t){const e=[];return t.forEach(i=>{const a=this.Or(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){Yt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return et.forEach(e.mutations,a=>{const o=new He(a.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,e){const i=new He(e,0),a=this.Mr.firstAfterOrEqual(i);return et.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,et.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.kr=t,this.docs=function(){return new he(vt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),o=a?a.size:0,u=this.kr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return et.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(e))}getEntries(t,e){let i=gs();return e.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():rn.newInvalidDocument(a))}),et.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let o=gs();const u=e.path,h=new vt(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||rC(sC(_),i)<=0||(a.has(_.key)||Hf(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return et.resolve(o)}getAllFromCollectionGroup(t,e,i,a){At()}qr(t,e){return et.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Ox(this)}getSize(t){return et.resolve(this.size)}}class Ox extends Sx{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Ir.addEntry(t,a)):this.Ir.removeEntry(i)}),et.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t){this.persistence=t,this.Qr=new Ta(e=>Sp(e),Ap),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Op,this.targetCount=0,this.Kr=Po.Un()}forEachTarget(t,e){return this.Qr.forEach((i,a)=>e(a)),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$r&&(this.$r=e),et.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new Po(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,et.resolve()}updateTargetData(t,e){return this.zn(e),et.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,e,i){let a=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)}),et.waitFor(o).next(()=>a)}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,e){const i=this.Qr.get(e)||null;return et.resolve(i)}addMatchingKeys(t,e,i){return this.Ur.yr(e,i),et.resolve()}removeMatchingKeys(t,e,i){this.Ur.Sr(e,i);const a=this.persistence.referenceDelegate,o=[];return a&&e.forEach(u=>{o.push(a.markPotentiallyOrphaned(t,u))}),et.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),et.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ur.vr(e);return et.resolve(i)}containsKey(t,e){return et.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new Vf(0),this.zr=!1,this.zr=!0,this.jr=new Cx,this.referenceDelegate=t(this),this.Hr=new Mx(this),this.indexManager=new px,this.remoteDocumentCache=function(a){return new Dx(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new gx(e),this.Yr=new Rx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ix,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Wr[t.toKey()];return i||(i=new xx(e,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const a=new kx(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(t,e){return et.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,e)))}}class kx extends oC{constructor(t){super(),this.currentSequenceNumber=t}}class Mp{constructor(t){this.persistence=t,this.ti=new Op,this.ni=null}static ri(t){return new Mp(t)}get ii(){if(this.ni)return this.ni;throw At()}addReference(t,e,i){return this.ti.addReference(i,e),this.ii.delete(i.toString()),et.resolve()}removeReference(t,e,i){return this.ti.removeReference(i,e),this.ii.add(i.toString()),et.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),et.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.ii,i=>{const a=vt.fromPath(i);return this.si(t,a).next(o=>{o||e.removeEntry(a,wt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(i=>{i?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return et.or([()=>et.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class gf{constructor(t,e){this.persistence=t,this.oi=new Ta(i=>cC(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=Tx(this,e)}static ri(t,e){return new gf(t,e)}Zr(){}Xr(t){return et.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}sr(t){let e=0;return this.rr(t,i=>{e++}).next(()=>e)}rr(t,e){return et.forEach(this.oi,(i,a)=>this.ar(t,i,a).next(o=>o?et.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(t,u=>this.ar(t,u,e).next(h=>{h||(i++,o.removeEntry(u,wt.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),et.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),et.resolve()}removeReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),et.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),et.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Gh(t.data.value)),e}ar(t,e,i){return et.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.oi.get(e);return et.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Hi=i,this.Ji=a}static Yi(t,e){let i=Vt(),a=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new kp(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return C1()?8:lC(on())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,i,a){const o={result:null};return this.rs(t,e).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(t,e,a,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new Nx;return this._s(t,e,u).next(h=>{if(o.result=h,this.Xi)return this.us(t,e,u,h.size)})}).next(()=>o.result)}us(t,e,i,a){return i.documentReadCount<this.es?(bo()<=Pt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Eo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),et.resolve()):(bo()<=Pt.DEBUG&&ht("QueryEngine","Query:",Eo(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(bo()<=Pt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Eo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ri(e))):et.resolve())}rs(t,e){if(_b(e))return et.resolve(null);let i=Ri(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=qm(e,null,"F"),i=Ri(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const u=Vt(...o);return this.ns.getDocuments(t,u).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.cs(e,h);return this.ls(e,m,u,d.readTime)?this.rs(t,qm(e,null,"F")):this.hs(t,m,e,d)}))})))}ss(t,e,i,a){return _b(e)||a.isEqual(wt.min())?et.resolve(null):this.ns.getDocuments(t,i).next(o=>{const u=this.cs(e,o);return this.ls(e,u,i,a)?et.resolve(null):(bo()<=Pt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Eo(e)),this.hs(t,u,e,iC(a,Du)).next(h=>h))})}cs(t,e){let i=new Ne(aS(t));return e.forEach((a,o)=>{Hf(t,o)&&(i=i.add(o))}),i}ls(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(t,e,i){return bo()<=Pt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Eo(e)),this.ns.getDocumentsMatchingQuery(t,e,cr.min(),i)}hs(t,e,i,a){return this.ns.getDocumentsMatchingQuery(t,i,a).next(o=>(e.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",Vx=3e8;class Lx{constructor(t,e,i,a){this.persistence=t,this.Ps=e,this.serializer=a,this.Ts=new he(Ot),this.Is=new Ta(o=>Sp(o),Ap),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wx(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function Ux(n,t,e,i){return new Lx(n,t,e,i)}async function xS(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,e.As(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let d=Vt();for(const m of a){u.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(i,d).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:h}))})})}function zx(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),o=e.ds.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,T=v.keys();let w=et.resolve();return T.forEach(x=>{w=w.next(()=>_.getEntry(d,x)).next(V=>{const M=m.docVersions.get(x);Yt(M!==null),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),_.addEntry(V)))})}),w.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Vt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function DS(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function Bx(n,t){const e=It(n),i=t.snapshotVersion;let a=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=e.ds.newChangeBuffer({trackRemovals:!0});a=e.Ts;const h=[];t.targetChanges.forEach((_,v)=>{const T=a.get(v);if(!T)return;h.push(e.Hr.removeMatchingKeys(o,_.removedDocuments,v).next(()=>e.Hr.addMatchingKeys(o,_.addedDocuments,v)));let w=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?w=w.withResumeToken(Ze.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),a=a.insert(v,w),function(V,M,K){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Vx?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(T,w,_)&&h.push(e.Hr.updateTargetData(o,w))});let d=gs(),m=Vt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(Hx(o,u,t.documentUpdates).next(_=>{d=_.Vs,m=_.fs})),!i.isEqual(wt.min())){const _=e.Hr.getLastRemoteSnapshotVersion(o).next(v=>e.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return et.waitFor(h).next(()=>u.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.Ts=a,o))}function Hx(n,t,e){let i=Vt(),a=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let u=gs();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(wt.min())?(t.removeEntry(h,d.readTime),u=u.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),u=u.insert(h,d)):ht(Np,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Vs:u,fs:a}})}function jx(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=bp),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Fx(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Hr.getTargetData(i,t).next(o=>o?(a=o,et.resolve(a)):e.Hr.allocateTargetId(i).next(u=>(a=new tr(t,u,"TargetPurposeListen",i.currentSequenceNumber),e.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(i.targetId,i),e.Is.set(t,i.targetId)),i})}async function Wm(n,t,e){const i=It(n),a=i.Ts.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!jo(u))throw u;ht(Np,`Failed to update sequence numbers for target ${t}: ${u}`)}i.Ts=i.Ts.remove(t),i.Is.delete(a.target)}function Db(n,t,e){const i=It(n);let a=wt.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",u=>function(d,m,_){const v=It(d),T=v.Is.get(_);return T!==void 0?et.resolve(v.Ts.get(T)):v.Hr.getTargetData(m,_)}(i,u,Ri(t)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,t,e?a:wt.min(),e?o:Vt())).next(h=>(qx(i,DC(t),h),{documents:h,gs:o})))}function qx(n,t,e){let i=n.Es.get(t)||wt.min();e.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(t,i)}class Ob{constructor(){this.activeTargetIds=VC()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Gx{constructor(){this.ho=new Ob,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,i){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Ob,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="ConnectivityMonitor";class kb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ht(Mb,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){ht(Mb,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Xm(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",Yx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qx{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===of?`project_id=${i}`:`project_id=${i}&database_id=${a}`}So(t,e,i,a,o){const u=Xm(),h=this.bo(t,e.toUriEncodedString());ht(ym,`Sending RPC '${t}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,a,o),this.vo(t,h,d,i).then(m=>(ht(ym,`Received RPC '${t}' ${u}: `,m),m),m=>{throw Oo(ym,`RPC '${t}' ${u} failed with error: `,m,"url: ",h,"request:",i),m})}Co(t,e,i,a,o,u){return this.So(t,e,i,a,o)}Do(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}bo(t,e){const i=Yx[t];return`${this.po}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class Xx extends Qx{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,i,a){const o=Xm();return new Promise((u,h)=>{const d=new PT;d.setWithCredentials(!0),d.listenOnce(VT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case qh.NO_ERROR:const _=d.getResponseJson();ht(nn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(_)),u(_);break;case qh.TIMEOUT:ht(nn,`RPC '${t}' ${o} timed out`),h(new pt(st.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const v=d.getStatus();if(ht(nn,`RPC '${t}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const w=T==null?void 0:T.error;if(w&&w.status&&w.message){const x=function(M){const K=M.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(K)>=0?K:st.UNKNOWN}(w.status);h(new pt(x,w.message))}else h(new pt(st.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new pt(st.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{ht(nn,`RPC '${t}' ${o} completed.`)}});const m=JSON.stringify(a);ht(nn,`RPC '${t}' ${o} sending request:`,a),d.send(e,"POST",m,i,15)})}Wo(t,e,i){const a=Xm(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=zT(),h=UT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ht(nn,`Creating RPC '${t}' stream ${a}: ${_}`,d);const v=u.createWebChannel(_,d);let T=!1,w=!1;const x=new Wx({Fo:M=>{w?ht(nn,`Not sending because RPC '${t}' stream ${a} is closed:`,M):(T||(ht(nn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),ht(nn,`RPC '${t}' stream ${a} sending:`,M),v.send(M))},Mo:()=>v.close()}),V=(M,K,$)=>{M.listen(K,Z=>{try{$(Z)}catch(rt){setTimeout(()=>{throw rt},0)}})};return V(v,uu.EventType.OPEN,()=>{w||(ht(nn,`RPC '${t}' stream ${a} transport opened.`),x.Qo())}),V(v,uu.EventType.CLOSE,()=>{w||(w=!0,ht(nn,`RPC '${t}' stream ${a} transport closed`),x.Uo())}),V(v,uu.EventType.ERROR,M=>{w||(w=!0,Oo(nn,`RPC '${t}' stream ${a} transport errored:`,M),x.Uo(new pt(st.UNAVAILABLE,"The operation could not be completed")))}),V(v,uu.EventType.MESSAGE,M=>{var K;if(!w){const $=M.data[0];Yt(!!$);const Z=$,rt=(Z==null?void 0:Z.error)||((K=Z[0])===null||K===void 0?void 0:K.error);if(rt){ht(nn,`RPC '${t}' stream ${a} received error:`,rt);const nt=rt.status;let ct=function(I){const k=Ae[I];if(k!==void 0)return _S(k)}(nt),N=rt.message;ct===void 0&&(ct=st.INTERNAL,N="Unknown error status: "+nt+" with message "+rt.message),w=!0,x.Uo(new pt(ct,N)),v.close()}else ht(nn,`RPC '${t}' stream ${a} received:`,$),x.Ko($)}}),V(h,LT.STAT_EVENT,M=>{M.stat===Um.PROXY?ht(nn,`RPC '${t}' stream ${a} detected buffering proxy`):M.stat===Um.NOPROXY&&ht(nn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n){return new tx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(t,e,i=1e3,a=1.5,o=6e4){this.Ti=t,this.timerId=e,this.Go=i,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,e-i);a>0&&ht("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="PersistentStream";class MS{constructor(t,e,i,a,o,u,h,d){this.Ti=t,this.n_=i,this.r_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new OS(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===st.RESOURCE_EXHAUSTED?(ds(e.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===e&&this.V_(i,a)},i=>{t(()=>{const a=new pt(st.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(t,e){const i=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return ht(Nb,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(ht(Nb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $x extends MS{constructor(t,e,i,a,o,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,u),this.serializer=o}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=ix(this.serializer,t),i=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Ii(u.readTime):wt.min()}(t);return this.listener.p_(e,i)}y_(t){const e={};e.database=Qm(this.serializer),e.addTarget=function(o,u){let h;const d=u.target;if(h=Fm(d)?{documents:ax(o,d)}:{query:ox(o,d).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=bS(o,u.resumeToken);const m=Gm(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(wt.min())>0){h.readTime=df(o,u.snapshotVersion.toTimestamp());const m=Gm(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=ux(this.serializer,t);i&&(e.labels=i),this.I_(e)}w_(t){const e={};e.database=Qm(this.serializer),e.removeTarget=t,this.I_(e)}}class Zx extends MS{constructor(t,e,i,a,o,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=rx(t.writeResults,t.commitTime),i=Ii(t.commitTime);return this.listener.v_(i,e)}C_(){const t={};t.database=Qm(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>sx(this.serializer,i))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{}class tD extends Jx{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new pt(st.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(t,Km(e,i),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pt(st.UNKNOWN,o.toString())})}Co(t,e,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(t,Km(e,i),a,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pt(st.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class eD{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ds(e),this.N_=!1):ht("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class nD{constructor(t,e,i,a,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{i.enqueueAndForget(async()=>{Sa(this)&&(ht(pa,"Restarting streams for network reachability change."),await async function(d){const m=It(d);m.W_.add(4),await Ku(m),m.j_.set("Unknown"),m.W_.delete(4),await Kf(m)}(this))})}),this.j_=new eD(i,a)}}async function Kf(n){if(Sa(n))for(const t of n.G_)await t(!0)}async function Ku(n){for(const t of n.G_)await t(!1)}function kS(n,t){const e=It(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),Up(e)?Lp(e):Fo(e).c_()&&Vp(e,t))}function Pp(n,t){const e=It(n),i=Fo(e);e.K_.delete(t),i.c_()&&NS(e,t),e.K_.size===0&&(i.c_()?i.P_():Sa(e)&&e.j_.set("Unknown"))}function Vp(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Fo(n).y_(t)}function NS(n,t){n.H_.Ne(t),Fo(n).w_(t)}function Lp(n){n.H_=new XC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Fo(n).start(),n.j_.B_()}function Up(n){return Sa(n)&&!Fo(n).u_()&&n.K_.size>0}function Sa(n){return It(n).W_.size===0}function PS(n){n.H_=void 0}async function iD(n){n.j_.set("Online")}async function sD(n){n.K_.forEach((t,e)=>{Vp(n,t)})}async function rD(n,t){PS(n),Up(n)?(n.j_.q_(t),Lp(n)):n.j_.set("Unknown")}async function aD(n,t,e){if(n.j_.set("Online"),t instanceof vS&&t.state===2&&t.cause)try{await async function(a,o){const u=o.cause;for(const h of o.targetIds)a.K_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.K_.delete(h),a.H_.removeTarget(h))}(n,t)}catch(i){ht(pa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await mf(n,i)}else if(t instanceof Qh?n.H_.We(t):t instanceof yS?n.H_.Ze(t):n.H_.je(t),!e.isEqual(wt.min()))try{const i=await DS(n.localStore);e.compareTo(i)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.K_.get(m);_&&o.K_.set(m,_.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,m)=>{const _=o.K_.get(d);if(!_)return;o.K_.set(d,_.withResumeToken(Ze.EMPTY_BYTE_STRING,_.snapshotVersion)),NS(o,d);const v=new tr(_.target,d,m,_.sequenceNumber);Vp(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ht(pa,"Failed to raise snapshot:",i),await mf(n,i)}}async function mf(n,t,e){if(!jo(t))throw t;n.W_.add(1),await Ku(n),n.j_.set("Offline"),e||(e=()=>DS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(pa,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Kf(n)})}function VS(n,t){return t().catch(e=>mf(n,e,t))}async function Yf(n){const t=It(n),e=gr(t);let i=t.U_.length>0?t.U_[t.U_.length-1].batchId:bp;for(;oD(t);)try{const a=await jx(t.localStore,i);if(a===null){t.U_.length===0&&e.P_();break}i=a.batchId,lD(t,a)}catch(a){await mf(t,a)}LS(t)&&US(t)}function oD(n){return Sa(n)&&n.U_.length<10}function lD(n,t){n.U_.push(t);const e=gr(n);e.c_()&&e.S_&&e.b_(t.mutations)}function LS(n){return Sa(n)&&!gr(n).u_()&&n.U_.length>0}function US(n){gr(n).start()}async function uD(n){gr(n).C_()}async function cD(n){const t=gr(n);for(const e of n.U_)t.b_(e.mutations)}async function hD(n,t,e){const i=n.U_.shift(),a=Cp.from(i,t,e);await VS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Yf(n)}async function fD(n,t){t&&gr(n).S_&&await async function(i,a){if(function(u){return QC(u)&&u!==st.ABORTED}(a.code)){const o=i.U_.shift();gr(i).h_(),await VS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Yf(i)}}(n,t),LS(n)&&US(n)}async function Pb(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),ht(pa,"RemoteStore received new credentials");const i=Sa(e);e.W_.add(3),await Ku(e),i&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Kf(e)}async function dD(n,t){const e=It(n);t?(e.W_.delete(2),await Kf(e)):t||(e.W_.add(2),await Ku(e),e.j_.set("Unknown"))}function Fo(n){return n.J_||(n.J_=function(e,i,a){const o=It(e);return o.M_(),new $x(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:iD.bind(null,n),No:sD.bind(null,n),Lo:rD.bind(null,n),p_:aD.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),Up(n)?Lp(n):n.j_.set("Unknown")):(await n.J_.stop(),PS(n))})),n.J_}function gr(n){return n.Y_||(n.Y_=function(e,i,a){const o=It(e);return o.M_(),new Zx(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:uD.bind(null,n),Lo:fD.bind(null,n),D_:cD.bind(null,n),v_:hD.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await Yf(n)):(await n.Y_.stop(),n.U_.length>0&&(ht(pa,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,e,i,a,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,o){const u=Date.now()+i,h=new zp(t,e,u,a,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(st.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(n,t){if(ds("AsyncQueue",`${t}: ${n}`),jo(n))return new pt(st.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(t){return new wo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||vt.comparator(e.key,i.key):(e,i)=>vt.comparator(e.key,i.key),this.keyedMap=cu(),this.sortedSet=new he(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof wo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new wo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Z_=new he(vt.comparator)}track(t){const e=t.doc.key,i=this.Z_.get(e);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(e):t.type===1&&i.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):At():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Vo{constructor(t,e,i,a,o,u,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,a,o){const u=[];return e.forEach(h=>{u.push({type:0,doc:h})}),new Vo(t,e,wo.emptySet(e),u,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class mD{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,i){const a=It(e),o=a.queries;a.queries=Lb(),o.forEach((u,h)=>{for(const d of h.ta)d.onError(i)})})(this,new pt(st.ABORTED,"Firestore shutting down"))}}function Lb(){return new Ta(n=>rS(n),Bf)}async function zS(n,t){const e=It(n);let i=3;const a=t.query;let o=e.queries.get(a);o?!o.na()&&t.ra()&&(i=2):(o=new gD,i=t.ra()?0:1);try{switch(i){case 0:o.ea=await e.onListen(a,!0);break;case 1:o.ea=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(u){const h=Bp(u,`Initialization of query '${Eo(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,o),o.ta.push(t),t.sa(e.onlineState),o.ea&&t.oa(o.ea)&&Hp(e)}async function BS(n,t){const e=It(n),i=t.query;let a=3;const o=e.queries.get(i);if(o){const u=o.ta.indexOf(t);u>=0&&(o.ta.splice(u,1),o.ta.length===0?a=t.ra()?0:1:!o.na()&&t.ra()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function pD(n,t){const e=It(n);let i=!1;for(const a of t){const o=a.query,u=e.queries.get(o);if(u){for(const h of u.ta)h.oa(a)&&(i=!0);u.ea=a}}i&&Hp(e)}function _D(n,t,e){const i=It(n),a=i.queries.get(t);if(a)for(const o of a.ta)o.onError(e);i.queries.delete(t)}function Hp(n){n.ia.forEach(t=>{t.next()})}var $m,Ub;(Ub=$m||($m={}))._a="default",Ub.Cache="cache";class HS{constructor(t,e,i){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Vo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const i=e!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Vo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.key=t}}class FS{constructor(t){this.key=t}}class yD{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Vt(),this.mutatedKeys=Vt(),this.ya=aS(t),this.wa=new wo(this.ya)}get Sa(){return this.fa}ba(t,e){const i=e?e.Da:new Vb,a=e?e.wa:this.wa;let o=e?e.mutatedKeys:this.mutatedKeys,u=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((_,v)=>{const T=a.get(_),w=Hf(this.query,v)?v:null,x=!!T&&this.mutatedKeys.has(T.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;T&&w?T.data.isEqual(w.data)?x!==V&&(i.track({type:3,doc:w}),M=!0):this.va(T,w)||(i.track({type:2,doc:w}),M=!0,(d&&this.ya(w,d)>0||m&&this.ya(w,m)<0)&&(h=!0)):!T&&w?(i.track({type:0,doc:w}),M=!0):T&&!w&&(i.track({type:1,doc:T}),M=!0,(d||m)&&(h=!0)),M&&(w?(u=u.add(w),o=V?o.add(_):o.delete(_)):(u=u.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{wa:u,Da:i,ls:h,mutatedKeys:o}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const o=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const u=t.Da.X_();u.sort((_,v)=>function(w,x){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return V(w)-V(x)}(_.type,v.type)||this.ya(_.doc,v.doc)),this.Ca(i),a=a!=null&&a;const h=e&&!a?this.Fa():[],d=this.pa.size===0&&this.current&&!a?1:0,m=d!==this.ga;return this.ga=d,u.length!==0||m?{snapshot:new Vo(this.query,t.wa,o,u,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Vb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Vt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const e=[];return t.forEach(i=>{this.pa.has(i)||e.push(new FS(i))}),this.pa.forEach(i=>{t.has(i)||e.push(new jS(i))}),e}Oa(t){this.fa=t.gs,this.pa=Vt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const jp="SyncEngine";class vD{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class bD{constructor(t){this.key=t,this.Ba=!1}}class ED{constructor(t,e,i,a,o,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ta(h=>rS(h),Bf),this.qa=new Map,this.Qa=new Set,this.$a=new he(vt.comparator),this.Ua=new Map,this.Ka=new Op,this.Wa={},this.Ga=new Map,this.za=Po.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function TD(n,t,e=!0){const i=WS(n);let a;const o=i.ka.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await qS(i,t,e,!0),a}async function SD(n,t){const e=WS(n);await qS(e,t,!0,!1)}async function qS(n,t,e,i){const a=await Fx(n.localStore,Ri(t)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await AD(n,t,o,u==="current",a.resumeToken)),n.isPrimaryClient&&e&&kS(n.remoteStore,a),h}async function AD(n,t,e,i,a){n.Ha=(v,T,w)=>async function(V,M,K,$){let Z=M.view.ba(K);Z.ls&&(Z=await Db(V.localStore,M.query,!1).then(({documents:N})=>M.view.ba(N,Z)));const rt=$&&$.targetChanges.get(M.targetId),nt=$&&$.targetMismatches.get(M.targetId)!=null,ct=M.view.applyChanges(Z,V.isPrimaryClient,rt,nt);return Bb(V,M.targetId,ct.Ma),ct.snapshot}(n,v,T,w);const o=await Db(n.localStore,t,!0),u=new yD(t,o.gs),h=u.ba(o.documents),d=Gu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,d);Bb(n,e,m.Ma);const _=new vD(t,e,u);return n.ka.set(t,_),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),m.snapshot}async function wD(n,t,e){const i=It(n),a=i.ka.get(t),o=i.qa.get(a.targetId);if(o.length>1)return i.qa.set(a.targetId,o.filter(u=>!Bf(u,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Wm(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Pp(i.remoteStore,a.targetId),Zm(i,a.targetId)}).catch(Ho)):(Zm(i,a.targetId),await Wm(i.localStore,a.targetId,!0))}async function RD(n,t){const e=It(n),i=e.ka.get(t),a=e.qa.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Pp(e.remoteStore,i.targetId))}async function ID(n,t,e){const i=ND(n);try{const a=await function(u,h){const d=It(u),m=ke.now(),_=h.reduce((w,x)=>w.add(x.key),Vt());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let x=gs(),V=Vt();return d.ds.getEntries(w,_).next(M=>{x=M,x.forEach((K,$)=>{$.isValidDocument()||(V=V.add(K))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,x)).next(M=>{v=M;const K=[];for(const $ of h){const Z=FC($,v.get($.key).overlayedDocument);Z!=null&&K.push(new yr($.key,Z,ZT(Z.value.mapValue),ni.exists(!0)))}return d.mutationQueue.addMutationBatch(w,m,K,h)}).next(M=>{T=M;const K=M.applyToLocalDocumentSet(v,V);return d.documentOverlayCache.saveOverlays(w,M.batchId,K)})}).then(()=>({batchId:T.batchId,changes:lS(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(u,h,d){let m=u.Wa[u.currentUser.toKey()];m||(m=new he(Ot)),m=m.insert(h,d),u.Wa[u.currentUser.toKey()]=m}(i,a.batchId,e),await Yu(i,a.changes),await Yf(i.remoteStore)}catch(a){const o=Bp(a,"Failed to persist write");e.reject(o)}}async function GS(n,t){const e=It(n);try{const i=await Bx(e.localStore,t);t.targetChanges.forEach((a,o)=>{const u=e.Ua.get(o);u&&(Yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?Yt(u.Ba):a.removedDocuments.size>0&&(Yt(u.Ba),u.Ba=!1))}),await Yu(e,i,t)}catch(i){await Ho(i)}}function zb(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.ka.forEach((o,u)=>{const h=u.view.sa(t);h.snapshot&&a.push(h.snapshot)}),function(u,h){const d=It(u);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const T of v.ta)T.sa(h)&&(m=!0)}),m&&Hp(d)}(i.eventManager,t),a.length&&i.La.p_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function CD(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Ua.get(t),o=a&&a.key;if(o){let u=new he(vt.comparator);u=u.insert(o,rn.newNoDocument(o,wt.min()));const h=Vt().add(o),d=new qf(wt.min(),new Map,new he(Ot),u,h);await GS(i,d),i.$a=i.$a.remove(o),i.Ua.delete(t),Fp(i)}else await Wm(i.localStore,t,!1).then(()=>Zm(i,t,e)).catch(Ho)}async function xD(n,t){const e=It(n),i=t.batch.batchId;try{const a=await zx(e.localStore,t);YS(e,i,null),KS(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Yu(e,a)}catch(a){await Ho(a)}}async function DD(n,t,e){const i=It(n);try{const a=await function(u,h){const d=It(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Yt(v!==null),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(i.localStore,t);YS(i,t,e),KS(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Yu(i,a)}catch(a){await Ho(a)}}function KS(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function YS(n,t,e){const i=It(n);let a=i.Wa[i.currentUser.toKey()];if(a){const o=a.get(t);o&&(e?o.reject(e):o.resolve(),a=a.remove(t)),i.Wa[i.currentUser.toKey()]=a}}function Zm(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.qa.get(t))n.ka.delete(i),e&&n.La.Ja(i,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(i=>{n.Ka.containsKey(i)||QS(n,i)})}function QS(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(Pp(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),Fp(n))}function Bb(n,t,e){for(const i of e)i instanceof jS?(n.Ka.addReference(i.key,t),OD(n,i)):i instanceof FS?(ht(jp,"Document no longer in limbo: "+i.key),n.Ka.removeReference(i.key,t),n.Ka.containsKey(i.key)||QS(n,i.key)):At()}function OD(n,t){const e=t.key,i=e.path.canonicalString();n.$a.get(e)||n.Qa.has(i)||(ht(jp,"New document in limbo: "+e),n.Qa.add(i),Fp(n))}function Fp(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new vt(ue.fromString(t)),i=n.za.next();n.Ua.set(i,new bD(e)),n.$a=n.$a.insert(e,i),kS(n.remoteStore,new tr(Ri(wp(e.path)),i,"TargetPurposeLimboResolution",Vf.ae))}}async function Yu(n,t,e){const i=It(n),a=[],o=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,d)=>{u.push(i.Ha(d,t,e).then(m=>{var _;if((m||e)&&i.isPrimaryClient){const v=m?!m.fromCache:(_=e==null?void 0:e.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){a.push(m);const v=kp.Yi(d.targetId,m);o.push(v)}}))}),await Promise.all(u),i.La.p_(a),await async function(d,m){const _=It(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>et.forEach(m,T=>et.forEach(T.Hi,w=>_.persistence.referenceDelegate.addReference(v,T.targetId,w)).next(()=>et.forEach(T.Ji,w=>_.persistence.referenceDelegate.removeReference(v,T.targetId,w)))))}catch(v){if(!jo(v))throw v;ht(Np,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const w=_.Ts.get(T),x=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(x);_.Ts=_.Ts.insert(T,V)}}}(i.localStore,o))}async function MD(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){ht(jp,"User change. New user:",t.toKey());const i=await xS(e.localStore,t);e.currentUser=t,function(o,u){o.Ga.forEach(h=>{h.forEach(d=>{d.reject(new pt(st.CANCELLED,u))})}),o.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Yu(e,i.Rs)}}function kD(n,t){const e=It(n),i=e.Ua.get(t);if(i&&i.Ba)return Vt().add(i.key);{let a=Vt();const o=e.qa.get(t);if(!o)return a;for(const u of o){const h=e.ka.get(u);a=a.unionWith(h.view.Sa)}return a}}function WS(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=GS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CD.bind(null,t),t.La.p_=pD.bind(null,t.eventManager),t.La.Ja=_D.bind(null,t.eventManager),t}function ND(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DD.bind(null,t),t}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gf(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return Ux(this.persistence,new Px,t.initialUser,this.serializer)}Xa(t){return new CS(Mp.ri,this.serializer)}Za(t){return new Gx}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class PD extends pf{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Yt(this.persistence.referenceDelegate instanceof gf);const i=this.persistence.referenceDelegate.garbageCollector;return new bx(i,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new CS(i=>gf.ri(i,e),this.serializer)}}class Jm{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MD.bind(null,this.syncEngine),await dD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new mD}()}createDatastore(t){const e=Gf(t.databaseInfo.databaseId),i=function(o){return new Xx(o)}(t.databaseInfo);return function(o,u,h,d){return new tD(o,u,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,o,u,h){return new nD(i,a,o,u,h)}(this.localStore,this.datastore,t.asyncQueue,e=>zb(this.syncEngine,e,0),function(){return kb.D()?new kb:new Kx}())}createSyncEngine(t,e){return function(a,o,u,h,d,m,_){const v=new ED(a,o,u,h,d,m);return _&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const o=It(a);ht(pa,"RemoteStore shutting down."),o.W_.add(5),await Ku(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ds("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="FirestoreClient";class VD{constructor(t,e,i,a,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=sn.UNAUTHENTICATED,this.clientId=jT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{ht(mr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(ht(mr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Bp(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function bm(n,t){n.asyncQueue.verifyOperationInProgress(),ht(mr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await xS(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Hb(n,t){n.asyncQueue.verifyOperationInProgress();const e=await LD(n);ht(mr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Pb(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Pb(t.remoteStore,a)),n._onlineComponents=t}async function LD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(mr,"Using user provided OfflineComponentProvider");try{await bm(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===st.FAILED_PRECONDITION||a.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Oo("Error using user provided cache. Falling back to memory cache: "+e),await bm(n,new pf)}}else ht(mr,"Using default OfflineComponentProvider"),await bm(n,new PD(void 0));return n._offlineComponents}async function $S(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(mr,"Using user provided OnlineComponentProvider"),await Hb(n,n._uninitializedComponentsProvider._online)):(ht(mr,"Using default OnlineComponentProvider"),await Hb(n,new Jm))),n._onlineComponents}function UD(n){return $S(n).then(t=>t.syncEngine)}async function tp(n){const t=await $S(n),e=t.eventManager;return e.onListen=TD.bind(null,t.syncEngine),e.onUnlisten=wD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=SD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=RD.bind(null,t.syncEngine),e}function zD(n,t,e={}){const i=new or;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,m){const _=new XS({next:T=>{_.su(),u.enqueueAndForget(()=>BS(o,v)),T.fromCache&&d.source==="server"?m.reject(new pt(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new HS(h,_,{includeMetadataChanges:!0,Ta:!0});return zS(o,v)}(await tp(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n,t,e){if(!e)throw new pt(st.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function BD(n,t,e,i){if(t===!0&&i===!0)throw new pt(st.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Fb(n){if(!vt.isDocumentKey(n))throw new pt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qb(n){if(vt.isDocumentKey(n))throw new pt(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At()}function Ci(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new pt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qp(n);throw new pt(st.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firestore.googleapis.com",Gb=!0;class Kb{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tA,this.ssl=Gb}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Gb;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=IS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<yx)throw new pt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qf{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new QI;switch(i.type){case"firstParty":return new ZI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=jb.get(e);i&&(ht("ComponentProvider","Removing Datastore"),jb.delete(e),i.terminate())}(this),Promise.resolve()}}function HD(n,t,e,i={}){var a;const o=(n=Ci(n,Qf))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${t}:${e}`;o.host!==tA&&o.host!==h&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:i});if(!da(d,u)&&(n._setSettings(d),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=sn.MOCK_USER;else{m=E1(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new pt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new sn(v)}n._authCredentials=new WI(new BT(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Qu(this.firestore,t,this._query)}}class On{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new On(this.firestore,t,this._key)}}class lr extends Qu{constructor(t,e,i){super(t,e,wp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new On(this.firestore,null,new vt(t))}withConverter(t){return new lr(this.firestore,t,this._path)}}function Ys(n,t,...e){if(n=$e(n),JS("collection","path",t),n instanceof Qf){const i=ue.fromString(t,...e);return qb(i),new lr(n,null,i)}{if(!(n instanceof On||n instanceof lr))throw new pt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ue.fromString(t,...e));return qb(i),new lr(n.firestore,null,i)}}function Wh(n,t,...e){if(n=$e(n),arguments.length===1&&(t=jT.newId()),JS("doc","path",t),n instanceof Qf){const i=ue.fromString(t,...e);return Fb(i),new On(n,null,new vt(i))}{if(!(n instanceof On||n instanceof lr))throw new pt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ue.fromString(t,...e));return Fb(i),new On(n.firestore,n instanceof lr?n.converter:null,new vt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="AsyncQueue";class Qb{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new OS(this,"async_queue_retry"),this.Su=()=>{const i=vm();i&&ht(Yb,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const e=vm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=vm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new or;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!jo(t))throw t;ht(Yb,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw ds("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.bu=e,e}enqueueAfterDelay(t,e,i){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const a=zp.createAndSchedule(this,t,e,i,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&At()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function Wb(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class _a extends Qf{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new Qb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qb(t),this._firestoreClient=void 0,await t}}}function jD(n,t){const e=typeof n=="object"?n:OT(),i=typeof n=="string"?n:of,a=yp(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=v1("firestore");o&&HD(a,...o)}return a}function Gp(n){if(n._terminated)throw new pt(st.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FD(n),n._firestoreClient}function FD(n){var t,e,i;const a=n._freezeSettings(),o=function(h,d,m,_){return new dC(h,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ZS(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new VD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lo(Ze.fromBase64String(t))}catch(e){throw new pt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Lo(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new pt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new pt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new pt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^__.*__$/;class GD{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new yr(t,this.data,this.fieldMask,e,this.fieldTransforms):new qu(t,this.data,e,this.fieldTransforms)}}class eA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new yr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function nA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class Wp{constructor(t,e,i,a,o,u){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Wp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.ku({path:i,Qu:!1});return a.$u(t),a}Uu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return _f(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(nA(this.Lu)&&qD.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class KD{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Gf(t)}ju(t,e,i,a=!1){return new Wp({Lu:t,methodName:e,zu:i,path:We.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iA(n){const t=n._freezeSettings(),e=Gf(n._databaseId);return new KD(n._databaseId,!!t.ignoreUndefinedProperties,e)}function YD(n,t,e,i,a,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,t,e,a);Xp("Data must be an object, but it was:",u,i);const h=sA(i,u);let d,m;if(o.merge)d=new Dn(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=ep(t,v,e);if(!u.contains(T))throw new pt(st.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);aA(_,T)||_.push(T)}d=new Dn(_),m=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=u.fieldTransforms;return new GD(new _n(h),d,m)}class Xf extends Kp{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Xf}}function QD(n,t,e,i){const a=n.ju(1,t,e);Xp("Data must be an object, but it was:",a,i);const o=[],u=_n.empty();_r(i,(d,m)=>{const _=$p(t,d,e);m=$e(m);const v=a.Uu(_);if(m instanceof Xf)o.push(_);else{const T=$f(m,v);T!=null&&(o.push(_),u.set(_,T))}});const h=new Dn(o);return new eA(u,h,a.fieldTransforms)}function WD(n,t,e,i,a,o){const u=n.ju(1,t,e),h=[ep(t,i,e)],d=[a];if(o.length%2!=0)throw new pt(st.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(ep(t,o[T])),d.push(o[T+1]);const m=[],_=_n.empty();for(let T=h.length-1;T>=0;--T)if(!aA(m,h[T])){const w=h[T];let x=d[T];x=$e(x);const V=u.Uu(w);if(x instanceof Xf)m.push(w);else{const M=$f(x,V);M!=null&&(m.push(w),_.set(w,M))}}const v=new Dn(m);return new eA(_,v,u.fieldTransforms)}function $f(n,t){if(rA(n=$e(n)))return Xp("Unsupported field value:",t,n),sA(n,t);if(n instanceof Kp)return function(i,a){if(!nA(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,a){const o=[];let u=0;for(const h of i){let d=$f(h,a.Ku(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,t)}return function(i,a){if((i=$e(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LC(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ke.fromDate(i);return{timestampValue:df(a.serializer,o)}}if(i instanceof ke){const o=new ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:df(a.serializer,o)}}if(i instanceof Yp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lo)return{bytesValue:bS(a.serializer,i._byteString)};if(i instanceof On){const o=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Qp)return function(u,h){return{mapValue:{fields:{[XT]:{stringValue:$T},[lf]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return Rp(h.serializer,m)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${qp(i)}`)}(n,t)}function sA(n,t){const e={};return qT(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_r(n,(i,a)=>{const o=$f(a,t.qu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function rA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof Yp||n instanceof Lo||n instanceof On||n instanceof Kp||n instanceof Qp)}function Xp(n,t,e){if(!rA(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const i=qp(e);throw i==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+i)}}function ep(n,t,e){if((t=$e(t))instanceof Wf)return t._internalPath;if(typeof t=="string")return $p(n,t);throw _f("Field path arguments must be of type string or ",n,!1,void 0,e)}const XD=new RegExp("[~\\*/\\[\\]]");function $p(n,t,e){if(t.search(XD)>=0)throw _f(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Wf(...t.split("."))._internalPath}catch{throw _f(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function _f(n,t,e,i,a){const o=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${i}`),u&&(d+=` in document ${a}`),d+=")"),new pt(st.INVALID_ARGUMENT,h+n+d)}function aA(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,e,i,a,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(lA("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class $D extends oA{data(){return super.data()}}function lA(n,t){return typeof t=="string"?$p(n,t):t instanceof Wf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pt(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZD{convertValue(t,e="none"){switch(dr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return _r(t,(a,o)=>{i[a]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,a;const o=(a=(i=(e=t.fields)===null||e===void 0?void 0:e[lf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>ye(u.doubleValue));return new Qp(o)}convertGeoPoint(t){return new Yp(ye(t.latitude),ye(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Uf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ou(t));default:return null}}convertTimestamp(t){const e=hr(t);return new ke(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ue.fromString(t);Yt(RS(i));const a=new Mu(i.get(1),i.get(3)),o=new vt(i.popFirst(5));return a.isEqual(e)||ds(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cA extends oA{constructor(t,e,i,a,o,u){super(t,e,i,a,u),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(lA("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Xh extends cA{data(t={}){return super.data(t)}}class hA{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new fu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Xh(this._firestore,this._userDataWriter,i.key,i,new fu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pt(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const d=new Xh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new fu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Xh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new fu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:tO(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function tO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}class Zp extends ZD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lo(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new On(this.firestore,null,e)}}function xh(n){n=Ci(n,Qu);const t=Ci(n.firestore,_a),e=Gp(t),i=new Zp(t);return uA(n._query),zD(e,n._query).then(a=>new hA(t,i,n,a))}function eO(n,t,e,...i){n=Ci(n,On);const a=Ci(n.firestore,_a),o=iA(a);let u;return u=typeof(t=$e(t))=="string"||t instanceof Wf?WD(o,"updateDoc",n._key,t,e,i):QD(o,"updateDoc",n._key,t),Jp(a,[u.toMutation(n._key,ni.exists(!0))])}function Xb(n){return Jp(Ci(n.firestore,_a),[new Ip(n._key,ni.none())])}function Em(n,t){const e=Ci(n.firestore,_a),i=Wh(n),a=JD(n.converter,t);return Jp(e,[YD(iA(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,ni.exists(!1))]).then(()=>i)}function nO(n,...t){var e,i,a;n=$e(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof t[u]!="object"||Wb(t[u])||(o=t[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Wb(t[u])){const v=t[u];t[u]=(e=v.next)===null||e===void 0?void 0:e.bind(v),t[u+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),t[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let d,m,_;if(n instanceof On)m=Ci(n.firestore,_a),_=wp(n._key.path),d={next:v=>{t[u]&&t[u](iO(m,n,v))},error:t[u+1],complete:t[u+2]};else{const v=Ci(n,Qu);m=Ci(v.firestore,_a),_=v._query;const T=new Zp(m);d={next:w=>{t[u]&&t[u](new hA(m,T,v,w))},error:t[u+1],complete:t[u+2]},uA(n._query)}return function(T,w,x,V){const M=new XS(V),K=new HS(w,M,x);return T.asyncQueue.enqueueAndForget(async()=>zS(await tp(T),K)),()=>{M.su(),T.asyncQueue.enqueueAndForget(async()=>BS(await tp(T),K))}}(Gp(m),_,h,d)}function Jp(n,t){return function(i,a){const o=new or;return i.asyncQueue.enqueueAndForget(async()=>ID(await UD(i),a,o)),o.promise}(Gp(n),t)}function iO(n,t,e){const i=e.docs.get(t._key),a=new Zp(n);return new cA(n,a,t._key,i,new fu(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){Bo=a})(zo),Do(new ga("firestore",(i,{instanceIdentifier:a,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new _a(new XI(i.getProvider("auth-internal")),new JI(u,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(m.options.projectId,_)}(u,a),u);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),rr(tb,eb,t),rr(tb,eb,"esm2017")})();function t_(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(e[i[a]]=n[i[a]]);return e}function fA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sO=fA,dA=new ju("auth","Firebase",fA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new pp("@firebase/auth");function rO(n,...t){yf.logLevel<=Pt.WARN&&yf.warn(`Auth (${zo}): ${n}`,...t)}function $h(n,...t){yf.logLevel<=Pt.ERROR&&yf.error(`Auth (${zo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n,...t){throw e_(n,...t)}function xi(n,...t){return e_(n,...t)}function gA(n,t,e){const i=Object.assign(Object.assign({},sO()),{[t]:e});return new ju("auth","Firebase",i).create(t,{appName:n.name})}function hs(n){return gA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e_(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return dA.create(n,...t)}function Tt(n,t,...e){if(!n)throw e_(t,...e)}function us(n){const t="INTERNAL ASSERTION FAILED: "+n;throw $h(t),new Error(t)}function ms(n,t){n||us(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aO(){return $b()==="http:"||$b()==="https:"}function $b(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aO()||w1()||"connection"in navigator)?navigator.onLine:!0}function lO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t,e){this.shortDelay=t,this.longDelay=e,ms(e>t,"Short delay should be less than long delay!"),this.isMobile=T1()||R1()}get(){return oO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n,t){ms(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hO=new Wu(3e4,6e4);function vr(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function br(n,t,e,i,a={}){return pA(n,a,async()=>{let o={},u={};i&&(t==="GET"?u=i:o={body:JSON.stringify(i)});const h=Fu(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:t,headers:d},o);return A1()||(m.referrerPolicy="no-referrer"),mA.fetch()(await _A(n,n.config.apiHost,e,h),m)})}async function pA(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},uO),t);try{const a=new dO(n),o=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Dh(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Dh(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Dh(n,"user-disabled",u);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw gA(n,_,m);ii(n,_)}}catch(a){if(a instanceof _s)throw a;ii(n,"network-request-failed",{message:String(a)})}}async function Xu(n,t,e,i,a={}){const o=await br(n,t,e,i,a);return"mfaPendingCredential"in o&&ii(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function _A(n,t,e,i){const a=`${t}${e}?${i}`,o=n,u=o.config.emulator?n_(n.config,a):`${n.config.apiScheme}://${a}`;return cO.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function fO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(xi(this.auth,"network-request-failed")),hO.get())})}}function Dh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=xi(n,t,i);return a.customData._tokenResponse=e,a}function Zb(n){return n!==void 0&&n.enterprise!==void 0}class gO{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return fO(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mO(n,t){return br(n,"GET","/v2/recaptchaConfig",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(n,t){return br(n,"POST","/v1/accounts:delete",t)}async function vf(n,t){return br(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _O(n,t=!1){const e=$e(n),i=await e.getIdToken(t),a=i_(i);Tt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:Su(Tm(a.auth_time)),issuedAtTime:Su(Tm(a.iat)),expirationTime:Su(Tm(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Tm(n){return Number(n)*1e3}function i_(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const a=AT(e);return a?JSON.parse(a):($h("Failed to decode base64 JWT payload"),null)}catch(a){return $h("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Jb(n){const t=i_(n);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof _s&&yO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function yO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(n){var t;const e=n.auth,i=await n.getIdToken(),a=await Vu(n,vf(e,{idToken:i}));Tt(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?yA(o.providerUserInfo):[],h=EO(n.providerData,u),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new ip(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function bO(n){const t=$e(n);await bf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function EO(n,t){return[...n.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function yA(n){return n.map(t=>{var{providerId:e}=t,i=t_(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(n,t){const e=await pA(n,{},async()=>{const i=Fu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=await _A(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",mA.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function SO(n,t){return br(n,"POST","/v2/accounts:revokeToken",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Jb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=Jb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:o}=await TO(t,e);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:o}=e,u=new Ro;return i&&(Tt(typeof i=="string","internal-error",{appName:t}),u.refreshToken=i),a&&(Tt(typeof a=="string","internal-error",{appName:t}),u.accessToken=a),o&&(Tt(typeof o=="number","internal-error",{appName:t}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(n,t){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ei{constructor(t){var{uid:e,auth:i,stsTokenManager:a}=t,o=t_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ip(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Vu(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return _O(this,t)}reload(){return bO(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ei(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(hs(this.auth));const t=await this.getIdToken();return await Vu(this,pO(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,a,o,u,h,d,m,_;const v=(i=e.displayName)!==null&&i!==void 0?i:void 0,T=(a=e.email)!==null&&a!==void 0?a:void 0,w=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,x=(u=e.photoURL)!==null&&u!==void 0?u:void 0,V=(h=e.tenantId)!==null&&h!==void 0?h:void 0,M=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,K=(m=e.createdAt)!==null&&m!==void 0?m:void 0,$=(_=e.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:rt,isAnonymous:nt,providerData:ct,stsTokenManager:N}=e;Tt(Z&&N,t,"internal-error");const R=Ro.fromJSON(this.name,N);Tt(typeof Z=="string",t,"internal-error"),Qs(v,t.name),Qs(T,t.name),Tt(typeof rt=="boolean",t,"internal-error"),Tt(typeof nt=="boolean",t,"internal-error"),Qs(w,t.name),Qs(x,t.name),Qs(V,t.name),Qs(M,t.name),Qs(K,t.name),Qs($,t.name);const I=new ei({uid:Z,auth:t,email:T,emailVerified:rt,displayName:v,isAnonymous:nt,photoURL:x,phoneNumber:w,tenantId:V,stsTokenManager:R,createdAt:K,lastLoginAt:$});return ct&&Array.isArray(ct)&&(I.providerData=ct.map(k=>Object.assign({},k))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(t,e,i=!1){const a=new Ro;a.updateFromServerResponse(e);const o=new ei({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await bf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];Tt(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?yA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new Ro;h.updateFromIdToken(i);const d=new ei({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ip(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;function cs(n){ms(n instanceof Function,"Expected a class definition");let t=tE.get(n);return t?(ms(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,tE.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}vA.type="NONE";const eE=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n,t,e){return`firebase:${n}:${t}:${e}`}class Io{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,a.apiKey,o),this.fullPersistenceKey=Zh("persistence",a.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await vf(this.auth,{idToken:t}).catch(()=>{});return e?ei._fromGetAccountInfoResponse(this.auth,e,t):null}return ei._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Io(cs(eE),t,i);const a=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||cs(eE);const u=Zh(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const _=await m._get(u);if(_){let v;if(typeof _=="string"){const T=await vf(t,{idToken:_}).catch(()=>{});if(!T)break;v=await ei._fromGetAccountInfoResponse(t,T,_)}else v=ei._fromJSON(t,_);m!==o&&(h=v),o=m;break}}catch{}const d=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Io(o,t,i):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new Io(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(SA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wA(t))return"Blackberry";if(RA(t))return"Webos";if(EA(t))return"Safari";if((t.includes("chrome/")||TA(t))&&!t.includes("edge/"))return"Chrome";if(AA(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function bA(n=on()){return/firefox\//i.test(n)}function EA(n=on()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function TA(n=on()){return/crios\//i.test(n)}function SA(n=on()){return/iemobile/i.test(n)}function AA(n=on()){return/android/i.test(n)}function wA(n=on()){return/blackberry/i.test(n)}function RA(n=on()){return/webos/i.test(n)}function s_(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AO(n=on()){var t;return s_(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function wO(){return I1()&&document.documentMode===10}function IA(n=on()){return s_(n)||AA(n)||RA(n)||wA(n)||/windows phone/i.test(n)||SA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(n,t=[]){let e;switch(n){case"Browser":e=nE(on());break;case"Worker":e=`${nE(on())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((u,h)=>{try{const d=t(o);u(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(n,t={}){return br(n,"GET","/v2/passwordPolicy",vr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=6;class xO{constructor(t){var e,i,a,o;const u=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=u.minPasswordLength)!==null&&e!==void 0?e:CO,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,a,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new RO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=cs(e)),this._initializationPromise=this.queue(async()=>{var i,a,o;if(!this._deleted&&(this.persistenceManager=await Io.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await vf(this,{idToken:t}),i=await ei._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(t);(!u||u===h)&&(d!=null&&d.user)&&(a=d.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await bf(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lO()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kn(this.app))return Promise.reject(hs(this));const e=t?$e(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await IO(this),e=new xO(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ju("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await SO(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&cs(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[cs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{u=!0,d()}}else{const d=t.addObserver(e);return()=>{u=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=CA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&rO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Aa(n){return $e(n)}class iE{constructor(t){this.auth=t,this.observer=null,this.addObserver=P1(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OO(n){Zf=n}function xA(n){return Zf.loadJS(n)}function MO(){return Zf.recaptchaEnterpriseScript}function kO(){return Zf.gapiScript}function NO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class PO{constructor(){this.enterprise=new VO}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class VO{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const LO="recaptcha-enterprise",DA="NO_RECAPTCHA";class UO{constructor(t){this.type=LO,this.auth=Aa(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{mO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new gO(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(d=>{h(d)})})}function a(o,u,h){const d=window.grecaptcha;Zb(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(m=>{u(m)}).catch(()=>{u(DA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PO().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{i(this.auth).then(h=>{if(!e&&Zb(window.grecaptcha))a(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=MO();d.length!==0&&(d+=h),xA(d).then(()=>{a(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function sE(n,t,e,i=!1,a=!1){const o=new UO(n);let u;if(a)u=DA;else try{u=await o.verify(e)}catch{u=await o.verify(e,!0)}const h=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function sp(n,t,e,i,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await sE(n,t,e,e==="getOobCode");return i(n,u)}else return i(n,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await sE(n,t,e,e==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(n,t){const e=yp(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),o=e.getOptions();if(da(o,t??{}))return a;ii(a,"already-initialized")}return e.initialize({options:t})}function BO(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(cs);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function HO(n,t,e){const i=Aa(n);Tt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,o=OA(t),{host:u,port:h}=jO(t),d=h===null?"":`:${h}`,m={url:`${o}//${u}${d}/`},_=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Tt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Tt(da(m,i.config.emulator)&&da(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,FO()}function OA(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function jO(n){const t=OA(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:rE(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:rE(u)}}}function rE(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function FO(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return us("not implemented")}_getIdTokenResponse(t){return us("not implemented")}_linkToIdToken(t,e){return us("not implemented")}_getReauthenticationResolver(t){return us("not implemented")}}async function qO(n,t){return br(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GO(n,t){return Xu(n,"POST","/v1/accounts:signInWithPassword",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(n,t){return Xu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,t))}async function YO(n,t){return Xu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends r_{constructor(t,e,i,a=null){super("password",i),this._email=t,this._password=e,this._tenantId=a}static _fromEmailAndPassword(t,e){return new Lu(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Lu(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(t,e,"signInWithPassword",GO);case"emailLink":return KO(t,{email:this._email,oobCode:this._password});default:ii(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(t,i,"signUpPassword",qO);case"emailLink":return YO(t,{idToken:e,email:this._email,oobCode:this._password});default:ii(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n,t){return Xu(n,"POST","/v1/accounts:signInWithIdp",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="http://localhost";class ya extends r_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ya(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ii("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=e,o=t_(e,["providerId","signInMethod"]);if(!i||!a)return null;const u=new ya(i,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(t){const e=this.buildRequest();return Co(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Co(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Co(t,e)}buildRequest(){const t={requestUri:QO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Fu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XO(n){const t=ou(lu(n)).link,e=t?ou(lu(t)).deep_link_id:null,i=ou(lu(n)).deep_link_id;return(i?ou(lu(i)).link:null)||i||e||t||n}class a_{constructor(t){var e,i,a,o,u,h;const d=ou(lu(t)),m=(e=d.apiKey)!==null&&e!==void 0?e:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,v=WO((a=d.mode)!==null&&a!==void 0?a:null);Tt(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const e=XO(t);try{return new a_(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(t,e){return Lu._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=a_.parseLink(e);return Tt(i,"argument-error"),Lu._fromEmailAndCode(t,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends MA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends $u{constructor(){super("facebook.com")}static credential(t){return ya._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xs.credential(t.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ya._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return $s.credential(e,i)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends $u{constructor(){super("github.com")}static credential(t){return ya._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Zs.credentialFromTaggedObject(t)}static credentialFromError(t){return Zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Zs.credential(t.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends $u{constructor(){super("twitter.com")}static credential(t,e){return ya._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Js.credentialFromTaggedObject(t)}static credentialFromError(t){return Js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Js.credential(e,i)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,t){return Xu(n,"POST","/v1/accounts:signUp",vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const o=await ei._fromIdTokenResponse(t,i,a),u=aE(i);return new va({user:o,providerId:u,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=aE(i);return new va({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function aE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends _s{constructor(t,e,i,a){var o;super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Ef(t,e,i,a)}}function kA(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(n,o,t,i):o})}async function ZO(n,t,e=!1){const i=await Vu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return va._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,t,e=!1){const{auth:i}=n;if(Kn(i.app))return Promise.reject(hs(i));const a="reauthenticate";try{const o=await Vu(n,kA(i,a,t,n),e);Tt(o.idToken,i,"internal-error");const u=i_(o.idToken);Tt(u,i,"internal-error");const{sub:h}=u;return Tt(n.uid===h,i,"user-mismatch"),va._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ii(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(n,t,e=!1){if(Kn(n.app))return Promise.reject(hs(n));const i="signIn",a=await kA(n,i,t),o=await va._fromIdTokenResponse(n,i,a);return e||await n._updateCurrentUser(o.user),o}async function t2(n,t){return NA(Aa(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n){const t=Aa(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function e2(n,t,e){if(Kn(n.app))return Promise.reject(hs(n));const i=Aa(n),u=await sp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$O).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&PA(n),d}),h=await va._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function n2(n,t,e){return Kn(n.app)?Promise.reject(hs(n)):t2($e(n),qo.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PA(n),i})}function i2(n,t,e,i){return $e(n).onIdTokenChanged(t,e,i)}function s2(n,t,e){return $e(n).beforeAuthStateChanged(t,e)}function r2(n){return $e(n).signOut()}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=1e3,o2=10;class LA extends VA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!e&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);wO()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,o2):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},a2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}LA.type="LOCAL";const l2=LA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends VA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}UA.type="SESSION";const zA=UA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new Jf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:o}=e.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async m=>m(e.origin,o)),d=await u2(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const m=o_("",20);a.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function h2(n){Di().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function f2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function g2(){return BA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebaseLocalStorageDb",m2=1,Sf="firebaseLocalStorage",jA="fbase_key";class Zu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function td(n,t){return n.transaction([Sf],t?"readwrite":"readonly").objectStore(Sf)}function p2(){const n=indexedDB.deleteDatabase(HA);return new Zu(n).toPromise()}function rp(){const n=indexedDB.open(HA,m2);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Sf,{keyPath:jA})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Sf)?t(i):(i.close(),await p2(),t(await rp()))})})}async function oE(n,t,e){const i=td(n,!0).put({[jA]:t,value:e});return new Zu(i).toPromise()}async function _2(n,t){const e=td(n,!1).get(t),i=await new Zu(e).toPromise();return i===void 0?null:i.value}function lE(n,t){const e=td(n,!0).delete(t);return new Zu(e).toPromise()}const y2=800,v2=3;class FA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>v2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(g2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await f2(),!this.activeServiceWorker)return;this.sender=new c2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||d2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await rp();return await oE(t,Tf,"1"),await lE(t,Tf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>oE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>_2(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>lE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const o=td(a,!1).getAll();return new Zu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:o}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FA.type="LOCAL";const b2=FA;new Wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n,t){return t?cs(t):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends r_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Co(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Co(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Co(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function T2(n){return NA(n.auth,new l_(n),n.bypassAuthState)}function S2(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),JO(e,new l_(n),n.bypassAuthState)}async function A2(n){const{auth:t,user:e}=n;return Tt(e,t,"internal-error"),ZO(e,new l_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t,e,i,a,o=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:o,error:u,type:h}=t;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return T2;case"linkViaPopup":case"linkViaRedirect":return A2;case"reauthViaPopup":case"reauthViaRedirect":return S2;default:ii(this.auth,"internal-error")}}resolve(t){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new Wu(2e3,1e4);class Ao extends qA{constructor(t,e,i,a,o){super(t,e,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const t=o_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,w2.get())};t()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="pendingRedirect",Jh=new Map;class I2 extends qA{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Jh.get(this.auth._key());if(!t){try{const i=await C2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Jh.set(this.auth._key(),t)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C2(n,t){const e=O2(t),i=D2(n);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function x2(n,t){Jh.set(n._key(),t)}function D2(n){return cs(n._redirectPersistence)}function O2(n){return Zh(R2,n.config.apiKey,n.name)}async function M2(n,t,e=!1){if(Kn(n.app))return Promise.reject(hs(n));const i=Aa(n),a=E2(i,t),u=await new I2(i,a,e).execute();return u&&!e&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,t)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=10*60*1e3;class N2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!P2(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!GA(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(xi(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=k2&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(t))}saveEventToCache(t){this.cachedEventUids.add(uE(t)),this.lastProcessedEventTime=Date.now()}}function uE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function GA({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function P2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(n,t={}){return br(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U2=/^https?/;async function z2(n){if(n.config.emulator)return;const{authorizedDomains:t}=await V2(n);for(const e of t)try{if(B2(e))return}catch{}ii(n,"unauthorized-domain")}function B2(n){const t=np(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&u.hostname===i}if(!U2.test(e))return!1;if(L2.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new Wu(3e4,6e4);function cE(){const n=Di().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function j2(n){return new Promise((t,e)=>{var i,a,o;function u(){cE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cE(),e(xi(n,"network-request-failed"))},timeout:H2.get()})}if(!((a=(i=Di().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((o=Di().gapi)===null||o===void 0)&&o.load)u();else{const h=NO("iframefcb");return Di()[h]=()=>{gapi.load?u():e(xi(n,"network-request-failed"))},xA(`${kO()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw tf=null,t})}let tf=null;function F2(n){return tf=tf||j2(n),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Wu(5e3,15e3),G2="__/auth/iframe",K2="emulator/auth/iframe",Y2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W2(n){const t=n.config;Tt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?n_(t,K2):`https://${n.config.authDomain}/${G2}`,i={apiKey:t.apiKey,appName:n.name,v:zo},a=Q2.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Fu(i).slice(1)}`}async function X2(n){const t=await F2(n),e=Di().gapi;return Tt(e,n,"internal-error"),t.open({where:document.body,url:W2(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y2,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const u=xi(n,"network-request-failed"),h=Di().setTimeout(()=>{o(u)},q2.get());function d(){Di().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z2=500,J2=600,tM="_blank",eM="http://localhost";class hE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nM(n,t,e,i=Z2,a=J2){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},$2),{width:i.toString(),height:a.toString(),top:o,left:u}),m=on().toLowerCase();e&&(h=TA(m)?tM:e),bA(m)&&(t=t||eM,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[w,x])=>`${T}${w}=${x},`,"");if(AO(m)&&h!=="_self")return iM(t||"",h),new hE(null);const v=window.open(t||"",h,_);Tt(v,n,"popup-blocked");try{v.focus()}catch{}return new hE(v)}function iM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="__/auth/handler",rM="emulator/auth/handler",aM=encodeURIComponent("fac");async function fE(n,t,e,i,a,o){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:zo,eventId:a};if(t instanceof MA){t.setDefaultLanguage(n.languageCode),u.providerId=t.providerId||"",N1(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,v]of Object.entries({}))u[_]=v}if(t instanceof $u){const _=t.getScopes().filter(v=>v!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${aM}=${encodeURIComponent(d)}`:"";return`${oM(n)}?${Fu(h).slice(1)}${m}`}function oM({config:n}){return n.emulator?n_(n,rM):`https://${n.authDomain}/${sM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class lM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zA,this._completeRedirectFn=M2,this._overrideRedirectResult=x2}async _openPopup(t,e,i,a){var o;ms((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await fE(t,e,i,np(),a);return nM(t,u,o_())}async _openRedirect(t,e,i,a){await this._originValidation(t);const o=await fE(t,e,i,np(),a);return h2(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:o}=this.eventManagers[e];return a?Promise.resolve(a):(ms(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await X2(t),i=new N2(t);return e.register("authEvent",a=>(Tt(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Sm,{type:Sm},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Sm];u!==void 0&&e(!!u),ii(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=z2(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return IA()||EA()||s_()}}const uM=lM;var dE="@firebase/auth",gE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fM(n){Do(new ga("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Tt(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CA(n)},m=new DO(i,a,o,d);return BO(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Do(new ga("auth-internal",t=>{const e=Aa(t.getProvider("auth").getImmediate());return(i=>new cM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(dE,gE,hM(n)),rr(dE,gE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=5*60,gM=IT("authIdTokenMaxAge")||dM;let mE=null;const mM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>gM)return;const a=e==null?void 0:e.token;mE!==a&&(mE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function pM(n=OT()){const t=yp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=zO(n,{popupRedirectResolver:uM,persistence:[b2,l2,zA]}),i=IT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=mM(o.toString());s2(e,u,()=>u(e.currentUser)),i2(e,h=>u(h))}}const a=wT("auth");return a&&HO(e,`http://${a}`),e}function _M(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}OO({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=a=>{const o=xi("internal-error");o.customData=a,e(o)},i.type="text/javascript",i.charset="UTF-8",_M().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fM("Browser");const yM={apiKey:"AIzaSyA0j4uqm9rcc0jjk0YKiPg7xgYHA6YT4I0",authDomain:"asistencia-ce-english.firebaseapp.com",projectId:"asistencia-ce-english",storageBucket:"asistencia-ce-english.appspot.com",messagingSenderId:"857312263290",appId:"1:857312263290:web:8f9cd756cbe9b732178fc3"},KA=DT(yM),ti=jD(KA),ap=pM(KA);function vM({onLogin:n}){const[t,e]=Gt.useState(""),[i,a]=Gt.useState(""),[o,u]=Gt.useState("login"),[h,d]=Gt.useState(""),m=async _=>{_.preventDefault(),d("");try{o==="login"?await n2(ap,t,i):await e2(ap,t,i),n()}catch(v){d(v.message)}};return gt.jsxs("div",{className:"login-container",children:[gt.jsx("h2",{children:o==="login"?"Ingresar":"Crear cuenta"}),gt.jsxs("form",{onSubmit:m,children:[gt.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:_=>e(_.target.value),required:!0}),gt.jsx("input",{type:"password",placeholder:"Contraseña",value:i,onChange:_=>a(_.target.value),required:!0}),gt.jsx("button",{type:"submit",children:o==="login"?"Ingresar":"Registrarse"})]}),gt.jsx("p",{style:{marginTop:"10px",cursor:"pointer",color:"#1976d2"},onClick:()=>u(o==="login"?"registro":"login"),children:o==="login"?"¿No tenés cuenta? Crear una":"¿Ya tenés cuenta? Iniciar sesión"}),h&&gt.jsx("p",{style:{color:"red"},children:h})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ju(n){return n+.5|0}const er=(n,t,e)=>Math.max(Math.min(n,e),t);function du(n){return er(Ju(n*2.55),0,255)}function ur(n){return er(Ju(n*255),0,255)}function ls(n){return er(Ju(n/2.55)/100,0,1)}function pE(n){return er(Ju(n*100),0,100)}const Gn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},op=[..."0123456789ABCDEF"],bM=n=>op[n&15],EM=n=>op[(n&240)>>4]+op[n&15],Oh=n=>(n&240)>>4===(n&15),TM=n=>Oh(n.r)&&Oh(n.g)&&Oh(n.b)&&Oh(n.a);function SM(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Gn[n[1]]*17,g:255&Gn[n[2]]*17,b:255&Gn[n[3]]*17,a:t===5?Gn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Gn[n[1]]<<4|Gn[n[2]],g:Gn[n[3]]<<4|Gn[n[4]],b:Gn[n[5]]<<4|Gn[n[6]],a:t===9?Gn[n[7]]<<4|Gn[n[8]]:255})),e}const AM=(n,t)=>n<255?t(n):"";function wM(n){var t=TM(n)?bM:EM;return n?"#"+t(n.r)+t(n.g)+t(n.b)+AM(n.a,t):void 0}const RM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function YA(n,t,e){const i=t*Math.min(e,1-e),a=(o,u=(o+n/30)%12)=>e-i*Math.max(Math.min(u-3,9-u,1),-1);return[a(0),a(8),a(4)]}function IM(n,t,e){const i=(a,o=(a+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function CM(n,t,e){const i=YA(n,1,.5);let a;for(t+e>1&&(a=1/(t+e),t*=a,e*=a),a=0;a<3;a++)i[a]*=1-t-e,i[a]+=t;return i}function xM(n,t,e,i,a){return n===a?(t-e)/i+(t<e?6:0):t===a?(e-n)/i+2:(n-t)/i+4}function u_(n){const e=n.r/255,i=n.g/255,a=n.b/255,o=Math.max(e,i,a),u=Math.min(e,i,a),h=(o+u)/2;let d,m,_;return o!==u&&(_=o-u,m=h>.5?_/(2-o-u):_/(o+u),d=xM(e,i,a,_,o),d=d*60+.5),[d|0,m||0,h]}function c_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ur)}function h_(n,t,e){return c_(YA,n,t,e)}function DM(n,t,e){return c_(CM,n,t,e)}function OM(n,t,e){return c_(IM,n,t,e)}function QA(n){return(n%360+360)%360}function MM(n){const t=RM.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?du(+t[5]):ur(+t[5]));const a=QA(+t[2]),o=+t[3]/100,u=+t[4]/100;return t[1]==="hwb"?i=DM(a,o,u):t[1]==="hsv"?i=OM(a,o,u):i=h_(a,o,u),{r:i[0],g:i[1],b:i[2],a:e}}function kM(n,t){var e=u_(n);e[0]=QA(e[0]+t),e=h_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function NM(n){if(!n)return;const t=u_(n),e=t[0],i=pE(t[1]),a=pE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${a}%, ${ls(n.a)})`:`hsl(${e}, ${i}%, ${a}%)`}const _E={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function PM(){const n={},t=Object.keys(yE),e=Object.keys(_E);let i,a,o,u,h;for(i=0;i<t.length;i++){for(u=h=t[i],a=0;a<e.length;a++)o=e[a],h=h.replace(o,_E[o]);o=parseInt(yE[u],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let Mh;function VM(n){Mh||(Mh=PM(),Mh.transparent=[0,0,0,0]);const t=Mh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const LM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function UM(n){const t=LM.exec(n);let e=255,i,a,o;if(t){if(t[7]!==i){const u=+t[7];e=t[8]?du(u):er(u*255,0,255)}return i=+t[1],a=+t[3],o=+t[5],i=255&(t[2]?du(i):er(i,0,255)),a=255&(t[4]?du(a):er(a,0,255)),o=255&(t[6]?du(o):er(o,0,255)),{r:i,g:a,b:o,a:e}}}function zM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ls(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Am=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,yo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function BM(n,t,e){const i=yo(ls(n.r)),a=yo(ls(n.g)),o=yo(ls(n.b));return{r:ur(Am(i+e*(yo(ls(t.r))-i))),g:ur(Am(a+e*(yo(ls(t.g))-a))),b:ur(Am(o+e*(yo(ls(t.b))-o))),a:n.a+e*(t.a-n.a)}}function kh(n,t,e){if(n){let i=u_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=h_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function WA(n,t){return n&&Object.assign(t||{},n)}function vE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ur(n[3]))):(t=WA(n,{r:0,g:0,b:0,a:1}),t.a=ur(t.a)),t}function HM(n){return n.charAt(0)==="r"?UM(n):MM(n)}class Uu{constructor(t){if(t instanceof Uu)return t;const e=typeof t;let i;e==="object"?i=vE(t):e==="string"&&(i=SM(t)||VM(t)||HM(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=WA(this._rgb);return t&&(t.a=ls(t.a)),t}set rgb(t){this._rgb=vE(t)}rgbString(){return this._valid?zM(this._rgb):void 0}hexString(){return this._valid?wM(this._rgb):void 0}hslString(){return this._valid?NM(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,a=t.rgb;let o;const u=e===o?.5:e,h=2*u-1,d=i.a-a.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*a.r+.5,i.g=255&m*i.g+o*a.g+.5,i.b=255&m*i.b+o*a.b+.5,i.a=u*i.a+(1-u)*a.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=BM(this._rgb,t._rgb,e)),this}clone(){return new Uu(this.rgb)}alpha(t){return this._rgb.a=ur(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ju(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return kh(this._rgb,2,t),this}darken(t){return kh(this._rgb,2,-t),this}saturate(t){return kh(this._rgb,1,t),this}desaturate(t){return kh(this._rgb,1,-t),this}rotate(t){return kM(this._rgb,t),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function rs(){}const jM=(()=>{let n=0;return()=>n++})();function an(n){return n==null}function Xe(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ps(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ti(n,t){return ps(n)?n:t}function Zt(n,t){return typeof n>"u"?t:n}const FM=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,XA=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ae(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function $t(n,t,e,i){let a,o,u;if(Xe(n))for(o=n.length,a=0;a<o;a++)t.call(e,n[a],a);else if(Ft(n))for(u=Object.keys(n),o=u.length,a=0;a<o;a++)t.call(e,n[u[a]],u[a])}function Af(n,t){let e,i,a,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(a=n[e],o=t[e],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function wf(n){if(Xe(n))return n.map(wf);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let a=0;for(;a<i;++a)t[e[a]]=wf(n[e[a]]);return t}return n}function $A(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function qM(n,t,e,i){if(!$A(n))return;const a=t[n],o=e[n];Ft(a)&&Ft(o)?zu(a,o,i):t[n]=wf(o)}function zu(n,t,e){const i=Xe(t)?t:[t],a=i.length;if(!Ft(n))return n;e=e||{};const o=e.merger||qM;let u;for(let h=0;h<a;++h){if(u=i[h],!Ft(u))continue;const d=Object.keys(u);for(let m=0,_=d.length;m<_;++m)o(d[m],n,u,e)}return n}function Au(n,t){return zu(n,t,{merger:GM})}function GM(n,t,e){if(!$A(n))return;const i=t[n],a=e[n];Ft(i)&&Ft(a)?Au(i,a):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=wf(a))}const bE={"":n=>n,x:n=>n.x,y:n=>n.y};function KM(n){const t=n.split("."),e=[];let i="";for(const a of t)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function YM(n){const t=KM(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Bu(n,t){return(bE[t]||(bE[t]=YM(t)))(n)}function f_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Rf=n=>typeof n<"u",pr=n=>typeof n=="function",EE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function QM(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const je=Math.PI,we=2*je,If=Number.POSITIVE_INFINITY,WM=je/180,Me=je/2,sa=je/4,TE=je*2/3,SE=Math.sign;function XM(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((a,o)=>a-o).pop(),t}function $M(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Cf(n){return!$M(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function ha(n){return n*(je/180)}function ZM(n){return n*(180/je)}function ZA(n,t){const e=t.x-n.x,i=t.y-n.y,a=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*je&&(o+=we),{angle:o,distance:a}}function JM(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ra(n){return(n%we+we)%we}function xf(n,t,e,i){const a=ra(n),o=ra(t),u=ra(e),h=ra(o-a),d=ra(u-a),m=ra(a-o),_=ra(a-u);return a===o||a===u||i&&o===u||h>d&&m<_}function Yn(n,t,e){return Math.max(t,Math.min(e,n))}function tk(n){return Yn(n,-32768,32767)}function gu(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function d_(n,t,e){e=e||(u=>n[u]<t);let i=n.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,e(o)?a=o:i=o;return{lo:a,hi:i}}const lp=(n,t,e,i)=>d_(n,e,i?a=>{const o=n[a][t];return o<e||o===e&&n[a+1][t]===e}:a=>n[a][t]<e),ek=(n,t,e)=>d_(n,e,i=>n[i][t]>=e);function nk(n,t,e){let i=0,a=n.length;for(;i<a&&n[i]<t;)i++;for(;a>i&&n[a-1]>e;)a--;return i>0||a<n.length?n.slice(i,a):n}const JA=["push","pop","shift","splice","unshift"];function ik(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),JA.forEach(e=>{const i="_onData"+f_(e),a=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const u=a.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),u}})})}function AE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,a=i.indexOf(t);a!==-1&&i.splice(a,1),!(i.length>0)&&(JA.forEach(o=>{delete n[o]}),delete n._chartjs)}function sk(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const tw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function ew(n,t){let e=[],i=!1;return function(...a){e=a,i||(i=!0,tw.call(window,()=>{i=!1,n.apply(t,e)}))}}function rk(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const nw=n=>n==="start"?"left":n==="end"?"right":"center",xn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,ak=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Nh=n=>n===0||n===1,wE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*we/e)),RE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*we/e)+1,wu={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Me)+1,easeOutSine:n=>Math.sin(n*Me),easeInOutSine:n=>-.5*(Math.cos(je*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Nh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Nh(n)?n:wE(n,.075,.3),easeOutElastic:n=>Nh(n)?n:RE(n,.075,.3),easeInOutElastic(n){return Nh(n)?n:n<.5?.5*wE(n*2,.1125,.45):.5+.5*RE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-wu.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?wu.easeInBounce(n*2)*.5:wu.easeOutBounce(n*2-1)*.5+.5};function iw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function IE(n){return iw(n)?n:new Uu(n)}function wm(n){return iw(n)?n:new Uu(n).saturate(.5).darken(.1).hexString()}const ok=["x","y","borderWidth","radius","tension"],lk=["color","borderColor","backgroundColor"];function uk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:lk},numbers:{type:"number",properties:ok}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ck(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const CE=new Map;function hk(n,t){t=t||{};const e=n+JSON.stringify(t);let i=CE.get(e);return i||(i=new Intl.NumberFormat(n,t),CE.set(e,i)),i}function fk(n,t,e){return hk(t,e).format(n)}const dk={values(n){return Xe(n)?n:""+n}};var gk={formatters:dk};function mk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ba=Object.create(null),up=Object.create(null);function Ru(n,t){if(!t)return n;const e=t.split(".");for(let i=0,a=e.length;i<a;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Rm(n,t,e){return typeof t=="string"?zu(Ru(n,t),e):zu(Ru(n,""),t)}class pk{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>wm(a.backgroundColor),this.hoverBorderColor=(i,a)=>wm(a.borderColor),this.hoverColor=(i,a)=>wm(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Rm(this,t,e)}get(t){return Ru(this,t)}describe(t,e){return Rm(up,t,e)}override(t,e){return Rm(ba,t,e)}route(t,e,i,a){const o=Ru(this,t),u=Ru(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=u[a];return Ft(d)?Object.assign({},m,d):Zt(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var ve=new pk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uk,ck,mk]);function _k(n){return!n||an(n.size)||an(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function xE(n,t,e,i,a){let o=t[a];return o||(o=t[a]=n.measureText(a).width,e.push(a)),o>i&&(i=o),i}function aa(n,t,e){const i=n.currentDevicePixelRatio,a=e!==0?Math.max(e/2,.5):0;return Math.round((t-a)*i)/i+a}function DE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function OE(n,t,e,i){sw(n,t,e,i,null)}function sw(n,t,e,i,a){let o,u,h,d,m,_,v,T;const w=t.pointStyle,x=t.rotation,V=t.radius;let M=(x||0)*WM;if(w&&typeof w=="object"&&(o=w.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(M),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(V)||V<=0)){switch(n.beginPath(),w){default:a?n.ellipse(e,i,a/2,V,0,0,we):n.arc(e,i,V,0,we),n.closePath();break;case"triangle":_=a?a/2:V,n.moveTo(e+Math.sin(M)*_,i-Math.cos(M)*V),M+=TE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*V),M+=TE,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*V),n.closePath();break;case"rectRounded":m=V*.516,d=V-m,u=Math.cos(M+sa)*d,v=Math.cos(M+sa)*(a?a/2-m:d),h=Math.sin(M+sa)*d,T=Math.sin(M+sa)*(a?a/2-m:d),n.arc(e-v,i-h,m,M-je,M-Me),n.arc(e+T,i-u,m,M-Me,M),n.arc(e+v,i+h,m,M,M+Me),n.arc(e-T,i+u,m,M+Me,M+je),n.closePath();break;case"rect":if(!x){d=Math.SQRT1_2*V,_=a?a/2:d,n.rect(e-_,i-d,2*_,2*d);break}M+=sa;case"rectRot":v=Math.cos(M)*(a?a/2:V),u=Math.cos(M)*V,h=Math.sin(M)*V,T=Math.sin(M)*(a?a/2:V),n.moveTo(e-v,i-h),n.lineTo(e+T,i-u),n.lineTo(e+v,i+h),n.lineTo(e-T,i+u),n.closePath();break;case"crossRot":M+=sa;case"cross":v=Math.cos(M)*(a?a/2:V),u=Math.cos(M)*V,h=Math.sin(M)*V,T=Math.sin(M)*(a?a/2:V),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-u),n.lineTo(e-T,i+u);break;case"star":v=Math.cos(M)*(a?a/2:V),u=Math.cos(M)*V,h=Math.sin(M)*V,T=Math.sin(M)*(a?a/2:V),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-u),n.lineTo(e-T,i+u),M+=sa,v=Math.cos(M)*(a?a/2:V),u=Math.cos(M)*V,h=Math.sin(M)*V,T=Math.sin(M)*(a?a/2:V),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-u),n.lineTo(e-T,i+u);break;case"line":u=a?a/2:Math.cos(M)*V,h=Math.sin(M)*V,n.moveTo(e-u,i-h),n.lineTo(e+u,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(M)*(a?a/2:V),i+Math.sin(M)*V);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function rw(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function g_(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function m_(n){n.restore()}function yk(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),an(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function vk(n,t,e,i,a){if(a.strikethrough||a.underline){const o=n.measureText(i),u=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,_=a.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(u,_),n.lineTo(h,_),n.stroke()}}function bk(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Df(n,t,e,i,a,o={}){const u=Xe(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=a.string,yk(n,o),d=0;d<u.length;++d)m=u[d],o.backdrop&&bk(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),an(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),vk(n,e,i,m,o),i+=Number(a.lineHeight);n.restore()}function cp(n,t){const{x:e,y:i,w:a,h:o,radius:u}=t;n.arc(e+u.topLeft,i+u.topLeft,u.topLeft,1.5*je,je,!0),n.lineTo(e,i+o-u.bottomLeft),n.arc(e+u.bottomLeft,i+o-u.bottomLeft,u.bottomLeft,je,Me,!0),n.lineTo(e+a-u.bottomRight,i+o),n.arc(e+a-u.bottomRight,i+o-u.bottomRight,u.bottomRight,Me,0,!0),n.lineTo(e+a,i+u.topRight),n.arc(e+a-u.topRight,i+u.topRight,u.topRight,0,-Me,!0),n.lineTo(e+u.topLeft,i)}const Ek=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sk(n,t){const e=(""+n).match(Ek);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Ak=n=>+n||0;function p_(n,t){const e={},i=Ft(t),a=i?Object.keys(t):t,o=Ft(n)?i?u=>Zt(n[u],n[t[u]]):u=>n[u]:()=>n;for(const u of a)e[u]=Ak(o(u));return e}function wk(n){return p_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Iu(n){return p_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function si(n){const t=wk(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vn(n,t){n=n||{},t=t||ve.font;let e=Zt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Zt(n.style,t.style);i&&!(""+i).match(Tk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Zt(n.family,t.family),lineHeight:Sk(Zt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Zt(n.weight,t.weight),string:""};return a.string=_k(a),a}function Ph(n,t,e,i){let a,o,u;for(a=0,o=n.length;a<o;++a)if(u=n[a],u!==void 0&&u!==void 0)return u}function Rk(n,t,e){const{min:i,max:a}=n,o=XA(t,(a-i)/2),u=(h,d)=>e&&h===0?0:h+d;return{min:u(i,-Math.abs(o)),max:u(a,o)}}function Go(n,t){return Object.assign(Object.create(n),t)}function __(n,t=[""],e,i,a=()=>n[0]){const o=e||n;typeof i>"u"&&(i=uw("_fallback",n));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:a,override:h=>__([h,...n],t,o,i)};return new Proxy(u,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return ow(h,d,()=>Nk(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return kE(h).includes(d)},ownKeys(h){return kE(h)},set(h,d,m){const _=h._storage||(h._storage=a());return h[d]=_[d]=m,delete h._keys,!0}})}function Uo(n,t,e,i){const a={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:aw(n,i),setContext:o=>Uo(n,o,e,i),override:o=>Uo(n.override(o),t,e,i)};return new Proxy(a,{deleteProperty(o,u){return delete o[u],delete n[u],!0},get(o,u,h){return ow(o,u,()=>Ck(o,u,h))},getOwnPropertyDescriptor(o,u){return o._descriptors.allKeys?Reflect.has(n,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,u)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,u){return Reflect.has(n,u)},ownKeys(){return Reflect.ownKeys(n)},set(o,u,h){return n[u]=h,delete o[u],!0}})}function aw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:a=t.allKeys}=n;return{allKeys:a,scriptable:e,indexable:i,isScriptable:pr(e)?e:()=>e,isIndexable:pr(i)?i:()=>i}}const Ik=(n,t)=>n?n+f_(t):t,y_=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ow(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Ck(n,t,e){const{_proxy:i,_context:a,_subProxy:o,_descriptors:u}=n;let h=i[t];return pr(h)&&u.isScriptable(t)&&(h=xk(t,h,n,e)),Xe(h)&&h.length&&(h=Dk(t,h,n,u.isIndexable)),y_(t,h)&&(h=Uo(h,a,o&&o[t],u)),h}function xk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:u,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,u||i);return h.delete(n),y_(n,d)&&(d=v_(a._scopes,a,n,d)),d}function Dk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:u,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ft(t[0])){const d=t,m=a._scopes.filter(_=>_!==d);t=[];for(const _ of d){const v=v_(m,a,n,_);t.push(Uo(v,o,u&&u[n],h))}}return t}function lw(n,t,e){return pr(n)?n(t,e):n}const Ok=(n,t)=>n===!0?t:typeof n=="string"?Bu(t,n):void 0;function Mk(n,t,e,i,a){for(const o of t){const u=Ok(e,o);if(u){n.add(u);const h=lw(u._fallback,e,a);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(u===!1&&typeof i<"u"&&e!==i)return null}return!1}function v_(n,t,e,i){const a=t._rootScopes,o=lw(t._fallback,e,i),u=[...n,...a],h=new Set;h.add(i);let d=ME(h,u,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=ME(h,u,o,d,i),d===null)?!1:__(Array.from(h),[""],a,o,()=>kk(t,e,i))}function ME(n,t,e,i,a){for(;e;)e=Mk(n,t,e,i,a);return e}function kk(n,t,e){const i=n._getTarget();t in i||(i[t]={});const a=i[t];return Xe(a)&&Ft(e)?e:a||{}}function Nk(n,t,e,i){let a;for(const o of t)if(a=uw(Ik(o,n),e),typeof a<"u")return y_(n,a)?v_(e,i,n,a):a}function uw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function kE(n){let t=n._keys;return t||(t=n._keys=Pk(n._scopes)),t}function Pk(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(a=>!a.startsWith("_")))t.add(i);return Array.from(t)}function b_(){return typeof window<"u"&&typeof document<"u"}function E_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Of(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ed=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Vk(n,t){return ed(n).getPropertyValue(t)}const Lk=["top","right","bottom","left"];function fa(n,t,e){const i={};e=e?"-"+e:"";for(let a=0;a<4;a++){const o=Lk[a];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Uk=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function zk(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:a,offsetY:o}=i;let u=!1,h,d;if(Uk(a,o,n.target))h=a,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,u=!0}return{x:h,y:d,box:u}}function ua(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,a=ed(e),o=a.boxSizing==="border-box",u=fa(a,"padding"),h=fa(a,"border","width"),{x:d,y:m,box:_}=zk(n,e),v=u.left+(_&&h.left),T=u.top+(_&&h.top);let{width:w,height:x}=t;return o&&(w-=u.width+h.width,x-=u.height+h.height),{x:Math.round((d-v)/w*e.width/i),y:Math.round((m-T)/x*e.height/i)}}function Bk(n,t,e){let i,a;if(t===void 0||e===void 0){const o=n&&E_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const u=o.getBoundingClientRect(),h=ed(o),d=fa(h,"border","width"),m=fa(h,"padding");t=u.width-m.width-d.width,e=u.height-m.height-d.height,i=Of(h.maxWidth,o,"clientWidth"),a=Of(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||If,maxHeight:a||If}}const Vh=n=>Math.round(n*10)/10;function Hk(n,t,e,i){const a=ed(n),o=fa(a,"margin"),u=Of(a.maxWidth,n,"clientWidth")||If,h=Of(a.maxHeight,n,"clientHeight")||If,d=Bk(n,t,e);let{width:m,height:_}=d;if(a.boxSizing==="content-box"){const T=fa(a,"border","width"),w=fa(a,"padding");m-=w.width+T.width,_-=w.height+T.height}return m=Math.max(0,m-o.width),_=Math.max(0,i?m/i:_-o.height),m=Vh(Math.min(m,u,d.maxWidth)),_=Vh(Math.min(_,h,d.maxHeight)),m&&!_&&(_=Vh(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&_>d.height&&(_=d.height,m=Vh(Math.floor(_*i))),{width:m,height:_}}function NE(n,t,e){const i=t||1,a=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const u=n.canvas;return u.style&&(e||!u.style.height&&!u.style.width)&&(u.style.height=`${n.height}px`,u.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||u.height!==a||u.width!==o?(n.currentDevicePixelRatio=i,u.height=a,u.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const jk=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};b_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function PE(n,t){const e=Vk(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Fk=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},qk=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function xo(n,t,e){return n?Fk(t,e):qk()}function cw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function hw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Gk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,a){const o=e.listeners[a],u=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:u,currentStep:Math.min(i-e.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=tw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let u=o.length-1,h=!1,d;for(;u>=0;--u)d=o[u],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[u]=o[o.length-1],o.pop());h&&(a.draw(),this._notify(a,i,t,"progress")),o.length||(i.running=!1,this._notify(a,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var as=new Gk;const VE="transparent",Kk={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=IE(n||VE),a=i.valid&&IE(t||VE);return a&&a.valid?a.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Yk{constructor(t,e,i,a){const o=e[i];a=Ph([t.to,a,o,t.from]);const u=Ph([t.from,o,a]);this._active=!0,this._fn=t.fn||Kk[t.type||typeof u],this._easing=wu[t.easing]||wu.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=u,this._to=a,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,u=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Ph([t.to,e,a,t.from]),this._from=Ph([t.from,a,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,a=this._prop,o=this._from,u=this._loop,h=this._to;let d;if(this._active=o!==h&&(u||e<i),!this._active){this._target[a]=h,this._notify(!0);return}if(e<0){this._target[a]=o;return}d=e/i%2,d=u&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][e]()}}class fw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(ve.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const o=t[a];if(!Ft(o))return;const u={};for(const h of e)u[h]=o[h];(Xe(o.properties)&&o.properties||[a]).forEach(h=>{(h===a||!i.has(h))&&i.set(h,u)})})}_animateOptions(t,e){const i=e.options,a=Wk(t,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&Qk(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,a=[],o=t.$animations||(t.$animations={}),u=Object.keys(e),h=Date.now();let d;for(d=u.length-1;d>=0;--d){const m=u[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(t,e));continue}const _=e[m];let v=o[m];const T=i.get(m);if(v)if(T&&v.active()){v.update(T,_,h);continue}else v.cancel();if(!T||!T.duration){t[m]=_;continue}o[m]=v=new Yk(T,t,m,_),a.push(v)}return a}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return as.add(this._chart,i),!0}}function Qk(n,t){const e=[],i=Object.keys(t);for(let a=0;a<i.length;a++){const o=n[i[a]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Wk(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function LE(n,t){const e=n&&n.options||{},i=e.reverse,a=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:a,end:i?a:o}}function Xk(n,t,e){if(e===!1)return!1;const i=LE(n,e),a=LE(t,e);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function $k(n){let t,e,i,a;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,a=n.left):t=e=i=a=n,{top:t,right:e,bottom:i,left:a,disabled:n===!1}}function dw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let a,o;for(a=0,o=i.length;a<o;++a)e.push(i[a].index);return e}function UE(n,t,e,i={}){const a=n.keys,o=i.mode==="single";let u,h,d,m;if(t===null)return;let _=!1;for(u=0,h=a.length;u<h;++u){if(d=+a[u],d===e){if(_=!0,i.all)continue;break}m=n.values[d],ps(m)&&(o||t===0||SE(t)===SE(m))&&(t+=m)}return!_&&!i.all?0:t}function Zk(n,t){const{iScale:e,vScale:i}=t,a=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",u=Object.keys(n),h=new Array(u.length);let d,m,_;for(d=0,m=u.length;d<m;++d)_=u[d],h[d]={[a]:_,[o]:n[_]};return h}function Im(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Jk(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function tN(n){const{min:t,max:e,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:a?e:Number.POSITIVE_INFINITY}}function eN(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function zE(n,t,e,i){for(const a of t.getMatchingVisibleMetas(i).reverse()){const o=n[a.index];if(e&&o>0||!e&&o<0)return a.index}return null}function BE(n,t){const{chart:e,_cachedMeta:i}=n,a=e._stacks||(e._stacks={}),{iScale:o,vScale:u,index:h}=i,d=o.axis,m=u.axis,_=Jk(o,u,i),v=t.length;let T;for(let w=0;w<v;++w){const x=t[w],{[d]:V,[m]:M}=x,K=x._stacks||(x._stacks={});T=K[m]=eN(a,_,V),T[h]=M,T._top=zE(T,u,!0,i.type),T._bottom=zE(T,u,!1,i.type);const $=T._visualValues||(T._visualValues={});$[h]=M}}function Cm(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function nN(n,t){return Go(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function iN(n,t,e){return Go(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function nu(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const a of t){const o=a._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const xm=n=>n==="reset"||n==="none",HE=(n,t)=>t?n:Object.assign({},n),sN=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:dw(e,!0),values:null};class Cu{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Im(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&nu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),a=(v,T,w,x)=>v==="x"?T:v==="r"?x:w,o=e.xAxisID=Zt(i.xAxisID,Cm(t,"x")),u=e.yAxisID=Zt(i.yAxisID,Cm(t,"y")),h=e.rAxisID=Zt(i.rAxisID,Cm(t,"r")),d=e.indexAxis,m=e.iAxisID=a(d,o,u,h),_=e.vAxisID=a(d,u,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(u),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&AE(this._data,this),t._stacked&&nu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e)){const a=this._cachedMeta;this._data=Zk(e,a)}else if(i!==e){if(i){AE(i,this);const a=this._cachedMeta;nu(a),a._parsed=[]}e&&Object.isExtensible(e)&&ik(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=e._stacked;e._stacked=Im(e.vScale,e),e.stack!==i.stack&&(a=!0,nu(e),e.stack=i.stack),this._resyncElements(t),(a||o!==e._stacked)&&(BE(this,e._parsed),e._stacked=Im(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:u}=i,h=o.axis;let d=t===0&&e===a.length?!0:i._sorted,m=t>0&&i._parsed[t-1],_,v,T;if(this._parsing===!1)i._parsed=a,i._sorted=!0,T=a;else{Xe(a[t])?T=this.parseArrayData(i,a,t,e):Ft(a[t])?T=this.parseObjectData(i,a,t,e):T=this.parsePrimitiveData(i,a,t,e);const w=()=>v[h]===null||m&&v[h]<m[h];for(_=0;_<e;++_)i._parsed[_+t]=v=T[_],d&&(w()&&(d=!1),m=v);i._sorted=d}u&&BE(this,T)}parsePrimitiveData(t,e,i,a){const{iScale:o,vScale:u}=t,h=o.axis,d=u.axis,m=o.getLabels(),_=o===u,v=new Array(a);let T,w,x;for(T=0,w=a;T<w;++T)x=T+i,v[T]={[h]:_||o.parse(m[x],x),[d]:u.parse(e[x],x)};return v}parseArrayData(t,e,i,a){const{xScale:o,yScale:u}=t,h=new Array(a);let d,m,_,v;for(d=0,m=a;d<m;++d)_=d+i,v=e[_],h[d]={x:o.parse(v[0],_),y:u.parse(v[1],_)};return h}parseObjectData(t,e,i,a){const{xScale:o,yScale:u}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let _,v,T,w;for(_=0,v=a;_<v;++_)T=_+i,w=e[T],m[_]={x:o.parse(Bu(w,h),T),y:u.parse(Bu(w,d),T)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const a=this.chart,o=this._cachedMeta,u=e[t.axis],h={keys:dw(a,!0),values:e._stacks[t.axis]._visualValues};return UE(h,u,o.index,{mode:i})}updateRangeFromParsed(t,e,i,a){const o=i[e.axis];let u=o===null?NaN:o;const h=a&&i._stacks[e.axis];a&&h&&(a.values=h,u=UE(a,o,this._cachedMeta.index)),t.min=Math.min(t.min,u),t.max=Math.max(t.max,u)}getMinMax(t,e){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&t===i.iScale,u=a.length,h=this._getOtherScale(t),d=sN(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:v}=tN(h);let T,w;function x(){w=a[T];const V=w[h.axis];return!ps(w[t.axis])||_>V||v<V}for(T=0;T<u&&!(!x()&&(this.updateRangeFromParsed(m,t,w,d),o));++T);if(o){for(T=u-1;T>=0;--T)if(!x()){this.updateRangeFromParsed(m,t,w,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let a,o,u;for(a=0,o=e.length;a<o;++a)u=e[a][t.axis],ps(u)&&i.push(u);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,a=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=$k(Zt(this.options.clip,Xk(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,a=i.data||[],o=e.chartArea,u=[],h=this._drawStart||0,d=this._drawCount||a.length-h,m=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,h,d),_=h;_<h+d;++_){const v=a[_];v.hidden||(v.active&&m?u.push(v):v.draw(t,o))}for(_=0;_<u.length;++_)u[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const a=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const u=this._cachedMeta.data[t];o=u.$context||(u.$context=iN(this.getContext(),t,u)),o.parsed=this.getParsed(t),o.raw=a.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=nN(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const a=e==="active",o=this._cachedDataOpts,u=t+"-"+e,h=o[u],d=this.enableOptionSharing&&Rf(i);if(h)return HE(h,d);const m=this.chart.config,_=m.datasetElementScopeKeys(this._type,t),v=a?[`${t}Hover`,"hover",t,""]:[t,""],T=m.getOptionScopes(this.getDataset(),_),w=Object.keys(ve.elements[t]),x=()=>this.getContext(i,a,e),V=m.resolveNamedOptions(T,w,x,v);return V.$shared&&(V.$shared=d,o[u]=Object.freeze(HE(V,d))),V}_resolveAnimations(t,e,i){const a=this.chart,o=this._cachedDataOpts,u=`animation-${e}`,h=o[u];if(h)return h;let d;if(a.options.animation!==!1){const _=this.chart.config,v=_.datasetAnimationScopeKeys(this._type,e),T=_.getOptionScopes(this.getDataset(),v);d=_.createResolver(T,this.getContext(t,i,e))}const m=new fw(a,d&&d.animations);return d&&d._cacheable&&(o[u]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xm(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),a=this._sharedOptions,o=this.getSharedOptions(i),u=this.includeOptions(e,o)||o!==a;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:u}}updateElement(t,e,i,a){xm(a)?Object.assign(t,i):this._resolveAnimations(e,a).update(t,i)}updateSharedOptions(t,e,i){t&&!xm(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,a){t.active=a;const o=this.getStyle(e,a);this._resolveAnimations(e,i,a).update(t,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const a=i.length,o=e.length,u=Math.min(o,a);u&&this.parse(0,u),o>a?this._insertElements(a,o-a,t):o<a&&this._removeElements(o,a-o)}_insertElements(t,e,i=!0){const a=this._cachedMeta,o=a.data,u=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=u;h--)m[h]=m[h-e]};for(d(o),h=t;h<u;++h)o[h]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,a){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(t,e);i._stacked&&nu(i,a)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,a]=t;this[e](i,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}xt(Cu,"defaults",{}),xt(Cu,"datasetElementType",null),xt(Cu,"dataElementType",null);function rN(n,t,e){let i=1,a=1,o=0,u=0;if(t<we){const h=n,d=h+t,m=Math.cos(h),_=Math.sin(h),v=Math.cos(d),T=Math.sin(d),w=(Z,rt,nt)=>xf(Z,h,d,!0)?1:Math.max(rt,rt*e,nt,nt*e),x=(Z,rt,nt)=>xf(Z,h,d,!0)?-1:Math.min(rt,rt*e,nt,nt*e),V=w(0,m,v),M=w(Me,_,T),K=x(je,m,v),$=x(je+Me,_,T);i=(V-K)/2,a=(M-$)/2,o=-(V+K)/2,u=-(M+$)/2}return{ratioX:i,ratioY:a,offsetX:o,offsetY:u}}class mu extends Cu{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let o=d=>+i[d];if(Ft(i[t])){const{key:d="value"}=this._parsing;o=m=>+Bu(i[m],d)}let u,h;for(u=t,h=t+e;u<h;++u)a._parsed[u]=o(u)}}_getRotation(){return ha(this.options.rotation-90)}_getCircumference(){return ha(this.options.circumference)}_getRotationExtents(){let t=we,e=-we;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,o=a._getRotation(),u=a._getCircumference();t=Math.min(t,o),e=Math.max(e,o+u)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,a=this._cachedMeta,o=a.data,u=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-u)/2,0),d=Math.min(FM(this.options.cutout,h),1),m=this._getRingWeight(this.index),{circumference:_,rotation:v}=this._getRotationExtents(),{ratioX:T,ratioY:w,offsetX:x,offsetY:V}=rN(v,_,d),M=(i.width-u)/T,K=(i.height-u)/w,$=Math.max(Math.min(M,K)/2,0),Z=XA(this.options.radius,$),rt=Math.max(Z*d,0),nt=(Z-rt)/this._getVisibleDatasetWeightTotal();this.offsetX=x*Z,this.offsetY=V*Z,a.total=this.calculateTotal(),this.outerRadius=Z-nt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-nt*m,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,a=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||a._parsed[t]===null||a.data[t].hidden?0:this.calculateCircumference(a._parsed[t]*o/we)}updateElements(t,e,i,a){const o=a==="reset",u=this.chart,h=u.chartArea,m=u.options.animation,_=(h.left+h.right)/2,v=(h.top+h.bottom)/2,T=o&&m.animateScale,w=T?0:this.innerRadius,x=T?0:this.outerRadius,{sharedOptions:V,includeOptions:M}=this._getSharedOptions(e,a);let K=this._getRotation(),$;for($=0;$<e;++$)K+=this._circumference($,o);for($=e;$<e+i;++$){const Z=this._circumference($,o),rt=t[$],nt={x:_+this.offsetX,y:v+this.offsetY,startAngle:K,endAngle:K+Z,circumference:Z,outerRadius:x,innerRadius:w};M&&(nt.options=V||this.resolveDataElementOptions($,rt.active?"active":a)),K+=Z,this.updateElement(rt,$,nt,a)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,a;for(a=0;a<e.length;a++){const o=t._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!e[a].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?we*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,a=i.data.labels||[],o=fk(e._parsed[t],i.options.locale);return{label:a[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let a,o,u,h,d;if(!t){for(a=0,o=i.data.datasets.length;a<o;++a)if(i.isDatasetVisible(a)){u=i.getDatasetMeta(a),t=u.data,h=u.controller;break}}if(!t)return 0;for(a=0,o=t.length;a<o;++a)d=h.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(e=Math.max(e,d.borderWidth||0,d.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,a=t.length;i<a;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}xt(mu,"id","doughnut"),xt(mu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),xt(mu,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),xt(mu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:a}}=t.legend.options;return e.labels.map((o,u)=>{const d=t.getDatasetMeta(0).controller.getStyle(u);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:a,lineWidth:d.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(u),index:u}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class hp extends mu{}xt(hp,"id","pie"),xt(hp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function oa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class T_{constructor(t){xt(this,"options");this.options=t||{}}static override(t){Object.assign(T_.prototype,t)}init(){}formats(){return oa()}parse(){return oa()}format(){return oa()}add(){return oa()}diff(){return oa()}startOf(){return oa()}endOf(){return oa()}}var aN={_date:T_};function oN(n,t,e,i){const{controller:a,data:o,_sorted:u}=n,h=a._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&u&&o.length){const m=h._reversePixels?ek:lp;if(i){if(a._sharedOptions){const _=o[0],v=typeof _.getRange=="function"&&_.getRange(t);if(v){const T=m(o,t,e-v),w=m(o,t,e+v);return{lo:T.lo,hi:w.hi}}}}else{const _=m(o,t,e);if(d){const{vScale:v}=a._cachedMeta,{_parsed:T}=n,w=T.slice(0,_.lo+1).reverse().findIndex(V=>!an(V[v.axis]));_.lo-=Math.max(0,w);const x=T.slice(_.hi).findIndex(V=>!an(V[v.axis]));_.hi+=Math.max(0,x)}return _}}return{lo:0,hi:o.length-1}}function nd(n,t,e,i,a){const o=n.getSortedVisibleDatasetMetas(),u=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:_}=o[h],{lo:v,hi:T}=oN(o[h],t,u,a);for(let w=v;w<=T;++w){const x=_[w];x.skip||i(x,m,w)}}}function lN(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,a){const o=t?Math.abs(i.x-a.x):0,u=e?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(u,2))}}function Dm(n,t,e,i,a){const o=[];return!a&&!n.isPointInArea(t)||nd(n,e,t,function(h,d,m){!a&&!rw(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function uN(n,t,e,i){let a=[];function o(u,h,d){const{startAngle:m,endAngle:_}=u.getProps(["startAngle","endAngle"],i),{angle:v}=ZA(u,{x:t.x,y:t.y});xf(v,m,_)&&a.push({element:u,datasetIndex:h,index:d})}return nd(n,e,t,o),a}function cN(n,t,e,i,a,o){let u=[];const h=lN(e);let d=Number.POSITIVE_INFINITY;function m(_,v,T){const w=_.inRange(t.x,t.y,a);if(i&&!w)return;const x=_.getCenterPoint(a);if(!(!!o||n.isPointInArea(x))&&!w)return;const M=h(t,x);M<d?(u=[{element:_,datasetIndex:v,index:T}],d=M):M===d&&u.push({element:_,datasetIndex:v,index:T})}return nd(n,e,t,m),u}function Om(n,t,e,i,a,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?uN(n,t,e,a):cN(n,t,e,i,a,o)}function jE(n,t,e,i,a){const o=[],u=e==="x"?"inXRange":"inYRange";let h=!1;return nd(n,e,t,(d,m,_)=>{d[u]&&d[u](t[e],a)&&(o.push({element:d,datasetIndex:m,index:_}),h=h||d.inRange(t.x,t.y,a))}),i&&!h?[]:o}var hN={modes:{index(n,t,e,i){const a=ua(t,n),o=e.axis||"x",u=e.includeInvisible||!1,h=e.intersect?Dm(n,a,o,i,u):Om(n,a,o,!1,i,u),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const _=h[0].index,v=m.data[_];v&&!v.skip&&d.push({element:v,datasetIndex:m.index,index:_})}),d):[]},dataset(n,t,e,i){const a=ua(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;let h=e.intersect?Dm(n,a,o,i,u):Om(n,a,o,!1,i,u);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let _=0;_<m.length;++_)h.push({element:m[_],datasetIndex:d,index:_})}return h},point(n,t,e,i){const a=ua(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;return Dm(n,a,o,i,u)},nearest(n,t,e,i){const a=ua(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;return Om(n,a,o,e.intersect,i,u)},x(n,t,e,i){const a=ua(t,n);return jE(n,a,"x",e.intersect,i)},y(n,t,e,i){const a=ua(t,n);return jE(n,a,"y",e.intersect,i)}}};const gw=["left","top","right","bottom"];function iu(n,t){return n.filter(e=>e.pos===t)}function FE(n,t){return n.filter(e=>gw.indexOf(e.pos)===-1&&e.box.axis===t)}function su(n,t){return n.sort((e,i)=>{const a=t?i:e,o=t?e:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function fN(n){const t=[];let e,i,a,o,u,h;for(e=0,i=(n||[]).length;e<i;++e)a=n[e],{position:o,options:{stack:u,stackWeight:h=1}}=a,t.push({index:e,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:u&&o+u,stackWeight:h});return t}function dN(n){const t={};for(const e of n){const{stack:i,pos:a,stackWeight:o}=e;if(!i||!gw.includes(a))continue;const u=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=o}return t}function gN(n,t){const e=dN(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=t;let o,u,h;for(o=0,u=n.length;o<u;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],_=m&&h.stackWeight/m.weight;h.horizontal?(h.width=_?_*i:d&&t.availableWidth,h.height=a):(h.width=i,h.height=_?_*a:d&&t.availableHeight)}return e}function mN(n){const t=fN(n),e=su(t.filter(m=>m.box.fullSize),!0),i=su(iu(t,"left"),!0),a=su(iu(t,"right")),o=su(iu(t,"top"),!0),u=su(iu(t,"bottom")),h=FE(t,"x"),d=FE(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(u).concat(h),chartArea:iu(t,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(u).concat(h)}}function qE(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function mw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function pN(n,t,e,i){const{pos:a,box:o}=e,u=n.maxPadding;if(!Ft(a)){e.size&&(n[a]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[a]+=e.size}o.getPadding&&mw(u,o.getPadding());const h=Math.max(0,t.outerWidth-qE(u,n,"left","right")),d=Math.max(0,t.outerHeight-qE(u,n,"top","bottom")),m=h!==n.w,_=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:_}:{same:_,other:m}}function _N(n){const t=n.maxPadding;function e(i){const a=Math.max(t[i]-n[i],0);return n[i]+=a,a}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function yN(n,t){const e=t.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(u=>{o[u]=Math.max(t[u],e[u])}),o}return i(n?["left","right"]:["top","bottom"])}function pu(n,t,e,i){const a=[];let o,u,h,d,m,_;for(o=0,u=n.length,m=0;o<u;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,yN(h.horizontal,t));const{same:v,other:T}=pN(t,e,h,i);m|=v&&a.length,_=_||T,d.fullSize||a.push(h)}return m&&pu(a,t,e,i)||_}function Lh(n,t,e,i,a){n.top=e,n.left=t,n.right=t+i,n.bottom=e+a,n.width=i,n.height=a}function GE(n,t,e,i){const a=e.padding;let{x:o,y:u}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/m.weight||1;if(h.horizontal){const v=t.w*_,T=m.size||d.height;Rf(m.start)&&(u=m.start),d.fullSize?Lh(d,a.left,u,e.outerWidth-a.right-a.left,T):Lh(d,t.left+m.placed,u,v,T),m.start=u,m.placed+=v,u=d.bottom}else{const v=t.h*_,T=m.size||d.width;Rf(m.start)&&(o=m.start),d.fullSize?Lh(d,o,a.top,T,e.outerHeight-a.bottom-a.top):Lh(d,o,t.top+m.placed,T,v),m.start=o,m.placed+=v,o=d.right}}t.x=o,t.y=u}var nr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const a=si(n.options.layout.padding),o=Math.max(t-a.width,0),u=Math.max(e-a.height,0),h=mN(n.boxes),d=h.vertical,m=h.horizontal;$t(n.boxes,V=>{typeof V.beforeLayout=="function"&&V.beforeLayout()});const _=d.reduce((V,M)=>M.box.options&&M.box.options.display===!1?V:V+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:o,availableHeight:u,vBoxMaxWidth:o/2/_,hBoxMaxHeight:u/2}),T=Object.assign({},a);mw(T,si(i));const w=Object.assign({maxPadding:T,w:o,h:u,x:a.left,y:a.top},a),x=gN(d.concat(m),v);pu(h.fullSize,w,v,x),pu(d,w,v,x),pu(m,w,v,x)&&pu(d,w,v,x),_N(w),GE(h.leftAndTop,w,v,x),w.x+=w.w,w.y+=w.h,GE(h.rightAndBottom,w,v,x),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},$t(h.chartArea,V=>{const M=V.box;Object.assign(M,n.chartArea),M.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class pw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,a){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,a?Math.floor(e/a):i)}}isAttached(t){return!0}updateConfig(t){}}class vN extends pw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ef="$chartjs",bN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},KE=n=>n===null||n==="";function EN(n,t){const e=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[ef]={initial:{height:i,width:a,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",KE(a)){const o=PE(n,"width");o!==void 0&&(n.width=o)}if(KE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=PE(n,"height");o!==void 0&&(n.height=o)}return n}const _w=jk?{passive:!0}:!1;function TN(n,t,e){n&&n.addEventListener(t,e,_w)}function SN(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,_w)}function AN(n,t){const e=bN[n.type]||n.type,{x:i,y:a}=ua(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Mf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function wN(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Mf(h.addedNodes,i),u=u&&!Mf(h.removedNodes,i);u&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}function RN(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Mf(h.removedNodes,i),u=u&&!Mf(h.addedNodes,i);u&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}const Hu=new Map;let YE=0;function yw(){const n=window.devicePixelRatio;n!==YE&&(YE=n,Hu.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function IN(n,t){Hu.size||window.addEventListener("resize",yw),Hu.set(n,t)}function CN(n){Hu.delete(n),Hu.size||window.removeEventListener("resize",yw)}function xN(n,t,e){const i=n.canvas,a=i&&E_(i);if(!a)return;const o=ew((h,d)=>{const m=a.clientWidth;e(h,d),m<a.clientWidth&&e()},window),u=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,_=d.contentRect.height;m===0&&_===0||o(m,_)});return u.observe(a),IN(n,o),u}function Mm(n,t,e){e&&e.disconnect(),t==="resize"&&CN(n)}function DN(n,t,e){const i=n.canvas,a=ew(o=>{n.ctx!==null&&e(AN(o,n))},n);return TN(i,t,a),a}class ON extends pw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(EN(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[ef])return!1;const i=e[ef].initial;["height","width"].forEach(o=>{const u=i[o];an(u)?e.removeAttribute(o):e.setAttribute(o,u)});const a=i.style||{};return Object.keys(a).forEach(o=>{e.style[o]=a[o]}),e.width=e.width,delete e[ef],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const a=t.$proxies||(t.$proxies={}),u={attach:wN,detach:RN,resize:xN}[e]||DN;a[e]=u(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),a=i[e];if(!a)return;({attach:Mm,detach:Mm,resize:Mm}[e]||SN)(t,e,a),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,a){return Hk(t,e,i,a)}isAttached(t){const e=t&&E_(t);return!!(e&&e.isConnected)}}function MN(n){return!b_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?vN:ON}class Ea{constructor(){xt(this,"x");xt(this,"y");xt(this,"active",!1);xt(this,"options");xt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Cf(this.x)&&Cf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const a={};return t.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}xt(Ea,"defaults",{}),xt(Ea,"defaultRoutes");function kN(n,t){const e=n.options.ticks,i=NN(n),a=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?VN(t):[],u=o.length,h=o[0],d=o[u-1],m=[];if(u>a)return LN(t,m,o,u/a),m;const _=PN(o,t,a);if(u>0){let v,T;const w=u>1?Math.round((d-h)/(u-1)):null;for(Uh(t,m,_,an(w)?0:h-w,h),v=0,T=u-1;v<T;v++)Uh(t,m,_,o[v],o[v+1]);return Uh(t,m,_,d,an(w)?t.length:d+w),m}return Uh(t,m,_),m}function NN(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),a=n._maxLength/e;return Math.floor(Math.min(i,a))}function PN(n,t,e){const i=UN(n),a=t.length/e;if(!i)return Math.max(a,1);const o=XM(i);for(let u=0,h=o.length-1;u<h;u++){const d=o[u];if(d>a)return d}return Math.max(a,1)}function VN(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function LN(n,t,e,i){let a=0,o=e[0],u;for(i=Math.ceil(i),u=0;u<n.length;u++)u===o&&(t.push(n[u]),a++,o=e[a*i])}function Uh(n,t,e,i,a){const o=Zt(i,0),u=Math.min(Zt(a,n.length),n.length);let h=0,d,m,_;for(e=Math.ceil(e),a&&(d=a-i,e=d/Math.floor(d/e)),_=o;_<0;)h++,_=Math.round(o+h*e);for(m=Math.max(o,0);m<u;m++)m===_&&(t.push(n[m]),h++,_=Math.round(o+h*e))}function UN(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const zN=n=>n==="left"?"right":n==="right"?"left":n,QE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,WE=(n,t)=>Math.min(t||n,n);function XE(n,t){const e=[],i=n.length/t,a=n.length;let o=0;for(;o<a;o+=i)e.push(n[Math.floor(o)]);return e}function BN(n,t,e){const i=n.ticks.length,a=Math.min(t,i-1),o=n._startPixel,u=n._endPixel,h=1e-6;let d=n.getPixelForTick(a),m;if(!(e&&(i===1?m=Math.max(d-o,u-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(a-1))/2,d+=a<t?m:-m,d<o-h||d>u+h)))return d}function HN(n,t){$t(n,e=>{const i=e.gc,a=i.length/2;let o;if(a>t){for(o=0;o<a;++o)delete e.data[i[o]];i.splice(0,a)}})}function ru(n){return n.drawTicks?n.tickLength:0}function $E(n,t){if(!n.display)return 0;const e=vn(n.font,t),i=si(n.padding);return(Xe(n.text)?n.text.length:1)*e.lineHeight+i.height}function jN(n,t){return Go(n,{scale:t,type:"scale"})}function FN(n,t,e){return Go(n,{tick:e,index:t,type:"tick"})}function qN(n,t,e){let i=nw(n);return(e&&t!=="right"||!e&&t==="right")&&(i=zN(i)),i}function GN(n,t,e,i){const{top:a,left:o,bottom:u,right:h,chart:d}=n,{chartArea:m,scales:_}=d;let v=0,T,w,x;const V=u-a,M=h-o;if(n.isHorizontal()){if(w=xn(i,o,h),Ft(e)){const K=Object.keys(e)[0],$=e[K];x=_[K].getPixelForValue($)+V-t}else e==="center"?x=(m.bottom+m.top)/2+V-t:x=QE(n,e,t);T=h-o}else{if(Ft(e)){const K=Object.keys(e)[0],$=e[K];w=_[K].getPixelForValue($)-M+t}else e==="center"?w=(m.left+m.right)/2-M+t:w=QE(n,e,t);x=xn(i,u,a),v=e==="left"?-Me:Me}return{titleX:w,titleY:x,maxWidth:T,rotation:v}}class id extends Ea{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:a}=this;return t=Ti(t,Number.POSITIVE_INFINITY),e=Ti(e,Number.NEGATIVE_INFINITY),i=Ti(i,Number.POSITIVE_INFINITY),a=Ti(a,Number.NEGATIVE_INFINITY),{min:Ti(t,i),max:Ti(e,a),minDefined:ps(t),maxDefined:ps(e)}}getMinMax(t){let{min:e,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),u;if(a&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)u=h[d].controller.getMinMax(this,t),a||(e=Math.min(e,u.min)),o||(i=Math.max(i,u.max));return e=o&&e>i?i:e,i=a&&e>i?e:i,{min:Ti(e,Ti(i,e)),max:Ti(i,Ti(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:a,grace:o,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rk(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?XE(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=kN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ae(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i],o.label=ae(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=WE(this.ticks.length,t.ticks.maxTicksLimit),a=e.minRotation||0,o=e.maxRotation;let u=a,h,d,m;if(!this._isVisible()||!e.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const _=this._getLabelSizes(),v=_.widest.width,T=_.highest.height,w=Yn(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:w/(i-1),v+6>h&&(h=w/(i-(t.offset?.5:1)),d=this.maxHeight-ru(t.grid)-e.padding-$E(t.title,this.chart.options.font),m=Math.sqrt(v*v+T*T),u=ZM(Math.min(Math.asin(Yn((_.highest.height+6)/h,-1,1)),Math.asin(Yn(d/m,-1,1))-Math.asin(Yn(T/m,-1,1)))),u=Math.max(a,Math.min(o,u))),this.labelRotation=u}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:a,grid:o}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const d=$E(a,e.options.font);if(h?(t.width=this.maxWidth,t.height=ru(o)+d):(t.height=this.maxHeight,t.width=ru(o)+d),i.display&&this.ticks.length){const{first:m,last:_,widest:v,highest:T}=this._getLabelSizes(),w=i.padding*2,x=ha(this.labelRotation),V=Math.cos(x),M=Math.sin(x);if(h){const K=i.mirror?0:M*v.width+V*T.height;t.height=Math.min(this.maxHeight,t.height+K+w)}else{const K=i.mirror?0:V*v.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+K+w)}this._calculatePadding(m,_,M,V)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,a){const{ticks:{align:o,padding:u},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,w=0;d?m?(T=a*t.width,w=i*e.height):(T=i*t.height,w=a*e.width):o==="start"?w=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,w=e.width/2),this.paddingLeft=Math.max((T-_+u)*this.width/(this.width-_),0),this.paddingRight=Math.max((w-v+u)*this.width/(this.width-v),0)}else{let _=e.height/2,v=t.height/2;o==="start"?(_=0,v=t.height):o==="end"&&(_=e.height,v=0),this.paddingTop=_+u,this.paddingBottom=v+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)an(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=XE(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:a,_longestTextCache:o}=this,u=[],h=[],d=Math.floor(e/WE(e,i));let m=0,_=0,v,T,w,x,V,M,K,$,Z,rt,nt;for(v=0;v<e;v+=d){if(x=t[v].label,V=this._resolveTickFontOptions(v),a.font=M=V.string,K=o[M]=o[M]||{data:{},gc:[]},$=V.lineHeight,Z=rt=0,!an(x)&&!Xe(x))Z=xE(a,K.data,K.gc,Z,x),rt=$;else if(Xe(x))for(T=0,w=x.length;T<w;++T)nt=x[T],!an(nt)&&!Xe(nt)&&(Z=xE(a,K.data,K.gc,Z,nt),rt+=$);u.push(Z),h.push(rt),m=Math.max(Z,m),_=Math.max(rt,_)}HN(o,e);const ct=u.indexOf(m),N=h.indexOf(_),R=I=>({width:u[I]||0,height:h[I]||0});return{first:R(0),last:R(e-1),widest:R(ct),highest:R(N),widths:u,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return tk(this._alignToPixels?aa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=FN(this.getContext(),t,i))}return this.$context||(this.$context=jN(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ha(this.labelRotation),i=Math.abs(Math.cos(e)),a=Math.abs(Math.sin(e)),o=this._getLabelSizes(),u=t.autoSkipPadding||0,h=o?o.widest.width+u:0,d=o?o.highest.height+u:0;return this.isHorizontal()?d*i>h*a?h/i:d/a:d*a<h*i?d/i:h/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,a=this.options,{grid:o,position:u,border:h}=a,d=o.offset,m=this.isHorizontal(),v=this.ticks.length+(d?1:0),T=ru(o),w=[],x=h.setContext(this.getContext()),V=x.display?x.width:0,M=V/2,K=function(F){return aa(i,F,V)};let $,Z,rt,nt,ct,N,R,I,k,P,L,C;if(u==="top")$=K(this.bottom),N=this.bottom-T,I=$-M,P=K(t.top)+M,C=t.bottom;else if(u==="bottom")$=K(this.top),P=t.top,C=K(t.bottom)-M,N=$+M,I=this.top+T;else if(u==="left")$=K(this.right),ct=this.right-T,R=$-M,k=K(t.left)+M,L=t.right;else if(u==="right")$=K(this.left),k=t.left,L=K(t.right)-M,ct=$+M,R=this.left+T;else if(e==="x"){if(u==="center")$=K((t.top+t.bottom)/2+.5);else if(Ft(u)){const F=Object.keys(u)[0],it=u[F];$=K(this.chart.scales[F].getPixelForValue(it))}P=t.top,C=t.bottom,N=$+M,I=N+T}else if(e==="y"){if(u==="center")$=K((t.left+t.right)/2);else if(Ft(u)){const F=Object.keys(u)[0],it=u[F];$=K(this.chart.scales[F].getPixelForValue(it))}ct=$-M,R=ct-T,k=t.left,L=t.right}const Ht=Zt(a.ticks.maxTicksLimit,v),yt=Math.max(1,Math.ceil(v/Ht));for(Z=0;Z<v;Z+=yt){const F=this.getContext(Z),it=o.setContext(F),W=h.setContext(F),lt=it.lineWidth,O=it.color,Q=W.dash||[],at=W.dashOffset,ot=it.tickWidth,dt=it.tickColor,Rt=it.tickBorderDash||[],_t=it.tickBorderDashOffset;rt=BN(this,Z,d),rt!==void 0&&(nt=aa(i,rt,lt),m?ct=R=k=L=nt:N=I=P=C=nt,w.push({tx1:ct,ty1:N,tx2:R,ty2:I,x1:k,y1:P,x2:L,y2:C,width:lt,color:O,borderDash:Q,borderDashOffset:at,tickWidth:ot,tickColor:dt,tickBorderDash:Rt,tickBorderDashOffset:_t}))}return this._ticksLength=v,this._borderValue=$,w}_computeLabelItems(t){const e=this.axis,i=this.options,{position:a,ticks:o}=i,u=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:_,mirror:v}=o,T=ru(i.grid),w=T+_,x=v?-_:w,V=-ha(this.labelRotation),M=[];let K,$,Z,rt,nt,ct,N,R,I,k,P,L,C="middle";if(a==="top")ct=this.bottom-x,N=this._getXAxisLabelAlignment();else if(a==="bottom")ct=this.top+x,N=this._getXAxisLabelAlignment();else if(a==="left"){const yt=this._getYAxisLabelAlignment(T);N=yt.textAlign,nt=yt.x}else if(a==="right"){const yt=this._getYAxisLabelAlignment(T);N=yt.textAlign,nt=yt.x}else if(e==="x"){if(a==="center")ct=(t.top+t.bottom)/2+w;else if(Ft(a)){const yt=Object.keys(a)[0],F=a[yt];ct=this.chart.scales[yt].getPixelForValue(F)+w}N=this._getXAxisLabelAlignment()}else if(e==="y"){if(a==="center")nt=(t.left+t.right)/2-w;else if(Ft(a)){const yt=Object.keys(a)[0],F=a[yt];nt=this.chart.scales[yt].getPixelForValue(F)}N=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(d==="start"?C="top":d==="end"&&(C="bottom"));const Ht=this._getLabelSizes();for(K=0,$=h.length;K<$;++K){Z=h[K],rt=Z.label;const yt=o.setContext(this.getContext(K));R=this.getPixelForTick(K)+o.labelOffset,I=this._resolveTickFontOptions(K),k=I.lineHeight,P=Xe(rt)?rt.length:1;const F=P/2,it=yt.color,W=yt.textStrokeColor,lt=yt.textStrokeWidth;let O=N;u?(nt=R,N==="inner"&&(K===$-1?O=this.options.reverse?"left":"right":K===0?O=this.options.reverse?"right":"left":O="center"),a==="top"?m==="near"||V!==0?L=-P*k+k/2:m==="center"?L=-Ht.highest.height/2-F*k+k:L=-Ht.highest.height+k/2:m==="near"||V!==0?L=k/2:m==="center"?L=Ht.highest.height/2-F*k:L=Ht.highest.height-P*k,v&&(L*=-1),V!==0&&!yt.showLabelBackdrop&&(nt+=k/2*Math.sin(V))):(ct=R,L=(1-P)*k/2);let Q;if(yt.showLabelBackdrop){const at=si(yt.backdropPadding),ot=Ht.heights[K],dt=Ht.widths[K];let Rt=L-at.top,_t=0-at.left;switch(C){case"middle":Rt-=ot/2;break;case"bottom":Rt-=ot;break}switch(N){case"center":_t-=dt/2;break;case"right":_t-=dt;break;case"inner":K===$-1?_t-=dt:K>0&&(_t-=dt/2);break}Q={left:_t,top:Rt,width:dt+at.width,height:ot+at.height,color:yt.backdropColor}}M.push({label:rt,font:I,textOffset:L,options:{rotation:V,color:it,strokeColor:W,strokeWidth:lt,textAlign:O,textBaseline:C,translation:[nt,ct],backdrop:Q}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ha(this.labelRotation))return t==="top"?"left":"right";let a="center";return e.align==="start"?a="left":e.align==="end"?a="right":e.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,u=this._getLabelSizes(),h=t+o,d=u.widest.width;let m,_;return e==="left"?a?(_=this.right+o,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_+=d)):(_=this.right-h,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_=this.left)):e==="right"?a?(_=this.left+o,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_-=d)):(_=this.left+h,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_=this.right)):m="right",{textAlign:m,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:a,width:o,height:u}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,a,o,u),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const a=this.ticks.findIndex(o=>o.value===t);return a>=0?e.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,u;const h=(d,m,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,u=a.length;o<u;++o){const d=a[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),u=i.display?o.width:0;if(!u)return;const h=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,_,v,T;this.isHorizontal()?(m=aa(t,this.left,u)-u/2,_=aa(t,this.right,h)+h/2,v=T=d):(v=aa(t,this.top,u)-u/2,T=aa(t,this.bottom,h)+h/2,m=_=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,v),e.lineTo(_,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&g_(i,a);const o=this.getLabelItems(t);for(const u of o){const h=u.options,d=u.font,m=u.label,_=u.textOffset;Df(i,m,0,_,d,h)}a&&m_(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:a}}=this;if(!i.display)return;const o=vn(i.font),u=si(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(d+=u.bottom,Xe(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=u.top;const{titleX:m,titleY:_,maxWidth:v,rotation:T}=GN(this,d,e,h);Df(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:T,textAlign:qN(h,e,a),textBaseline:"middle",translation:[m,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Zt(t.grid&&t.grid.z,-1),a=Zt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==id.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,u;for(o=0,u=e.length;o<u;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&a.push(h)}return a}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return vn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class zh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;QN(e)&&(i=this.register(e));const a=this.items,o=t.id,u=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in a||(a[o]=t,KN(t,u,i),this.override&&ve.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,a=this.scope;i in e&&delete e[i],a&&i in ve[a]&&(delete ve[a][i],this.override&&delete ba[i])}}function KN(n,t,e){const i=zu(Object.create(null),[e?ve.get(e):{},ve.get(t),n.defaults]);ve.set(t,i),n.defaultRoutes&&YN(t,n.defaultRoutes),n.descriptors&&ve.describe(t,n.descriptors)}function YN(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),a=i.pop(),o=[n].concat(i).join("."),u=t[e].split("."),h=u.pop(),d=u.join(".");ve.route(o,a,d,h)})}function QN(n){return"id"in n&&"defaults"in n}class WN{constructor(){this.controllers=new zh(Cu,"datasets",!0),this.elements=new zh(Ea,"elements"),this.plugins=new zh(Object,"plugins"),this.scales=new zh(id,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(t,o,a):$t(a,u=>{const h=i||this._getRegistryForType(u);this._exec(t,h,u)})})}_exec(t,e,i){const a=f_(t);ae(i["before"+a],[],i),e[t](i),ae(i["after"+a],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const a=e.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return a}}var Ai=new WN;class XN{constructor(){this._init=[]}notify(t,e,i,a){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=a?this._descriptors(t).filter(a):this._descriptors(t),u=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),u}_notify(t,e,i,a){a=a||{};for(const o of t){const u=o.plugin,h=u[i],d=[e,a,o.options];if(ae(h,d,u)===!1&&a.cancelable)return!1}return!0}invalidate(){an(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,a=Zt(i.options&&i.options.plugins,{}),o=$N(i);return a===!1&&!e?[]:JN(t,o,a,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,a=(o,u)=>o.filter(h=>!u.some(d=>h.plugin.id===d.plugin.id));this._notify(a(e,i),t,"stop"),this._notify(a(i,e),t,"start")}}function $N(n){const t={},e=[],i=Object.keys(Ai.plugins.items);for(let o=0;o<i.length;o++)e.push(Ai.getPlugin(i[o]));const a=n.plugins||[];for(let o=0;o<a.length;o++){const u=a[o];e.indexOf(u)===-1&&(e.push(u),t[u.id]=!0)}return{plugins:e,localIds:t}}function ZN(n,t){return!t&&n===!1?null:n===!0?{}:n}function JN(n,{plugins:t,localIds:e},i,a){const o=[],u=n.getContext();for(const h of t){const d=h.id,m=ZN(i[d],a);m!==null&&o.push({plugin:h,options:tP(n.config,{plugin:h,local:e[d]},m,u)})}return o}function tP(n,{plugin:t,local:e},i,a){const o=n.pluginScopeKeys(t),u=n.getOptionScopes(i,o);return e&&t.defaults&&u.push(t.defaults),n.createResolver(u,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fp(n,t){const e=ve.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function eP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function nP(n,t){return n===t?"_index_":"_value_"}function ZE(n){if(n==="x"||n==="y"||n==="r")return n}function iP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dp(n,...t){if(ZE(n))return n;for(const e of t){const i=e.axis||iP(e.position)||n.length>1&&ZE(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function JE(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function sP(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return JE(n,"x",e[0])||JE(n,"y",e[0])}return{}}function rP(n,t){const e=ba[n.type]||{scales:{}},i=t.scales||{},a=fp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(u=>{const h=i[u];if(!Ft(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const d=dp(u,h,sP(u,n),ve.scales[h.type]),m=nP(d,a),_=e.scales||{};o[u]=Au(Object.create(null),[{axis:d},h,_[d],_[m]])}),n.data.datasets.forEach(u=>{const h=u.type||n.type,d=u.indexAxis||fp(h,t),_=(ba[h]||{}).scales||{};Object.keys(_).forEach(v=>{const T=eP(v,d),w=u[T+"AxisID"]||T;o[w]=o[w]||Object.create(null),Au(o[w],[{axis:T},i[w],_[v]])})}),Object.keys(o).forEach(u=>{const h=o[u];Au(h,[ve.scales[h.type],ve.scale])}),o}function vw(n){const t=n.options||(n.options={});t.plugins=Zt(t.plugins,{}),t.scales=rP(n,t)}function bw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function aP(n){return n=n||{},n.data=bw(n.data),vw(n),n}const tT=new Map,Ew=new Set;function Bh(n,t){let e=tT.get(n);return e||(e=t(),tT.set(n,e),Ew.add(e)),e}const au=(n,t,e)=>{const i=Bu(t,e);i!==void 0&&n.add(i)};class oP{constructor(t){this._config=aP(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=bw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Bh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Bh(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Bh(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Bh(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let a=i.get(t);return(!a||e)&&(a=new Map,i.set(t,a)),a}getOptionScopes(t,e,i){const{options:a,type:o}=this,u=this._cachedScopes(t,i),h=u.get(e);if(h)return h;const d=new Set;e.forEach(_=>{t&&(d.add(t),_.forEach(v=>au(d,t,v))),_.forEach(v=>au(d,a,v)),_.forEach(v=>au(d,ba[o]||{},v)),_.forEach(v=>au(d,ve,v)),_.forEach(v=>au(d,up,v))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),Ew.has(e)&&u.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,ba[e]||{},ve.datasets[e]||{},{type:e},ve,up]}resolveNamedOptions(t,e,i,a=[""]){const o={$shared:!0},{resolver:u,subPrefixes:h}=eT(this._resolverCache,t,a);let d=u;if(uP(u,e)){o.$shared=!1,i=pr(i)?i():i;const m=this.createResolver(t,i,h);d=Uo(u,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],a){const{resolver:o}=eT(this._resolverCache,t,i);return Ft(e)?Uo(o,e,void 0,a):o}}function eT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const a=e.join();let o=i.get(a);return o||(o={resolver:__(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(a,o)),o}const lP=n=>Ft(n)&&Object.getOwnPropertyNames(n).some(t=>pr(n[t]));function uP(n,t){const{isScriptable:e,isIndexable:i}=aw(n);for(const a of t){const o=e(a),u=i(a),h=(u||o)&&n[a];if(o&&(pr(h)||lP(h))||u&&Xe(h))return!0}return!1}var cP="4.4.8";const hP=["top","bottom","left","right","chartArea"];function nT(n,t){return n==="top"||n==="bottom"||hP.indexOf(n)===-1&&t==="x"}function iT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function sT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ae(e&&e.onComplete,[n],t)}function fP(n){const t=n.chart,e=t.options.animation;ae(e&&e.onProgress,[n],t)}function Tw(n){return b_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const nf={},rT=n=>{const t=Tw(n);return Object.values(nf).filter(e=>e.canvas===t).pop()};function dP(n,t,e){const i=Object.keys(n);for(const a of i){const o=+a;if(o>=t){const u=n[a];delete n[a],(e>0||o>t)&&(n[o+e]=u)}}}function gP(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function Hh(n,t,e){return n.options.clip?n[e]:t[e]}function mP(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Hh(e,t,"left"),right:Hh(e,t,"right"),top:Hh(i,t,"top"),bottom:Hh(i,t,"bottom")}:t}var Ws;let sd=(Ws=class{static register(...t){Ai.add(...t),aT()}static unregister(...t){Ai.remove(...t),aT()}constructor(t,e){const i=this.config=new oP(e),a=Tw(t),o=rT(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const u=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||MN(a)),this.platform.updateConfig(i);const h=this.platform.acquireContext(a,u.aspectRatio),d=h&&h.canvas,m=d&&d.height,_=d&&d.width;if(this.id=jM(),this.ctx=h,this.canvas=d,this.width=_,this.height=m,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rk(v=>this.update(v),u.resizeDelay||0),this._dataChanges=[],nf[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}as.listen(this,"complete",sT),as.listen(this,"progress",fP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:a,_aspectRatio:o}=this;return an(t)?e&&o?o:a?i/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():NE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return DE(this.canvas,this.ctx),this}stop(){return as.stop(this),this}resize(t,e){as.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(a,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,NE(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),ae(i.onResize,[this,u],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};$t(e,(i,a)=>{i.id=a})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,a=Object.keys(i).reduce((u,h)=>(u[h]=!1,u),{});let o=[];e&&(o=o.concat(Object.keys(e).map(u=>{const h=e[u],d=dp(u,h),m=d==="r",_=d==="x";return{options:h,dposition:m?"chartArea":_?"bottom":"left",dtype:m?"radialLinear":_?"category":"linear"}}))),$t(o,u=>{const h=u.options,d=h.id,m=dp(d,h),_=Zt(h.type,u.dtype);(h.position===void 0||nT(h.position,m)!==nT(u.dposition))&&(h.position=u.dposition),a[d]=!0;let v=null;if(d in i&&i[d].type===_)v=i[d];else{const T=Ai.getScale(_);v=new T({id:d,type:_,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),$t(a,(u,h)=>{u||delete i[h]}),$t(i,u=>{nr.configure(this,u,u.options),nr.addBox(this,u)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((a,o)=>a.index-o.index),i>e){for(let a=e;a<i;++a)this._destroyDatasetMeta(a);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(iT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,a)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=e.length;i<a;i++){const o=e[i];let u=this.getDatasetMeta(i);const h=o.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(i),u=this.getDatasetMeta(i)),u.type=h,u.indexAxis=o.indexAxis||fp(h,this.options),u.order=o.order||0,u.index=i,u.label=""+o.label,u.visible=this.isDatasetVisible(i),u.controller)u.controller.updateIndex(i),u.controller.linkScales();else{const d=Ai.getController(h),{datasetElementType:m,dataElementType:_}=ve.datasets[h];Object.assign(d,{dataElementType:Ai.getElement(_),datasetElementType:m&&Ai.getElement(m)}),u.controller=new d(this,i),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){$t(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let m=0,_=this.data.datasets.length;m<_;m++){const{controller:v}=this.getDatasetMeta(m),T=!a&&o.indexOf(v)===-1;v.buildOrUpdateElements(T),u=Math.max(+v.getMaxOverflow(),u)}u=this._minPadding=i.layout.autoPadding?u:0,this._updateLayout(u),a||$t(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(iT("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){$t(this.scales,t=>{nr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!EE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of e){const u=i==="_removeElements"?-o:o;dP(t,a,u)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(u=>u[0]===o).map((u,h)=>h+","+u.splice(1).join(","))),a=i(0);for(let o=1;o<e;o++)if(!EE(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;nr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],$t(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,pr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),a={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(e),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(as.has(this)?this.attached&&!as.running(this)&&as.start(this):(this.draw(),sT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let a,o;for(a=0,o=e.length;a<o;++a){const u=e[a];(!t||u.visible)&&i.push(u)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,a=!i.disabled,o=mP(t,this.chartArea),u={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",u)!==!1&&(a&&g_(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),a&&m_(e),u.cancelable=!1,this.notifyPlugins("afterDatasetDraw",u))}isPointInArea(t){return rw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,a){const o=hN.modes[e];return typeof o=="function"?o(this,t,i,a):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let a=i.filter(o=>o&&o._dataset===e).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Go(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const a=i?"show":"hide",o=this.getDatasetMeta(t),u=o.controller._resolveAnimations(void 0,a);Rf(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),u.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?a:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),as.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),DE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete nf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,u)=>{e.addEventListener(this,o,u),t[o]=u},a=(o,u,h)=>{o.offsetX=u,o.offsetY=h,this._eventHandler(o)};$t(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},a=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let u;const h=()=>{a("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",u)};u=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():u()}unbindEvents(){$t(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},$t(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const a=i?"set":"remove";let o,u,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){u=t[h];const m=u&&this.getDatasetMeta(u.datasetIndex).controller;m&&m[a+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:u})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[u],index:u}});!Af(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const a=this.options.hover,o=(d,m)=>d.filter(_=>!m.some(v=>_.datasetIndex===v.datasetIndex&&_.index===v.index)),u=o(e,t),h=i?t:o(t,e);u.length&&this.updateHoverStyle(u,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},a=u=>(u.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:a=[],options:o}=this,u=e,h=this._getActiveElements(t,a,i,u),d=QM(t),m=gP(t,this._lastEvent,i,d);i&&(this._lastEvent=null,ae(o.onHover,[t,h,this],this),d&&ae(o.onClick,[t,h,this],this));const _=!Af(h,a);return(_||e)&&(this._active=h,this._updateHoverStyles(h,a,e)),this._lastEvent=m,_}_getActiveElements(t,e,i,a){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,a)}},xt(Ws,"defaults",ve),xt(Ws,"instances",nf),xt(Ws,"overrides",ba),xt(Ws,"registry",Ai),xt(Ws,"version",cP),xt(Ws,"getChart",rT),Ws);function aT(){return $t(sd.instances,n=>n._plugins.invalidate())}function pP(n,t,e){const{startAngle:i,pixelMargin:a,x:o,y:u,outerRadius:h,innerRadius:d}=t;let m=a/h;n.beginPath(),n.arc(o,u,h,i-m,e+m),d>a?(m=a/d,n.arc(o,u,d,e+m,i-m,!0)):n.arc(o,u,a,e+Me,i-Me),n.closePath(),n.clip()}function _P(n){return p_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function yP(n,t,e,i){const a=_P(n.options.borderRadius),o=(e-t)/2,u=Math.min(o,i*t/2),h=d=>{const m=(e-Math.min(o,d))*i/2;return Yn(d,0,Math.min(o,m))};return{outerStart:h(a.outerStart),outerEnd:h(a.outerEnd),innerStart:Yn(a.innerStart,0,u),innerEnd:Yn(a.innerEnd,0,u)}}function vo(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function kf(n,t,e,i,a,o){const{x:u,y:h,startAngle:d,pixelMargin:m,innerRadius:_}=t,v=Math.max(t.outerRadius+i+e-m,0),T=_>0?_+i+e+m:0;let w=0;const x=a-d;if(i){const yt=_>0?_-i:0,F=v>0?v-i:0,it=(yt+F)/2,W=it!==0?x*it/(it+i):x;w=(x-W)/2}const V=Math.max(.001,x*v-e/je)/v,M=(x-V)/2,K=d+M+w,$=a-M-w,{outerStart:Z,outerEnd:rt,innerStart:nt,innerEnd:ct}=yP(t,T,v,$-K),N=v-Z,R=v-rt,I=K+Z/N,k=$-rt/R,P=T+nt,L=T+ct,C=K+nt/P,Ht=$-ct/L;if(n.beginPath(),o){const yt=(I+k)/2;if(n.arc(u,h,v,I,yt),n.arc(u,h,v,yt,k),rt>0){const lt=vo(R,k,u,h);n.arc(lt.x,lt.y,rt,k,$+Me)}const F=vo(L,$,u,h);if(n.lineTo(F.x,F.y),ct>0){const lt=vo(L,Ht,u,h);n.arc(lt.x,lt.y,ct,$+Me,Ht+Math.PI)}const it=($-ct/T+(K+nt/T))/2;if(n.arc(u,h,T,$-ct/T,it,!0),n.arc(u,h,T,it,K+nt/T,!0),nt>0){const lt=vo(P,C,u,h);n.arc(lt.x,lt.y,nt,C+Math.PI,K-Me)}const W=vo(N,K,u,h);if(n.lineTo(W.x,W.y),Z>0){const lt=vo(N,I,u,h);n.arc(lt.x,lt.y,Z,K-Me,I)}}else{n.moveTo(u,h);const yt=Math.cos(I)*v+u,F=Math.sin(I)*v+h;n.lineTo(yt,F);const it=Math.cos(k)*v+u,W=Math.sin(k)*v+h;n.lineTo(it,W)}n.closePath()}function vP(n,t,e,i,a){const{fullCircles:o,startAngle:u,circumference:h}=t;let d=t.endAngle;if(o){kf(n,t,e,i,d,a);for(let m=0;m<o;++m)n.fill();isNaN(h)||(d=u+(h%we||we))}return kf(n,t,e,i,d,a),n.fill(),d}function bP(n,t,e,i,a){const{fullCircles:o,startAngle:u,circumference:h,options:d}=t,{borderWidth:m,borderJoinStyle:_,borderDash:v,borderDashOffset:T}=d,w=d.borderAlign==="inner";if(!m)return;n.setLineDash(v||[]),n.lineDashOffset=T,w?(n.lineWidth=m*2,n.lineJoin=_||"round"):(n.lineWidth=m,n.lineJoin=_||"bevel");let x=t.endAngle;if(o){kf(n,t,e,i,x,a);for(let V=0;V<o;++V)n.stroke();isNaN(h)||(x=u+(h%we||we))}w&&pP(n,t,x),o||(kf(n,t,e,i,x,a),n.stroke())}class _u extends Ea{constructor(e){super();xt(this,"circumference");xt(this,"endAngle");xt(this,"fullCircles");xt(this,"innerRadius");xt(this,"outerRadius");xt(this,"pixelMargin");xt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,a){const o=this.getProps(["x","y"],a),{angle:u,distance:h}=ZA(o,{x:e,y:i}),{startAngle:d,endAngle:m,innerRadius:_,outerRadius:v,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),w=(this.options.spacing+this.options.borderWidth)/2,x=Zt(T,m-d),V=xf(u,d,m)&&d!==m,M=x>=we||V,K=gu(h,_+w,v+w);return M&&K}getCenterPoint(e){const{x:i,y:a,startAngle:o,endAngle:u,innerRadius:h,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:m,spacing:_}=this.options,v=(o+u)/2,T=(h+d+_+m)/2;return{x:i+Math.cos(v)*T,y:a+Math.sin(v)*T}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:a}=this,o=(i.offset||0)/4,u=(i.spacing||0)/2,h=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=a>we?Math.floor(a/we):0,a===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*o,Math.sin(d)*o);const m=1-Math.sin(Math.min(je,a||0)),_=o*m;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,vP(e,this,_,u,h),bP(e,this,_,u,h),e.restore()}}xt(_u,"id","arc"),xt(_u,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),xt(_u,"defaultRoutes",{backgroundColor:"backgroundColor"}),xt(_u,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});const oT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},EP=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class lT extends Ea{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ae(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,a)=>t.sort(i,a,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,a=vn(i.font),o=a.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=oT(i,o);let m,_;e.font=a.string,this.isHorizontal()?(m=this.maxWidth,_=this._fitRows(u,o,h,d)+10):(_=this.maxHeight,m=this._fitCols(u,a,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,a){const{ctx:o,maxWidth:u,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],_=a+h;let v=t;o.textAlign="left",o.textBaseline="middle";let T=-1,w=-_;return this.legendItems.forEach((x,V)=>{const M=i+e/2+o.measureText(x.text).width;(V===0||m[m.length-1]+M+2*h>u)&&(v+=_,m[m.length-(V>0?0:1)]=0,w+=_,T++),d[V]={left:0,top:w,row:T,width:M,height:a},m[m.length-1]+=M+h}),v}_fitCols(t,e,i,a){const{ctx:o,maxHeight:u,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],_=u-t;let v=h,T=0,w=0,x=0,V=0;return this.legendItems.forEach((M,K)=>{const{itemWidth:$,itemHeight:Z}=TP(i,e,o,M,a);K>0&&w+Z+2*h>_&&(v+=T+h,m.push({width:T,height:w}),x+=T+h,V++,T=w=0),d[K]={left:x,top:w,col:V,width:$,height:Z},T=Math.max(T,$),w+=Z+h}),v+=T,m.push({width:T,height:w}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:a},rtl:o}}=this,u=xo(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=xn(i,this.left+a,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=xn(i,this.left+a,this.right-this.lineWidths[h])),m.top+=this.top+t+a,m.left=u.leftForLtr(u.x(d),m.width),d+=m.width+a}else{let h=0,d=xn(i,this.top+t+a,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=xn(i,this.top+t+a,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+a,m.left=u.leftForLtr(u.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;g_(t,this),this._draw(),m_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:a}=this,{align:o,labels:u}=t,h=ve.color,d=xo(t.rtl,this.left,this.width),m=vn(u.font),{padding:_}=u,v=m.size,T=v/2;let w;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:x,boxHeight:V,itemHeight:M}=oT(u,v),K=function(ct,N,R){if(isNaN(x)||x<=0||isNaN(V)||V<0)return;a.save();const I=Zt(R.lineWidth,1);if(a.fillStyle=Zt(R.fillStyle,h),a.lineCap=Zt(R.lineCap,"butt"),a.lineDashOffset=Zt(R.lineDashOffset,0),a.lineJoin=Zt(R.lineJoin,"miter"),a.lineWidth=I,a.strokeStyle=Zt(R.strokeStyle,h),a.setLineDash(Zt(R.lineDash,[])),u.usePointStyle){const k={radius:V*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:I},P=d.xPlus(ct,x/2),L=N+T;sw(a,k,P,L,u.pointStyleWidth&&x)}else{const k=N+Math.max((v-V)/2,0),P=d.leftForLtr(ct,x),L=Iu(R.borderRadius);a.beginPath(),Object.values(L).some(C=>C!==0)?cp(a,{x:P,y:k,w:x,h:V,radius:L}):a.rect(P,k,x,V),a.fill(),I!==0&&a.stroke()}a.restore()},$=function(ct,N,R){Df(a,R.text,ct,N+M/2,m,{strikethrough:R.hidden,textAlign:d.textAlign(R.textAlign)})},Z=this.isHorizontal(),rt=this._computeTitleHeight();Z?w={x:xn(o,this.left+_,this.right-i[0]),y:this.top+_+rt,line:0}:w={x:this.left+_,y:xn(o,this.top+rt+_,this.bottom-e[0].height),line:0},cw(this.ctx,t.textDirection);const nt=M+_;this.legendItems.forEach((ct,N)=>{a.strokeStyle=ct.fontColor,a.fillStyle=ct.fontColor;const R=a.measureText(ct.text).width,I=d.textAlign(ct.textAlign||(ct.textAlign=u.textAlign)),k=x+T+R;let P=w.x,L=w.y;d.setWidth(this.width),Z?N>0&&P+k+_>this.right&&(L=w.y+=nt,w.line++,P=w.x=xn(o,this.left+_,this.right-i[w.line])):N>0&&L+nt>this.bottom&&(P=w.x=P+e[w.line].width+_,w.line++,L=w.y=xn(o,this.top+rt+_,this.bottom-e[w.line].height));const C=d.x(P);if(K(C,L,ct),P=ak(I,P+x+T,Z?P+k:this.right,t.rtl),$(d.x(P),L,ct),Z)w.x+=k+_;else if(typeof ct.text!="string"){const Ht=m.lineHeight;w.y+=Sw(ct,Ht)+_}else w.y+=nt}),hw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=vn(e.font),a=si(e.padding);if(!e.display)return;const o=xo(t.rtl,this.left,this.width),u=this.ctx,h=e.position,d=i.size/2,m=a.top+d;let _,v=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+m,v=xn(t.align,v,this.right-T);else{const x=this.columnSizes.reduce((V,M)=>Math.max(V,M.height),0);_=m+xn(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const w=xn(h,v,v+T);u.textAlign=o.textAlign(nw(h)),u.textBaseline="middle",u.strokeStyle=e.color,u.fillStyle=e.color,u.font=i.string,Df(u,e.text,w,_,i)}_computeTitleHeight(){const t=this.options.title,e=vn(t.font),i=si(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,a,o;if(gu(t,this.left,this.right)&&gu(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],gu(t,a.left,a.left+a.width)&&gu(e,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!wP(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,o=EP(a,i);a&&!o&&ae(e.onLeave,[t,a,this],this),this._hoveredItem=i,i&&!o&&ae(e.onHover,[t,i,this],this)}else i&&ae(e.onClick,[t,i,this],this)}}function TP(n,t,e,i,a){const o=SP(i,n,t,e),u=AP(a,i,t.lineHeight);return{itemWidth:o,itemHeight:u}}function SP(n,t,e,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((o,u)=>o.length>u.length?o:u)),t+e.size/2+i.measureText(a).width}function AP(n,t,e){let i=n;return typeof t.text!="string"&&(i=Sw(t,e)),i}function Sw(n,t){const e=n.text?n.text.length:0;return t*e}function wP(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var RP={id:"legend",_element:lT,start(n,t,e){const i=n.legend=new lT({ctx:n.ctx,options:e,chart:n});nr.configure(n,i,e),nr.addBox(n,i)},stop(n){nr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;nr.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,a=e.chart;a.isDatasetVisible(i)?(a.hide(i),t.hidden=!0):(a.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:a,color:o,useBorderRadius:u,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),_=si(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:u&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const yu={average(n){if(!n.length)return!1;let t,e,i=new Set,a=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:a/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,a=Number.POSITIVE_INFINITY,o,u,h;for(o=0,u=n.length;o<u;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),_=JM(t,m);_<a&&(a=_,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Si(n,t){return t&&(Xe(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function os(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function IP(n,t){const{element:e,datasetIndex:i,index:a}=t,o=n.getDatasetMeta(i).controller,{label:u,value:h}=o.getLabelAndValue(a);return{chart:n,label:u,parsed:o.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:h,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:e}}function uT(n,t){const e=n.chart.ctx,{body:i,footer:a,title:o}=n,{boxWidth:u,boxHeight:h}=t,d=vn(t.bodyFont),m=vn(t.titleFont),_=vn(t.footerFont),v=o.length,T=a.length,w=i.length,x=si(t.padding);let V=x.height,M=0,K=i.reduce((rt,nt)=>rt+nt.before.length+nt.lines.length+nt.after.length,0);if(K+=n.beforeBody.length+n.afterBody.length,v&&(V+=v*m.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),K){const rt=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;V+=w*rt+(K-w)*d.lineHeight+(K-1)*t.bodySpacing}T&&(V+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let $=0;const Z=function(rt){M=Math.max(M,e.measureText(rt).width+$)};return e.save(),e.font=m.string,$t(n.title,Z),e.font=d.string,$t(n.beforeBody.concat(n.afterBody),Z),$=t.displayColors?u+2+t.boxPadding:0,$t(i,rt=>{$t(rt.before,Z),$t(rt.lines,Z),$t(rt.after,Z)}),$=0,e.font=_.string,$t(n.footer,Z),e.restore(),M+=x.width,{width:M,height:V}}function CP(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function xP(n,t,e,i){const{x:a,width:o}=i,u=e.caretSize+e.caretPadding;if(n==="left"&&a+o+u>t.width||n==="right"&&a-o-u<0)return!0}function DP(n,t,e,i){const{x:a,width:o}=e,{width:u,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=a<=(h+d)/2?"left":"right":a<=o/2?m="left":a>=u-o/2&&(m="right"),xP(m,n,t,e)&&(m="center"),m}function cT(n,t,e){const i=e.yAlign||t.yAlign||CP(n,e);return{xAlign:e.xAlign||t.xAlign||DP(n,t,e,i),yAlign:i}}function OP(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function MP(n,t,e){let{y:i,height:a}=n;return t==="top"?i+=e:t==="bottom"?i-=a+e:i-=a/2,i}function hT(n,t,e,i){const{caretSize:a,caretPadding:o,cornerRadius:u}=n,{xAlign:h,yAlign:d}=e,m=a+o,{topLeft:_,topRight:v,bottomLeft:T,bottomRight:w}=Iu(u);let x=OP(t,h);const V=MP(t,d,m);return d==="center"?h==="left"?x+=m:h==="right"&&(x-=m):h==="left"?x-=Math.max(_,T)+a:h==="right"&&(x+=Math.max(v,w)+a),{x:Yn(x,0,i.width-t.width),y:Yn(V,0,i.height-t.height)}}function jh(n,t,e){const i=si(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function fT(n){return Si([],os(n))}function kP(n,t,e){return Go(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function dT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Aw={beforeTitle:rs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:rs,beforeBody:rs,beforeLabel:rs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return an(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:rs,afterBody:rs,beforeFooter:rs,footer:rs,afterFooter:rs};function mn(n,t,e,i){const a=n[t].call(e,i);return typeof a>"u"?Aw[t].call(e,i):a}class gp extends Ea{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&e.options.animation&&i.animations,o=new fw(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=kP(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,a=mn(i,"beforeTitle",this,t),o=mn(i,"title",this,t),u=mn(i,"afterTitle",this,t);let h=[];return h=Si(h,os(a)),h=Si(h,os(o)),h=Si(h,os(u)),h}getBeforeBody(t,e){return fT(mn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,a=[];return $t(t,o=>{const u={before:[],lines:[],after:[]},h=dT(i,o);Si(u.before,os(mn(h,"beforeLabel",this,o))),Si(u.lines,mn(h,"label",this,o)),Si(u.after,os(mn(h,"afterLabel",this,o))),a.push(u)}),a}getAfterBody(t,e){return fT(mn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,a=mn(i,"beforeFooter",this,t),o=mn(i,"footer",this,t),u=mn(i,"afterFooter",this,t);let h=[];return h=Si(h,os(a)),h=Si(h,os(o)),h=Si(h,os(u)),h}_createItems(t){const e=this._active,i=this.chart.data,a=[],o=[],u=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(IP(this.chart,e[d]));return t.filter&&(h=h.filter((_,v,T)=>t.filter(_,v,T,i))),t.itemSort&&(h=h.sort((_,v)=>t.itemSort(_,v,i))),$t(h,_=>{const v=dT(t.callbacks,_);a.push(mn(v,"labelColor",this,_)),o.push(mn(v,"labelPointStyle",this,_)),u.push(mn(v,"labelTextColor",this,_))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=u,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),a=this._active;let o,u=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const h=yu[i.position].call(this,a,this._eventPosition);u=this._createItems(i),this.title=this.getTitle(u,i),this.beforeBody=this.getBeforeBody(u,i),this.body=this.getBody(u,i),this.afterBody=this.getAfterBody(u,i),this.footer=this.getFooter(u,i);const d=this._size=uT(this,i),m=Object.assign({},h,d),_=cT(this.chart,i,m),v=hT(i,m,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,a){const o=this.getCaretPosition(t,i,a);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:a,yAlign:o}=this,{caretSize:u,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=Iu(h),{x:T,y:w}=t,{width:x,height:V}=e;let M,K,$,Z,rt,nt;return o==="center"?(rt=w+V/2,a==="left"?(M=T,K=M-u,Z=rt+u,nt=rt-u):(M=T+x,K=M+u,Z=rt-u,nt=rt+u),$=M):(a==="left"?K=T+Math.max(d,_)+u:a==="right"?K=T+x-Math.max(m,v)-u:K=this.caretX,o==="top"?(Z=w,rt=Z-u,M=K-u,$=K+u):(Z=w+V,rt=Z+u,M=K+u,$=K-u),nt=Z),{x1:M,x2:K,x3:$,y1:Z,y2:rt,y3:nt}}drawTitle(t,e,i){const a=this.title,o=a.length;let u,h,d;if(o){const m=xo(i.rtl,this.x,this.width);for(t.x=jh(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",u=vn(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=u.string,d=0;d<o;++d)e.fillText(a[d],m.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,a,o){const u=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,_=vn(o.bodyFont),v=jh(this,"left",o),T=a.x(v),w=d<_.lineHeight?(_.lineHeight-d)/2:0,x=e.y+w;if(o.usePointStyle){const V={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=a.leftForLtr(T,m)+m/2,K=x+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,OE(t,V,M,K),t.strokeStyle=u.borderColor,t.fillStyle=u.backgroundColor,OE(t,V,M,K)}else{t.lineWidth=Ft(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,t.strokeStyle=u.borderColor,t.setLineDash(u.borderDash||[]),t.lineDashOffset=u.borderDashOffset||0;const V=a.leftForLtr(T,m),M=a.leftForLtr(a.xPlus(T,1),m-2),K=Iu(u.borderRadius);Object.values(K).some($=>$!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,cp(t,{x:V,y:x,w:m,h:d,radius:K}),t.fill(),t.stroke(),t.fillStyle=u.backgroundColor,t.beginPath(),cp(t,{x:M,y:x+1,w:m-2,h:d-2,radius:K}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(V,x,m,d),t.strokeRect(V,x,m,d),t.fillStyle=u.backgroundColor,t.fillRect(M,x+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:a}=this,{bodySpacing:o,bodyAlign:u,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:_}=i,v=vn(i.bodyFont);let T=v.lineHeight,w=0;const x=xo(i.rtl,this.x,this.width),V=function(R){e.fillText(R,x.x(t.x+w),t.y+T/2),t.y+=T+o},M=x.textAlign(u);let K,$,Z,rt,nt,ct,N;for(e.textAlign=u,e.textBaseline="middle",e.font=v.string,t.x=jh(this,M,i),e.fillStyle=i.bodyColor,$t(this.beforeBody,V),w=h&&M!=="right"?u==="center"?m/2+_:m+2+_:0,rt=0,ct=a.length;rt<ct;++rt){for(K=a[rt],$=this.labelTextColors[rt],e.fillStyle=$,$t(K.before,V),Z=K.lines,h&&Z.length&&(this._drawColorBox(e,t,rt,x,i),T=Math.max(v.lineHeight,d)),nt=0,N=Z.length;nt<N;++nt)V(Z[nt]),T=v.lineHeight;$t(K.after,V)}w=0,T=v.lineHeight,$t(this.afterBody,V),t.y-=o}drawFooter(t,e,i){const a=this.footer,o=a.length;let u,h;if(o){const d=xo(i.rtl,this.x,this.width);for(t.x=jh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",u=vn(i.footerFont),e.fillStyle=i.footerColor,e.font=u.string,h=0;h<o;++h)e.fillText(a[h],d.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+i.footerSpacing}}drawBackground(t,e,i,a){const{xAlign:o,yAlign:u}=this,{x:h,y:d}=t,{width:m,height:_}=i,{topLeft:v,topRight:T,bottomLeft:w,bottomRight:x}=Iu(a.cornerRadius);e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.beginPath(),e.moveTo(h+v,d),u==="top"&&this.drawCaret(t,e,i,a),e.lineTo(h+m-T,d),e.quadraticCurveTo(h+m,d,h+m,d+T),u==="center"&&o==="right"&&this.drawCaret(t,e,i,a),e.lineTo(h+m,d+_-x),e.quadraticCurveTo(h+m,d+_,h+m-x,d+_),u==="bottom"&&this.drawCaret(t,e,i,a),e.lineTo(h+w,d+_),e.quadraticCurveTo(h,d+_,h,d+_-w),u==="center"&&o==="left"&&this.drawCaret(t,e,i,a),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),a.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const u=yu[t.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=uT(this,t),d=Object.assign({},u,this._size),m=cT(e,t,d),_=hT(t,d,m,e);(a._to!==_.x||o._to!==_.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const u=si(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,a,e),cw(t,e.textDirection),o.y+=u.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),hw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,a=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!Af(i,a),u=this._positionChanged(a,e);(o||u)&&(this._active=a,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],u=this._getActiveElements(t,o,e,i),h=this._positionChanged(u,t),d=e||!Af(u,o)||h;return d&&(this._active=u,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,a){const o=this.options;if(t.type==="mouseout")return[];if(!a)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&u.reverse(),u}_positionChanged(t,e){const{caretX:i,caretY:a,options:o}=this,u=yu[o.position].call(this,t,e);return u!==!1&&(i!==u.x||a!==u.y)}}xt(gp,"positioners",yu);var NP={id:"tooltip",_element:gp,positioners:yu,afterInit(n,t,e){e&&(n.tooltip=new gp({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Aw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const rd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(rd);function gT(n,t){return n-t}function mT(n,t){if(an(t))return null;const e=n._adapter,{parser:i,round:a,isoWeekday:o}=n._parseOpts;let u=t;return typeof i=="function"&&(u=i(u)),ps(u)||(u=typeof i=="string"?e.parse(u,i):e.parse(u)),u===null?null:(a&&(u=a==="week"&&(Cf(o)||o===!0)?e.startOf(u,"isoWeek",o):e.startOf(u,a)),+u)}function pT(n,t,e,i){const a=yn.length;for(let o=yn.indexOf(n);o<a-1;++o){const u=rd[yn[o]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((e-t)/(h*u.size))<=i)return yn[o]}return yn[a-1]}function PP(n,t,e,i,a){for(let o=yn.length-1;o>=yn.indexOf(e);o--){const u=yn[o];if(rd[u].common&&n._adapter.diff(a,i,u)>=t-1)return u}return yn[e?yn.indexOf(e):0]}function VP(n){for(let t=yn.indexOf(n)+1,e=yn.length;t<e;++t)if(rd[yn[t]].common)return yn[t]}function _T(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:a}=d_(e,t),o=e[i]>=t?e[i]:e[a];n[o]=!0}}function LP(n,t,e,i){const a=n._adapter,o=+a.startOf(t[0].value,i),u=t[t.length-1].value;let h,d;for(h=o;h<=u;h=+a.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function yT(n,t,e){const i=[],a={},o=t.length;let u,h;for(u=0;u<o;++u)h=t[u],a[h]=u,i.push({value:h,major:!1});return o===0||!e?i:LP(n,i,a,e)}class Nf extends id{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),a=this._adapter=new aN._date(t.adapters.date);a.init(e),Au(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:mT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:a,max:o,minDefined:u,maxDefined:h}=this.getUserBounds();function d(m){!u&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!u||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=ps(a)&&!isNaN(a)?a:+e.startOf(Date.now(),i),o=ps(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,u=this.max,h=nk(a,o,u);return this._unit=e.unit||(i.autoSkip?pT(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):PP(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:VP(this._unit),this.initOffsets(a),t.reverse&&h.reverse(),yT(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,a,o;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?e=1-a:e=(this.getDecimalForValue(t[1])-a)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const u=t.length<3?.5:.25;e=Yn(e,0,u),i=Yn(i,0,u),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,a=this.options,o=a.time,u=o.unit||pT(o.minUnit,e,i,this._getLabelCapacity(e)),h=Zt(a.ticks.stepSize,1),d=u==="week"?o.isoWeekday:!1,m=Cf(d)||d===!0,_={};let v=e,T,w;if(m&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,m?"day":u),t.diff(i,e,u)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+u);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(T=v,w=0;T<i;T=+t.add(T,h,u),w++)_T(_,T,x);return(T===i||a.bounds==="ticks"||w===1)&&_T(_,T,x),Object.keys(_).sort(gT).map(V=>+V)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const a=this.options.time.displayFormats,o=this._unit,u=e||a[o];return this._adapter.format(t,u)}_tickFormatFunction(t,e,i,a){const o=this.options,u=o.ticks.callback;if(u)return ae(u,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,_=d&&h[d],v=m&&h[m],T=i[e],w=m&&v&&T&&T.major;return this._adapter.format(t,a||(w?v:_))}generateTickLabels(t){let e,i,a;for(e=0,i=t.length;e<i;++e)a=t[e],a.label=this._tickFormatFunction(a.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,a=ha(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(a),u=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*u,h:i*u+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,a=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,yT(this,[t],this._majorUnit),a),u=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,i=a.length;e<i;++e)t=t.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const a=this.getLabels();for(e=0,i=a.length;e<i;++e)t.push(mT(this,a[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return sk(t.sort(gT))}}xt(Nf,"id","time"),xt(Nf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fh(n,t,e){let i=0,a=n.length-1,o,u,h,d;e?(t>=n[i].pos&&t<=n[a].pos&&({lo:i,hi:a}=lp(n,"pos",t)),{pos:o,time:h}=n[i],{pos:u,time:d}=n[a]):(t>=n[i].time&&t<=n[a].time&&({lo:i,hi:a}=lp(n,"time",t)),{time:o,pos:h}=n[i],{time:u,pos:d}=n[a]);const m=u-o;return m?h+(d-h)*(t-o)/m:h}class vT extends Nf{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Fh(e,this.min),this._tableRange=Fh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,a=[],o=[];let u,h,d,m,_;for(u=0,h=t.length;u<h;++u)m=t[u],m>=e&&m<=i&&a.push(m);if(a.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(u=0,h=a.length;u<h;++u)_=a[u+1],d=a[u-1],m=a[u],Math.round((_+d)/2)!==m&&o.push({time:m,pos:u/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Fh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Fh(this._table,i*this._tableRange+this._minPos,!0)}}xt(vT,"id","timeseries"),xt(vT,"defaults",Nf.defaults);const ww="label";function bT(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function UP(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function Rw(n,t){n.labels=t}function Iw(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ww;const i=[];n.datasets=t.map(a=>{const o=n.datasets.find(u=>u[e]===a[e]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function zP(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ww;const e={labels:[],datasets:[]};return Rw(e,n.labels),Iw(e,n.datasets,t),e}function BP(n,t){const{height:e=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:u,data:h,options:d,plugins:m=[],fallbackContent:_,updateMode:v,...T}=n,w=Gt.useRef(null),x=Gt.useRef(null),V=()=>{w.current&&(x.current=new sd(w.current,{type:u,data:zP(h,o),options:d&&{...d},plugins:m}),bT(t,x.current))},M=()=>{bT(t,null),x.current&&(x.current.destroy(),x.current=null)};return Gt.useEffect(()=>{!a&&x.current&&d&&UP(x.current,d)},[a,d]),Gt.useEffect(()=>{!a&&x.current&&Rw(x.current.config.data,h.labels)},[a,h.labels]),Gt.useEffect(()=>{!a&&x.current&&h.datasets&&Iw(x.current.config.data,h.datasets,o)},[a,h.datasets]),Gt.useEffect(()=>{x.current&&(a?(M(),setTimeout(V)):x.current.update(v))},[a,d,h.labels,h.datasets,v]),Gt.useEffect(()=>{x.current&&(M(),setTimeout(V))},[u]),Gt.useEffect(()=>(V(),()=>M()),[]),ET.createElement("canvas",{ref:w,role:"img",height:e,width:i,...T},_)}const HP=Gt.forwardRef(BP);function jP(n,t){return sd.register(t),Gt.forwardRef((e,i)=>ET.createElement(HP,{...e,ref:i,type:n}))}const FP=jP("pie",hp);sd.register(_u,NP,RP);function qP({presentes:n,ausentes:t}){const e={labels:["Presentes","Ausentes"],datasets:[{data:[n,t],backgroundColor:["#4caf50","#e53935"],borderWidth:1}]};return gt.jsx(FP,{data:e})}function GP(){const[n,t]=Gt.useState(!1),[e,i]=Gt.useState(!0),[a,o]=Gt.useState([]),[u,h]=Gt.useState({}),[d,m]=Gt.useState(""),[_,v]=Gt.useState("A1"),[T,w]=Gt.useState("A1"),[x,V]=Gt.useState(""),[M,K]=Gt.useState(()=>new Date().toISOString().split("T")[0]),[$,Z]=Gt.useState(""),[rt,nt]=Gt.useState(null),[ct,N]=Gt.useState(""),[R,I]=Gt.useState("A1");Gt.useEffect(()=>{const W=nO(Ys(ti,"alumnos"),lt=>{o(lt.docs.map(O=>O.data()))});return()=>W()},[]),Gt.useEffect(()=>{(async()=>{const lt=await xh(Ys(ti,"asistencias")),O={};lt.forEach(Q=>{const at=Q.data();at.fecha===M&&(O[at.alumno]=at.estado)}),h(O),setTimeout(()=>i(!1),800)})()},[M]);const k=async(W,lt)=>{const Q=(await xh(Ys(ti,"asistencias"))).docs.find(at=>at.data().fecha===M&&at.data().alumno===W);Q&&await Xb(Wh(ti,"asistencias",Q.id)),await Em(Ys(ti,"asistencias"),{fecha:M,alumno:W,estado:lt}),h(at=>({...at,[W]:lt}))},P=async()=>{const W=d.trim();W&&!a.some(lt=>lt.nombre===W)&&(await Em(Ys(ti,"alumnos"),{nombre:W,grupo:_}),m(""),V(`Alumno "${W}" agregado al grupo "${_}" ✅`),setTimeout(()=>V(""),2500))},L=async()=>{const W=$.split(`
`);await Promise.all(W.map(async lt=>{const[O,Q]=lt.split(",").map(at=>at.trim());O&&Q&&!a.some(at=>at.nombre===O)&&await Em(Ys(ti,"alumnos"),{nombre:O,grupo:Q})})),Z(""),V("Carga masiva completada ✅"),setTimeout(()=>V(""),3e3)},C=async W=>{const O=(await xh(Ys(ti,"alumnos"))).docs.find(Q=>Q.data().nombre===W);O&&await Xb(Wh(ti,"alumnos",O.id))},Ht=async()=>{const lt=(await xh(Ys(ti,"alumnos"))).docs.find(O=>O.data().nombre===rt);lt&&ct.trim()&&(await eO(Wh(ti,"alumnos",lt.id),{nombre:ct.trim(),grupo:R}),nt(null),N(""))},yt=()=>{r2(ap).then(()=>t(!1)).catch(console.error)};if(e)return gt.jsx("div",{className:"login-container",children:gt.jsx("p",{children:"Cargando datos... ⏳"})});if(!n)return gt.jsx(vM,{onLogin:()=>t(!0)});const F=a.filter(W=>W.grupo===T),it=()=>{const W=["Nombre,Estado"];F.forEach(({nombre:Q})=>{W.push(`${Q},${u[Q]||"Sin marcar"}`)});const lt=new Blob([W.join(`
`)],{type:"text/csv"}),O=document.createElement("a");O.href=URL.createObjectURL(lt),O.download=`asistencia-${M}.csv`,O.click()};return gt.jsxs("div",{className:"app-container",children:[gt.jsxs("div",{className:"header",children:[gt.jsx("h1",{children:"Asistencia - C&E English"}),gt.jsx("button",{onClick:yt,children:"Cerrar sesión"})]}),gt.jsx("div",{className:"fecha-input",children:gt.jsxs("label",{children:["Fecha:",gt.jsx("input",{type:"date",value:M,onChange:W=>K(W.target.value)})]})}),gt.jsx("div",{className:"filtros-grupo",children:gt.jsxs("label",{children:["Filtrar nivel:",gt.jsx("select",{value:T,onChange:W=>w(W.target.value),children:["A1","A2","B1","B2","C1","C2"].map(W=>gt.jsx("option",{value:W,children:W},W))})]})}),gt.jsxs("div",{className:"agregar-alumno",children:[x&&gt.jsx("p",{style:{color:"green",fontWeight:"bold"},children:x}),gt.jsx("input",{type:"text",autoComplete:"off",onKeyDown:W=>W.key==="Enter"&&P(),value:d,onChange:W=>m(W.target.value),placeholder:"Nombre del alumno"}),gt.jsx("select",{value:_,onChange:W=>v(W.target.value),children:["A1","A2","B1","B2","C1","C2"].map(W=>gt.jsx("option",{value:W,children:W},W))}),gt.jsx("button",{onClick:P,children:"Agregar"})]}),gt.jsxs("div",{className:"carga-masiva",children:[gt.jsx("h3",{children:"Carga masiva de alumnos"}),gt.jsx("textarea",{rows:5,placeholder:"Ej: Juan Pérez,A2\\nLaura Gómez,B1",value:$,onChange:W=>Z(W.target.value)}),gt.jsx("button",{onClick:L,children:"Cargar alumnos"})]}),gt.jsx("div",{className:"secciones-asistencia",children:["Presente","Ausente","Sin marcar"].map(W=>gt.jsxs("div",{children:[gt.jsxs("h3",{children:[W==="Presente"&&`✅ Presentes (${F.filter(lt=>u[lt.nombre]==="Presente").length})`,W==="Ausente"&&`❌ Ausentes (${F.filter(lt=>u[lt.nombre]==="Ausente").length})`,W==="Sin marcar"&&`🟡 Sin marcar (${F.filter(lt=>!u[lt.nombre]).length})`]}),gt.jsx("ul",{className:"lista-alumnos",children:F.filter(lt=>W==="Sin marcar"?!u[lt.nombre]:u[lt.nombre]===W).map(({nombre:lt,grupo:O})=>gt.jsxs("li",{className:"alumno-item",children:[gt.jsx("strong",{children:lt}),gt.jsxs("div",{className:"botones-asistencia",children:[gt.jsx("button",{className:W==="Presente"?"presente activo":"presente",onClick:()=>k(lt,"Presente"),children:"Presente"}),gt.jsx("button",{className:W==="Ausente"?"ausente activo":"ausente",onClick:()=>k(lt,"Ausente"),children:"Ausente"}),gt.jsx("button",{className:"eliminar",onClick:()=>C(lt),children:"Eliminar"}),rt===lt&&gt.jsxs("div",{className:"editar-form",children:[gt.jsx("input",{value:ct,onChange:Q=>N(Q.target.value)}),gt.jsx("select",{value:R,onChange:Q=>I(Q.target.value),children:["A1","A2","B1","B2","C1","C2"].map(Q=>gt.jsx("option",{value:Q,children:Q},Q))}),gt.jsx("button",{onClick:Ht,children:"Guardar"})]}),gt.jsx("button",{onClick:()=>{nt(lt),N(lt),I(O)},children:"✏️"})]})]},lt))})]},W))}),gt.jsx("button",{style:{marginBottom:"20px",padding:"8px 12px",borderRadius:"6px",backgroundColor:"#1976d2",color:"white",border:"none"},onClick:it,children:"📥 Descargar resumen CSV"}),gt.jsxs("div",{className:"resumen",children:[gt.jsx(qP,{presentes:F.filter(W=>u[W.nombre]==="Presente").length,ausentes:F.filter(W=>u[W.nombre]==="Ausente").length}),gt.jsxs("h2",{children:["Resumen del ",M]}),gt.jsx("ul",{children:Object.entries(u).map(([W,lt])=>gt.jsxs("li",{children:[W,": ",lt]},W))})]})]})}function KP(){return gt.jsx(GP,{})}c1.createRoot(document.getElementById("root")).render(gt.jsx(Gt.StrictMode,{children:gt.jsx(KP,{})}));
